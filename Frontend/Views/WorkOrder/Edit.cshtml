@{
    if (ViewBag.ID == 0)
    {
        ViewBag.Title = "Create WorkOrder";
    }
    else
    {
        ViewBag.Title = "Edit WorkOrder";
    }

    ViewBag.Module = "WorkOrder";

    ViewBag.Reset = Frontend.Helper.AuthHelper.GetActionButtonStatus(ViewBag.ModuleCode, Frontend.Helper.ActionEnum.Reset, HttpContext.Current);

    Frontend.APIDTO.APIUserInformation userInfo = (Frontend.APIDTO.APIUserInformation)Session[Frontend.Customize.Common.ProjectDefinition.USER_INFO_SESSION];
}

<style>
    .ui-autocomplete {
        max-height: 150px;
        overflow-y: 300px;
        overflow-x: hidden;
    }

    .ui-menu-item > a.ui-corner-all {
        display: block;
        padding: 3px 15px;
        clear: both;
        line-height: 18px;
        white-space: nowrap;
    }

    .modal-dialog {
        top: 100px !important
    }

    .Piece {
        background-color: #70eef2
    }

    .Component {
        background-color: #f8e3d7
    }
</style>

<form class="row" name="editForm">

    <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="jarviswidget" id="wid-id-general" data-widget-editbutton="false" data-widget-colorbutton="false" data-widget-fullscreenbutton="false" data-widget-deletebutton="false">
            <header>
                <ul class="nav nav-tabs pull-left in">
                    <li class="active">
                        <a data-toggle="tab" href="#tabGeneral" name="gtab"><i class="fa fa-database"></i> <span style="font-size: 12px"> General </span> </a>
                    </li>
                    <li ng-hide="data.workOrderTypeID !== 4 || @ViewBag.ID == 0" ng-click="event.openTabManagement(data.workOrderID, data.preOrderWorkOrderID)">
                        <a data-toggle="tab" href="#tabManagement"><i class="fa fa-database"></i> <span style="font-size: 12px"> Management Component </span> </a>
                    </li>
                </ul>
            </header>
            <div>
                <div class="widget-body">
                    <div class="tab-content">
                        <div class="tab-pane active" id="tabGeneral">
                            <div class="smart-form">
                                <div class="row">
                                    <section class="col col-12">
                                        <a href="@Url.Action("Edit", "BOM", new { id = UrlParameter.Optional })/0?workOrderID={{data.workOrderID}}" class="btn btn-primary btn-sm @ViewBag.Create" style="display: inline-block" target="_blank" title="Create BOM" ng-if="data.bomid == 0" ng-disabled="@ViewBag.ID == 0"><i class="fa fa-file"></i> Create BOM </a>
                                        <a href="@Url.Action("Edit", "BOM", new { id = UrlParameter.Optional })/{{data.bomid}}" class="btn btn-primary btn-sm" style="display: inline-block" target="_blank" title="Edit BOM" ng-if="data.bomid > 0" ng-disabled="data.workOrderTypeID==workOrderType._MAKE_TO_SAMPLE || data.workOrderTypeID==workOrderType._MAKE_TO_SPAREPART"><i class="fa fa-pencil-square"></i> Edit BOM </a>
                                        <div class="dropdown hide" style="display: inline-block">
                                            <a href="#" role="button" data-toggle="dropdown" class="btn btn-primary btn-xs font-12 @ViewBag.Create" data-target="#" aria-expanded="false" ng-disabled="data.workOrderStatusID!=2 && data.workOrderStatusID!=5">
                                                <i class="fa fa-file"></i> Create Receiving Note <span class="caret"></span>
                                            </a>
                                            <ul class="dropdown-menu multi-level" role="menu">
                                                <li>
                                                    <a href="@Url.Action("PO2Warehouse", "ReceivingNote")/0?workOrderIDs={{data.workOrderID}}" target="_blank" title="Create receiving note from purchasing order to warehouse"><i class="fa fa-arrow-right"></i> Create receiving note from puchasing order to warehouse </a>
                                                </li>
                                                <li>
                                                    <a href="@Url.Action("Team2Warehouse", "ReceivingNote")/0?workOrderIDs={{data.workOrderID}}" target="_blank" title="Create receiving note from warehouse to production team"><i class="fa fa-arrow-right"></i> Create receiving note from production team to warehouse </a>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="dropdown hide" style="display: inline-block">
                                            <a href="#" role="button" data-toggle="dropdown" class="btn btn-primary btn-xs font-12 @ViewBag.Create" data-target="#" aria-expanded="false" ng-disabled="data.workOrderStatusID!=2 && data.workOrderStatusID!=5">
                                                <i class="fa fa-file"></i> Create Delivery Note <span class="caret"></span>
                                            </a>
                                            <ul class="dropdown-menu multi-level" role="menu">
                                                <li>
                                                    <a href="@Url.Action("Warehouse2Team", "DeliveryNote2")/0?workOrderIDs={{data.workOrderID}}" target="_blank" title="Select"><i class="fa fa-arrow-right"></i> Create delivery note from warehouse to team </a>
                                                </li>
                                                <li>
                                                    <a href="@Url.Action("Team2Team", "DeliveryNote2")/0?workOrderIDs={{data.workOrderID}}" target="_blank" title="Select"><i class="fa fa-arrow-right"></i> Create delivery note from team to team </a>
                                                </li>
                                                <li>
                                                    <a href="@Url.Action("AmendWarehouse2Team", "DeliveryNote2")/0?workOrderIDs={{data.workOrderID}}" target="_blank" title="Select"><i class="fa fa-arrow-right"></i> Create delivery note from warehouse to team to amend product </a>
                                                </li>
                                                <li>
                                                    <a href="@Url.Action("AmendTeam2Team", "DeliveryNote2")/0?workOrderIDs={{data.workOrderID}}" target="_blank" title="Select"><i class="fa fa-arrow-right"></i> Create delivery note from team to team to amend product </a>
                                                </li>
                                                <li>
                                                    <a href="@Url.Action("SaleOrder", "DeliveryNote2")/0?workOrderIDs={{data.workOrderID}}" target="_blank" title="Select"><i class="fa fa-arrow-right"></i> Create delivery note from warehouse to sale </a>
                                                </li>
                                            </ul>
                                        </div>
                                        <a href="@Url.Action("Edit", "WorkOrderCost", new { id = UrlParameter.Optional })/{{data.bomid}}?workOrderID={{data.workOrderID}}" class="btn btn-primary btn-sm" style="display: inline-block" target="_blank" title="Edit Cost"><i class="fa fa-pencil-square"></i> Edit Cost </a>
                                    </section>
                                </div>

                                <div class="row">
                                    <section class="col col-lg-2">
                                        <label>
                                            <label>Work Order</label>
                                            <em class="note note-error" ng-show="editForm.workOrderUD.$error.required"> (Required)</em>
                                        </label>
                                        <label class="input" ng-class="{'state-error': editForm.workOrderUD.$error.required}">
                                            <input class="form-control" style="font-family: Arial; font-size: 12px; height: 30px" type="text" name="workOrderUD" ng-model="data.workOrderUD" readonly autocomplete="off" ng-show="data.workOrderStatusID==1">
                                            <input class="form-control" style="font-family: Arial; font-size: 12px; height: 30px" readonly ng-model="data.workOrderUD" ng-show="data.workOrderStatusID!=1" autocomplete="off" />
                                        </label>
                                    </section>

                                    <section class="col col-lg-2">
                                        <label>
                                            Type
                                            <em class="note note-error" ng-show="editForm.workOrderTypeID.$error.required"> (Required)</em>
                                        </label>
                                        <label class="input" ng-show="data.workOrderStatusID==1">
                                            <select class="form-control" style="font-size: 12px; height: 30px" ng-model="data.workOrderTypeID" ng-options="workOrderType.workOrderTypeID as workOrderType.workOrderTypeNM for workOrderType in workOrderTypes" name="workOrderTypeID" ng-change="event.selectWorkOrderType()" required>
                                                <option value=""></option>
                                            </select>
                                        </label>
                                        <label class="input" ng-show="data.workOrderStatusID!=1">
                                            <input class="form-control" style="font-family: Arial; font-size: 12px; height: 30px" readonly ng-model="data.workOrderTypeNM" />
                                        </label>
                                    </section>

                                    <section class="col col-lg-1">
                                        <label>
                                            Status
                                            <em class="note note-error" ng-show="editForm.workOrderStatusID.$error.required"> (Required)</em>
                                        </label>
                                        <label class="input">
                                            <select required id="workOrderStatusID" style="font-size: 12px; height: 30px" name="workOrderStatusID" class="form-control" ng-model="data.workOrderStatusID" ng-options="item.workOrderStatusID as item.workOrderStatusNM for item in workOrderStatuses | orderBy: 'displayOrder'" ng-confirm-click="change(data.workOrderStatusID)" selected-item="data.workOrderStatusID" popupcloseevent="popupCloseEvent_workOrderStatusID" ng-confirm-message="Are you sure you want to <b style='color:red'>{{method.getWorkOrderStatusNM(data.workOrderStatusID)}}</b> this work order?">
                                                <option value=""></option>
                                            </select>
                                        </label>
                                    </section>

                                    <section class="col col-lg-2">
                                        <label>
                                            Start Date <i class="fa fa-calendar"></i>
                                            <em class="note note-error" ng-show="editForm.startDate.$error.required"> (Required)</em>
                                        </label>

                                        <label class="input" ng-show="data.workOrderStatusID==1 || (data.workOrderStatus!=1 && canReset)">
                                            <input type="text" class="form-control datepicker" autocomplete="off" style="font-family: Arial; font-size: 12px; height: 30px" data-dateformat="dd/mm/yy" placeholder="dd/MM/yyyy" ng-model="data.startDate" name="startDate" required />
                                        </label>
                                        <label class="input" ng-show="!(data.workOrderStatusID==1 || (data.workOrderStatus!=1 && canReset))">
                                            <input class="form-control" style="font-family: Arial; font-size: 12px; height: 30px" ng-model="data.startDate" autocomplete="off" readonly />
                                        </label>
                                    </section>


                                    <section class="col col-lg-2">
                                        <label>
                                            Finish Date <i class="fa fa-calendar"></i>
                                            <em class="note note-error" ng-show="editForm.finishDate.$error.required"> (Required)</em>
                                        </label>
                                        <label class="input" ng-show="data.workOrderStatusID==1 || (data.workOrderStatus!=1 && canReset)">
                                            <input type="text" class="form-control datepicker" autocomplete="off" style="font-family: Arial; font-size: 12px; height: 30px" data-dateformat="dd/mm/yy" placeholder="dd/MM/yyyy" ng-model="data.finishDate" name="finishDate" required />
                                        </label>
                                        <label class="input" ng-show="!(data.workOrderStatusID==1 || (data.workOrderStatus!=1 && canReset))">
                                            <input class="form-control" style="font-family: Arial; font-size: 12px; height: 30px" autocomplete="off" ng-model="data.finishDate" readonly />
                                        </label>
                                    </section>


                                    <section class="col col-lg-3">
                                        <label>
                                            <label>OP Sequence</label>
                                            <em class="note note-error" ng-show="editForm.opSequenceID.$error.required"> (Required)</em> <a href="javascript:void(0)" title="View detail of OPSequence" ng-click="event.openWorkOrderOPSequence(data, opSequenceDetails)"><i class="fa fa-folder-open"></i> View</a>
                                        </label>
                                        <label class="input" ng-if="!(data.workOrderStatusID!=1 || data.preOrderWorkOrderID || listPreOrder.length != 0)">
                                            <select ng-if="data.bomid==0" class="form-control" style="font-family: Arial; font-size: 12px; height: 30px" ng-model="data.opSequenceID" ng-options="opSequence.opSequenceID as opSequence.opSequenceNM for opSequence in supportOPSequence" name="opSequenceID" required ng-change="event.changeOPSequence(data.opSequenceID, data.bomid, data.preOrderWorkOrderID)">
                                                <option value=""></option>
                                            </select>

                                            <select ng-if="data.bomid>0" required id="opSequenceID" name="opSequenceID" class="form-control" style="font-family: Arial; font-size: 12px; height: 30px" ng-model="data.opSequenceID" ng-options="item.opSequenceID as item.opSequenceNM for item in supportOPSequence" ng-change="event.changeOPSequence(data.opSequenceID, data.bomid, data.preOrderWorkOrderID)" @*ng-confirm-click selected-item="data.opSequenceID" popupcloseevent="popupCloseEvent_opSequenceID" ng-confirm-message="When you change OP Sequence then all BOM of this workorder will be deleted. Are you sure you want to change OP Sequence?"*@>
                                                <option value=""></option>
                                            </select>
                                        </label>
                                        <label class="input" ng-if="(data.workOrderStatusID!=1 || data.preOrderWorkOrderID || listPreOrder.length != 0)">
                                            <input class="form-control" style="font-family: Arial; font-size: 12px; height: 30px" ng-model="data.opSequenceNM" readonly />
                                        </label>
                                    </section>
                                </div>

                                <div class="row" ng-show="data.workOrderTypeID==workOrderType._MAKE_TO_ORDER">
                                    <section class="col col-lg-2">
                                        <label>
                                            <label>Client</label>
                                        </label>
                                        <label class="input">
                                            <input id="client" class="form-control" style="font-family: Arial; font-size: 12px; height: 30px" autocomplete="off" type="text" name="clientUD" ng-model="data.clientUD" ng-show="data.workOrderStatusID==1">
                                            <input type="text" class="form-control" style="font-family: Arial; font-size: 12px; height: 30px" autocomplete="off" ng-model="data.clientUD" ng-show="data.workOrderStatusID!=1" readonly />
                                        </label>
                                    </section>

                                    <section class="col col-lg-3">
                                        <label>
                                            <label>Proforma Invoice No</label>
                                        </label>
                                        <label class="input">
                                            <input id="saleOrder" class="form-control" style="font-family: Arial; font-size: 12px; height: 30px" type="text" autocomplete="off" name="saleOrder" ng-model="data.proformaInvoiceNo" ng-show="data.workOrderStatusID==1">
                                            <input id="saleOrder" class="form-control" style="font-family: Arial; font-size: 12px; height: 30px" type="text" autocomplete="off" name="saleOrder" ng-model="data.proformaInvoiceNo" ng-show="data.workOrderStatusID!=1" readonly>
                                        </label>
                                    </section>

                                    <section class="col col-lg-7">
                                        <label>
                                            <label>Model</label>
                                        </label>
                                        <label class="input">
                                            <input class="form-control" style="font-family: Arial; font-size: 12px; height: 30px" autocomplete="off" ng-model="infoModel" readonly />
                                        </label>
                                    </section>
                                </div>

                                <div class="row" ng-show="data.workOrderTypeID==workOrderType._MAKE_TO_ORDER">

                                    <section class="col col-lg-6" ng-show="factoryOrderDetails.length>0">
                                        <div class="tilsoft-table-wrapper">
                                            <div class="tilsoft-table">
                                                <div class="tilsoft-table-body" style="margin-top:0px;">
                                                    <table>
                                                        <tr>
                                                            <th style="width:30px"></th>
                                                            <th style="width:90px">ArticleCode</th>
                                                            <th>Description</th>
                                                            <th style="width:50px">Order Qnt</th>
                                                            <th style="width:50px">Produ ced</th>
                                                            <th style="width:80px">Factory</th>
                                                            <th style="width:70px">LDS</th>
                                                        </tr>
                                                        <tr ng-repeat="item in factoryOrderDetails">
                                                            <td>
                                                                <a class="btn btn-primary btn-xs font-11" ng-click="event.selectFactoryOrderDetailItem(item)">Select</a>
                                                            </td>
                                                            <td>{{item.articleCode}}</td>
                                                            <td>{{item.description}}</td>
                                                            <td style="text-align:right">{{item.orderQnt}}</td>
                                                            <td style="text-align:right">{{item.produced}}</td>
                                                            <td style="text-align:center">{{item.factoryUD}}</td>
                                                            <td style="text-align:center">{{item.lds}}</td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="7" style="vertical-align:middle">
                                                                Total rows : {{factoryOrderDetails.length}}
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </section>

                                    <section class="col col-lg-6">
                                        <div class="tilsoft-table-wrapper">
                                            <div class="tilsoft-table">
                                                <div class="tilsoft-table-body" style="margin-top:0px;height:auto">
                                                    <table>
                                                        <tr>
                                                            <th style="width:90px">ArticleCode</th>
                                                            <th>Description</th>
                                                            <th style="width:50px">Order Qnt</th>
                                                            <th style="width:80px">Factory</th>
                                                            <th style="width:70px">LDS</th>
                                                            <th style="width:50px">Qnt</th>
                                                        </tr>
                                                        <tr ng-repeat="item in data.workOrderDetailDTOs">
                                                            <td>{{item.articleCode}}</td>
                                                            <td>{{item.description}}</td>
                                                            <td style="text-align:right">{{item.orderQnt}}</td>
                                                            <td style="text-align:center">{{item.factoryUD}}</td>
                                                            <td style="text-align:center">{{item.lds}}</td>
                                                            <td>
                                                                <label class="input">
                                                                    <input ng-data-source="item.quantity" avs-number ng-decimal="0" class="form-control" style="text-align:right; font-family: Arial; font-size: 12px" />
                                                                </label>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="3" style="vertical-align:middle">
                                                                Total rows : {{data.workOrderDetailDTOs.length}}
                                                            </td>
                                                            <td colspan="2" style="vertical-align:middle;text-align:right">Total Produce</td>
                                                            <td>
                                                                <label class="input">
                                                                    <input type="text" class="form-control" avs-number style="text-align:right; font-family: Arial; font-size: 12px" ng-data-source="method.getTotalProduce()" ng-decimal="0" readonly />
                                                                </label>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </section>

                                </div>

                                <div class="row" ng-show="data.workOrderTypeID==workOrderType._MAKE_TO_STOCK || data.workOrderTypeID==workOrderType._PRE_ORDER">
                                    <section class="col col-lg-8">
                                        <label>
                                            <label>Product</label>
                                        </label>
                                        <label class="input">
                                            <input id="product" class="form-control" style="font-family: Arial; font-size: 12px; height: 30px" type="text" autocomplete="off" name="product" ng-model="data.preOrderDescription" ng-show="data.workOrderStatusID==1">
                                            <input id="product" class="form-control" style="font-family: Arial; font-size: 12px; height: 30px" type="text" autocomplete="off" name="product" ng-model="data.preOrderDescription" ng-show="data.workOrderStatusID!=1" readonly>
                                        </label>
                                    </section>
                                    <section class="col col-lg-2">
                                        <label>
                                            <label>ArticleCode</label>
                                        </label>
                                        <label class="input">
                                            <input type="text" class="form-control" style="font-family: Arial; font-size: 12px; height: 30px" autocomplete="off" readonly ng-model="data.productArticleCode" />
                                        </label>
                                    </section>
                                    <section class="col col-lg-1">
                                        <label>
                                            <label>Quantity</label>
                                        </label>
                                        <label class="input">
                                            <input class="form-control" avs-number style="text-align:right; font-family: Arial; font-size: 12px; height: 30px" autocomplete="off" type="text" name="quantity" ng-data-source="data.quantity" ng-decimal="2">
                                        </label>
                                    </section>
                                    <section class="col col-lg-1">
                                        <label>
                                            <label>%Wastage</label>
                                        </label>
                                        <label class="input">
                                            <input class="form-control" avs-number style="text-align:right; font-family: Arial; font-size: 12px; height: 30px" autocomplete="off" type="text" name="wastagePercent" ng-data-source="data.wastagePercent" ng-decimal="2">
                                        </label>
                                    </section>
                                </div>

                                <div class="row" ng-show="data.workOrderTypeID==workOrderType._PRE_ORDER">
                                    <section class="col col-lg-2">
                                        <label>
                                            <label>Client</label>
                                        </label>
                                        <label class="input">
                                            <input id="pre-order-client" class="form-control" type="text" style="font-family: Arial; font-size: 12px; height: 30px" name="clientUD" autocomplete="off" ng-model="data.clientUD" ng-show="data.workOrderStatusID==1">
                                            <input id="pre-order-client" class="form-control" type="text" style="font-family: Arial; font-size: 12px; height: 30px" name="clientUD" ng-model="data.clientUD" ng-show="data.workOrderStatusID!=1" readonly>
                                        </label>
                                    </section>
                                    <section class="col col-lg-6">
                                        <label>
                                            <label>Model Name</label>
                                        </label>
                                        <label class="input">
                                            <input type="text" class="form-control" ng-model="data.modelNM" readonly style="font-family: Arial; font-size: 12px; height: 30px" autocomplete="off" />
                                        </label>
                                    </section>
                                    <section class="col col-lg-2">
                                        <label>
                                            <label>Model Code</label>
                                        </label>
                                        <label class="input">
                                            <input type="text" class="form-control" ng-model="data.modelUD" readonly style="font-family: Arial; font-size: 12px; height: 30px" autocomplete="off" />
                                        </label>
                                    </section>
                                </div>

                                <div class="row" ng-show="data.workOrderTypeID==workOrderType._MAKE_TO_SAMPLE || data.workOrderTypeID==workOrderType._MAKE_TO_SPAREPART">
                                    <section class="col col-lg-11">
                                        <label>
                                            <label>Sample Order</label>
                                        </label>
                                        <label class="input">
                                            <input id="sampleOrder" class="form-control" type="text" style="font-family: Arial; font-size: 12px; height: 30px" autocomplete="off" name="sampleOrder" ng-model="data.sampleOrderInfo" ng-show="data.workOrderStatusID==1">
                                            <input id="sampleOrder" class="form-control" type="text" style="font-family: Arial; font-size: 12px; height: 30px" autocomplete="off" name="sampleOrder" ng-model="data.sampleOrderInfo" ng-show="data.workOrderStatusID!=1" readonly>
                                        </label>
                                    </section>

                                    <section class="col col-lg-1">
                                        <label>
                                            <label>Quantity</label>
                                        </label>
                                        <label class="input">
                                            <input class="form-control" avs-number style="text-align:right; font-family: Arial; font-size: 12px; height: 30px" autocomplete="off" type="text" name="quantity" ng-data-source="data.quantity" ng-decimal="2">
                                        </label>
                                    </section>

                                    <section class="col col-lg-12">
                                        <div class="tilsoft-table-wrapper">
                                            <div class="tilsoft-table">
                                                <div class="tilsoft-table-body" style="margin-top:0px;">
                                                    <table>
                                                        <tr>
                                                            <th style="width:230px">Code</th>
                                                            <th>Descirption</th>
                                                            <th style="width:150px">ETA Destination</th>
                                                        </tr>
                                                        <tr ng-repeat="item in sampleProducts">
                                                            <td>{{item.sampleProductUD}}</td>
                                                            <td>{{item.articleDescription}}</td>
                                                            <td>{{item.etaDestination}}</td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                </div>

                                <div class="row">
                                    <section class="col col-lg-3" ng-show="data.updatedBy">
                                        <div class="note">
                                            <strong>Updated By</strong>
                                            <i class="fa fa-user"> </i>
                                            <a href="@Url.Action("Detail", "EmployeeMng", new { id = UrlParameter.Optional })/{{data.updatedBy}}" data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600" ng-show="data.updatedBy != null && data.updatorName != null">
                                                {{data.updatorName}}
                                            </a>
                                            on
                                            {{data.updatedDate}}
                                        </div>
                                    </section>
                                    <section class="col col-lg-3" ng-show="data.setStatusBy">
                                        <div class="note">
                                            <strong>Set Status By</strong>
                                            <i class="fa fa-user"> </i>
                                            <a href="@Url.Action("Detail", "EmployeeMng", new { id = UrlParameter.Optional })/{{data.setStatusBy}}" data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600" ng-show="data.setStatusBy != null && data.setStatustorName != null">
                                                {{data.setStatustorName}}
                                            </a>
                                            on
                                            {{data.setStatusDate}}
                                        </div>
                                    </section>
                                </div>

                                <div class="row" ng-show="bomData.length>0 && (data.workOrderTypeID!=workOrderType._MAKE_TO_SAMPLE && data.workOrderTypeID!=workOrderType._MAKE_TO_SPAREPART)">
                                    <section class="col col-lg-12">
                                        <div>
                                            <div class="widget-body">
                                                <div class="tab-content">
                                                    <div class="tab-pane active">
                                                        <div avs-scroll grid-handler="gridHandler" class="tilsoft-table-wrapper">
                                                            <div class="tilsoft-table">
                                                                <div class="tilsoft-table-header" style="width: 1840px;">
                                                                    <div style="width: 30px;">#</div>
                                                                    <div style="width: 80px;">Type</div>
                                                                    <div style="width: 200px;">Code</div>
                                                                    <div style="width: 450px">Name</div>
                                                                    <div style="width: 60px">Norm</div>
                                                                    <div style="width: 100px">Production Qnt</div>
                                                                    <div style="width: 100px">Total Qnt</div>
                                                                    <div style="width: 100px">Stock Qnt</div>
                                                                    <div style="width: 100px">Delivery Qnt</div>
                                                                    <div style="width: 100px">Receive Qnt</div>
                                                                    <div style="width: 100px">WASTAGE PERCENT(%)</div>
                                                                    <div style="width: 100px">DELTA(%)</div>
                                                                    <div style="width: 100px">Unit</div>
                                                                    <div style="width: 108px">Work Center</div>
                                                                    <div>Team</div>
                                                                </div>
                                                                <div class="tilsoft-table-body" style="width: 1840px">
                                                                    <table>
                                                                        <tbody>
                                                                            <tr class="{{pItem.productionItemTypeNM}}" ng-if="pItem.parentBOMID != null" ng-repeat="pItem in bomData | filter : { branchID: pItem.branchID } : true">
                                                                                <td style="text-align:center; width:30px">{{pItem.pieceIndex}}</td>
                                                                                <td style="width:80px;text-align:{{pItem.productionItemTypeNM=='Material'?'right':'left'}}">{{pItem.productionItemTypeNM}}</td>
                                                                                <td style="width:200px">{{pItem.productionItemUD}}</td>
                                                                                <td style="width:450px">
                                                                                    {{pItem.productionItemNM}}
                                                                                    <div class="note" ng-if="pItem.productionItemTypeID==2">
                                                                                        {{pItem.description}}
                                                                                    </div>
                                                                                </td>
                                                                                <td style="text-align:right; width:60px">{{pItem.qtyByUnit | number}}</td>
                                                                                <td style="text-align:right; width:100px">{{pItem.workOrderQnt | number}}</td>
                                                                                <td style="text-align:right; width:100px">{{pItem.totalQnt | number}}</td>
                                                                                <td style="text-align:right; width:100px" ng-if="pItem.productionItemTypeID == 1">{{(pItem.stockQnt == null ? 0 : pItem.stockQnt) | number}}</td>
                                                                                <td style="text-align:right; width:100px" ng-if="pItem.productionItemTypeID == 2 && @userInfo.Data.BranchID == 1">{{(pItem.stockQntPAL_1 == null ? 0 : pItem.stockQntPAL_1) | number}}</td>
                                                                                <td style="text-align:right; width:100px" ng-if="pItem.productionItemTypeID == 2 && @userInfo.Data.BranchID == 2">{{(pItem.stockQntPAL_2 == null ? 0 : pItem.stockQntPAL_2) | number}}</td>
                                                                                <td style="text-align:right; width:100px" ng-if="pItem.productionItemTypeID == 2 && @userInfo.Data.BranchID == null">{{(pItem.stockQnt == null ? 0 : pItem.stockQnt) | number}}</td>
                                                                                <td style="text-align:right; width:100px" ng-if="pItem.productionItemTypeID !=2 && pItem.productionItemTypeID != 1"></td>
                                                                                <td style="text-align:right; width:100px">{{pItem.totalDeliveryQnt | number}}</td>
                                                                                <td style="text-align:right; width:100px">{{pItem.totalReceivedQnt | number}}</td>
                                                                                <td style="text-align:right; width:100px">{{(pItem.productionItemTypeID == 2) ? pItem.wastagePercent : null | number : 2}}<label ng-if="pItem.wastagePercent !== null && pItem.wastagePercent >= 0 && pItem.productionItemTypeID ==2" style="display: inline;">%</label></td>
                                                                                <td style="text-align:right; width:100px">{{(pItem.delta !== null && pItem.delta > pItem.wastagePercent && pItem.productionItemTypeID == 2) ? pItem.delta : null | number : 2}}<label ng-if="pItem.delta !== null && pItem.delta >= 0 && pItem.productionItemTypeID ==2" style="display: inline;">%</label></td>
                                                                                <td style="width:100px">{{pItem.unitNM}}</td>
                                                                                <td style="width:100px">
                                                                                    {{pItem.workCenterNM}}
                                                                                    <a href="@Url.Action("Index", "QualityInspectionRpt")/0?workCenterNM={{pItem.workCenterNM}}&workOrderID={{data.workOrderID}}&clientID={{data.clientID == null ? null : data.clientID}}&productionItemID={{pItem.productionItemID}}" target="_blank" class="btn btn-primary btn-xs font-11" ng-if="pItem.workCenterNM == 'WEAVING'">
                                                                                        <i class="fa fa-print"></i> QC {{pItem.workCenterNM}}
                                                                                    </a>
                                                                                </td>
                                                                                <td>{{pItem.productionTeamNM}}</td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                </div>   
                                
                                <div class="row" ng-show="data.workOrderID > 0 && (data.workOrderTypeID == 1 || data.workOrderTypeID == 2 || data.workOrderTypeID == 4)">
                                    <section class="col col-lg-12">
                                        <div class="widget-body">
                                            <div class="tab-content">
                                                <div class="tilsoft-table-wrapper">
                                                    <div class="tilsoft-table">
                                                        <div class="tilsoft-table-header" style="width:{{185 + 400*workOrderReportHeaderDTOs.length}}px;">
                                                            <div style="width:35px">#</div>
                                                            <div style="width:150px">Code</div>                                                           
                                                            <div style="width:400px" ng-repeat="header in workOrderReportHeaderDTOs">
                                                                <div class="no-padding" style="vertical-align: middle;border-bottom: none; width: 100%; height: 20px; border-right: none">{{header.workCenterUD}}</div>
                                                                <div class="no-padding" style="vertical-align: middle;border-bottom: none; width: 100%; border-right: none">
                                                                    <div class="no-padding" style="vertical-align: middle;border-bottom: none; width: 100px;border-right: none">Planning</div>
                                                                    <div class="no-padding" style="vertical-align: middle;border-bottom: none; width: 100px;border-right: none">Completed</div>
                                                                    <div class="no-padding" style="vertical-align: middle;border-bottom: none; width: 100px;border-right: none">Deliveried</div>
                                                                    <div class="no-padding" style="vertical-align: middle;border-bottom: none; border-right: none">Remain</div>
                                                                </div>
                                                            </div>
                                                            <div></div>
                                                        </div>
                                                        <div class="tilsoft-table-body" style="width:{{185 + 400*workOrderReportHeaderDTOs.length}}px">
                                                            <table>
                                                                <tbody ng-repeat="item in workOrderReportDTOs">
                                                                    <tr ng-style="{'background-color': item.workOrderID > -2 ? '#70eef2' : '#eeeeee'}" >
                                                                        <td style="text-align:center;width:35px">{{item.workOrderID > -2 ? ($index + 1): ''}}</td>
                                                                        <td style="width:150px">{{item.workOrderUD}}</td> 
                                                                        <td style="text-align:right;width:100px" ng-repeat="itemContent in workOrderReportContentDTOs | filter : { workOrderID: item.workOrderID}">                                                                         
                                                                            {{itemContent.quantity | number}}
                                                                        </td>
                                                                        <td></td>
                                                                    </tr>
                                                                    <tr style="background: #fbd8d5" ng-repeat="itemDetail in item.productionItemDTOs" ng-hide="item.productionItemDTOs.length == 0">
                                                                        <td style="text-align:center;width:35px">{{$index + 1}}</td>
                                                                        <td style="width:150px">{{itemDetail.productionItemUD}}</td>                                                                      
                                                                        <td style="text-align:right;width:100px" ng-repeat="itemContent in workOrderReportContentDTOs | filter : {  productionItemID: itemDetail.productionItemID}">                                                                        
                                                                            {{itemContent.quantity | number}}
                                                                        </td>
                                                                        <td></td>
                                                                    </tr>
                                                                </tbody>                                                            
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                </div>
                            </div>
                        </div>

                                <div id="tabManagement" class="tab-pane">
                                    <div class="smart-form">
                                        <div class="row">
                                            <div class="col col-sm-12">
                                                <h1>Pre-Order Information</h1>
                                                <hr />
                                            </div>
                                            <div id="preOrderInformation" class="col col-sm-12" style="margin-top: 5px; display: none">
                                                <div class="tilsoft-table-wrapper">
                                                    <div class="tilsoft-table">
                                                        <div class="tilsoft-table-header" style="width: 695px">
                                                            <div style="width: 250px"><b style="font-size: 12px">Finished<br />(Component)</b></div>
                                                            <div style="width: 90px"><b style="font-size: 12px">Plan<br />(Qnt)</b></div>
                                                            <div style="width: 90px"><b style="font-size: 12px">Produced<br />(Qnt)</b></div>
                                                            <div style="width: 140px"><b style="font-size: 12px">Total Transfer<br />(Qnt)</b></div>
                                                            <div style="width: 115px"><b style="font-size: 12px">Remain <b style="color: #ff0000">(*)</b><br />(Qnt)</b></div>
                                                            <div style="border-bottom: none"></div>
                                                        </div>
                                                        <div class="tilsoft-table-body" style="width: 695px">
                                                            <table>
                                                                <tbody>
                                                                    <tr ng-repeat="item in tabManagement.preOrderWorkOrderManagements">
                                                                        <td style="width: 249px">
                                                                            <a href="@Url.Action("Edit", "ProductionItem")/{{item.productionItemID}}" style="font-size: 12px" target="_blank"><b>{{item.productionItemUD}}</b></a>
                                                                        </td>
                                                                        <td style="width: 90px; text-align: right">{{item.planQuantity | number}}</td>
                                                                        <td style="width: 90px; text-align: right">{{item.produceQuantity | number}}</td>
                                                                        <td style="width: 140px; text-align: right">{{item.transferQuantity | number}}</td>
                                                                        <td style="width: 115px; text-align: right">{{(item.produceQuantity - item.transferQuantity) | number}}</td>
                                                                        <td style="border-bottom: none"></td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div id="preOrderInformationLoading" class="col col-sm-12">
                                                <i class="fa fa-spin fa-refresh"></i> LOADING ...
                                            </div>
                                        </div>
                                        <br />
                                        <div class="row">
                                            <div class="col col-sm-12">
                                                <h1>Work-Order based on Pre-Order</h1>
                                                <hr />
                                            </div>
                                            <div id="workOrderBasePreOrder" class="col col-sm-12" style="margin-top: 5px; display: none">
                                                <div class="tilsoft-table-wrapper">
                                                    <div class="tilsoft-table">
                                                        <div class="tilsoft-table-header" style="width: 1265px">
                                                            <div style="width: 65px; height: 90px"><b style="font-size: 12px">TOTAL<br /><b style="color: #0026ff; font-size: 12px">{{tabManagement.workOrderBaseOnManangements.length | number : 0}}</b></b></div>
                                                            <div style="width: 115px; height: 90px"><b style="font-size: 12px">Work Order<br />(Code)</b></div>
                                                            <div style="width: 150px; height: 90px"><b style="font-size: 12px">Proforma Invoice<br />(Number)</b></div>
                                                            <div style="width: 95px; height: 90px"><b style="font-size: 12px">Production<br />(Qnt)</b></div>
                                                            <div style="width: 90px; height: 90px"><b style="font-size: 12px">LDS<br />(Date)</b></div>
                                                            <div style="width: 250px; height: 90px"><b style="font-size: 12px">Components<br />(Code)</b></div>
                                                            <div style="width: 95px; height: 90px"><b style="font-size: 12px">Plan<br />(Qnt)</b></div>
                                                            <div style="width: 280px; height: 90px" class="no-padding">
                                                                <div style="width: 100%; height: 35px; border-right: none"><b style="font-size: 12px">Total</b></div>
                                                                <div style="width: 100%; height: 90px; border-bottom: none" class="no-padding">
                                                                    <div style="width: 90px; height: 55px"><b style="font-size: 12px">Transfer<br />(Qnt)</b></div>
                                                                    <div style="width: 90px; height: 55px"><b style="font-size: 12px">Used<br />(Qnt)</b></div>
                                                                    <div style="width: 100%; margin-top: 35px; height: 55px"><b style="font-size: 12px">Remain<br />(Qnt)</b></div>
                                                                </div>
                                                            </div>
                                                            <div style="width: 115px; height: 90px"><b style="font-size: 12px">Remain <b style="color: #ff0000">(**)</b><br />(Qnt)</b></div>
                                                            <div style="border-bottom: none; height: 90px"></div>
                                                        </div>
                                                        <div class="tilsoft-table-body" style="width: 1265px; margin-top: 90px">
                                                            <table>
                                                                <tbody>
                                                                    <tr ng-repeat="item in tabManagement.workOrderBaseOnManangements">
                                                                        <td style="width: 64px; text-align: center">
                                                                            {{$index + 1}}
                                                                            <a href="javascript:void(0)" class="btn btn-default btn-xs font-12 btn-success hide" title="Transfer" ng-click="event.openTransferWO(0, item.workOrderID, data.workOrderID, true, false)">
                                                                                <i class="fa fa-exchange"></i>
                                                                            </a>
                                                                        </td>
                                                                        <td style="width: 115px; text-align: center;">
                                                                            <a href="javascript:void(0)"><b>{{item.workOrderUD}}</b></a>
                                                                        </td>
                                                                        <td style="width: 150px; text-align: center">
                                                                            <a href="javascript:void(0)"><b>{{item.proformaInvoiceNo}}</b></a>
                                                                        </td>
                                                                        <td style="width: 95px; text-align: right">{{item.productionQuantity | number}}</td>
                                                                        <td style="width: 90px; text-align: center">{{item.lds}}</td>
                                                                        <td style="width: 740px">
                                                                            <table style="border: 1px solid #ccc; width: 728px">
                                                                                <tbody>
                                                                                    <tr ng-repeat="subItem in item.preOrderWorkOrderBaseOnManagements">
                                                                                        <td style="width: 248px!important">
                                                                                            <a href="javascript:void(0)"><b>{{subItem.productionItemUD}}</b></a>
                                                                                        </td>
                                                                                        <td style="width: 96px!important; text-align: right">{{subItem.planQuantity * item.productionQuantity | number}}</td>
                                                                                        <td style="width: 90px!important; text-align: right">{{0 | number}}</td>
                                                                                        <td style="width: 90px!important; text-align: right">{{subItem.useQuantity | number}}</td>
                                                                                        <td style="width: 100px!important; text-align: right">{{0 | number}}</td>
                                                                                        <td style="width: 110px!important; text-align: right">{{((subItem.planQuantity * item.productionQuantity) - subItem.useQuantity) | number}}</td>
                                                                                    </tr>
                                                                                </tbody>
                                                                            </table>
                                                                        </td>
                                                                        <td style="border-bottom: none"></td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div id="workOrderBasePreOrderLoading" class="col col-sm-12">
                                                <i class="fa fa-spin fa-refresh"></i> LOADING ...
                                            </div>
                                        </div>
                                        <br />
                                        <div class="row">
                                            <div class="col col-sm-12">
                                                <h1>History transfer Work-Order</h1>
                                                <hr />
                                            </div>
                                            <div id="historyTransferWorkOrder" class="col col-sm-12" style="margin-top: 5px; display: none">
                                                <div class="tilsoft-table-wrapper">
                                                    <div class="tilsoft-table">
                                                        <div class="tilsoft-table-header" style="width: 1060px">
                                                            <div style="width: 65px"><b style="font-size: 12px">TOTAL<br /><b style="color: #0026ff; font-size: 12px">{{tabManagement.historyTransferPreOrders.length | number : 0}}</b></b></div>
                                                            <div style="width: 125px"><b style="font-size: 12px">Transfer WO<br />(Code)</b></div>
                                                            <div style="width: 150px"><b style="font-size: 12px">Transfer Date<br />(Date)</b></div>
                                                            <div style="width: 120px"><b style="font-size: 12px">Work Order<br />(Code)</b></div>
                                                            <div style="width: 170px"><b style="font-size: 12px">Created By<br />(Name)</b></div>
                                                            <div style="width: 125px"><b style="font-size: 12px">Created Date<br />(Date)</b></div>
                                                            <div style="width: 170px"><b style="font-size: 12px">Updated By<br />(Name)</b></div>
                                                            <div style="width: 125px"><b style="font-size: 12px">Updated Date<br />(Date)</b></div>
                                                            <div style="border-bottom: none"></div>
                                                        </div>
                                                        <div class="tilsoft-table-body" style="width: 1060px">
                                                            <table>
                                                                <tbody>
                                                                    <tr ng-repeat="item in tabManagement.historyTransferPreOrders">
                                                                        <td style="width: 64px; text-align: center">
                                                                            <a href="javascript:void(0)" class="btn btn-default btn-xs font-12 btn-primary" title="Edit" ng-click="event.openTransferWO(item.transferWorkOrderID, item.workOrderID, data.workOrderID, true, false)">
                                                                                <i class="fa fa-pencil-square-o"></i>
                                                                            </a>
                                                                            <a href="javascript:void(0)" class="btn btn-default btn-xs font-12 btn-warning" title="View" ng-click="event.openTransferWO(item.transferWorkOrderID, item.workOrderID, data.workOrderID, false, true)">
                                                                                <i class="fa fa-eye"></i>
                                                                            </a>
                                                                        </td>
                                                                        <td style="width: 125px"><a href="javascript:void(0)"><b>{{item.transferWorkOrderUD}}</b></a></td>
                                                                        <td style="width: 150px; text-align: center">{{item.transferWorkOrderDate}}</td>
                                                                        <td style="width: 120px">
                                                                            <a href="javascript:void(0)"><b style="font-size: 12px">{{item.workOrderUD}}</b></a>
                                                                        </td>
                                                                        <td style="width: 170px">
                                                                            <a href="javascript:void(0)" ng-if="item.creatorName !== null">
                                                                                <i class="fa fa-user"></i> {{item.creatorName}}
                                                                            </a>
                                                                        </td>
                                                                        <td style="width: 125px; text-align: center">{{item.createdDate}}</td>
                                                                        <td style="width: 170px">
                                                                            <a href="javascript:void(0)" ng-if="item.updatorName !== null">
                                                                                <i class="fa fa-user"></i> {{item.updatorName}}
                                                                            </a>
                                                                        </td>
                                                                        <td style="width: 125px; text-align: center">{{item.updatedDate}}</td>
                                                                        <td style="border-bottom: none"></td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div id="historyTransferWorkOrderLoading" class="col col-sm-12">
                                                <i class="fa fa-spin fa-refresh"></i> LOADING ...
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                </div>
            </div>
        </div>
    </article>

    <div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="frmPreOrderWorkOrder" class="modal fade" style="display: none;z-index:999" data-backdrop="static">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header" style="padding: 10px">
                    <button aria-hidden="true" data-dismiss="modal" class="close" type="button" style="margin-top: 5px">
                        ×
                    </button>
                    <h4 id="myModalLabel" class="modal-title"><i class="fa fa-search"></i> Search Pre-Order for WorkOrder</h4>
                </div>
                <div class="modal-body no-padding">
                    <div class="smart-form">
                        <fieldset>
                            <div class="row">
                                <div class="col col-sm-3">
                                    <label><i class="fa fa-filter"></i> WorkOrder (Pre)</label>
                                    <label class="input">
                                        <input type="text" class="form-control" style="font-family: Arial; font-size: 12px; height: 30px" ng-model="filterWorkOrder.workOrderUD" />
                                    </label>
                                </div>
                                <div class="col col-sm-2">
                                    <label> </label>
                                    <label class="input">
                                        <a href="javascript:void(0)" class="btn btn-default btn-xs font-12 btn-primary" ng-click="preOrderWorkOrderForm.load()"><i class="fa fa-search"></i> Search</a>
                                    </label>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                    <div class="widget-body">
                        <div class="tilsoft-table-wrapper" style="padding-bottom: 10px" avs-scrollable-table>
                            <div class="tilsoft-table">
                                <div class="tilsoft-table-header" style="width: 870px">
                                    <div style="width: 60px"></div>
                                    <div style="width: 150px"><b style="font-size: 12px">WorkOrder<br />(Code)</b></div>
                                    <div style="width: 80px"><b style="font-size: 12px">Status<br />(Name)</b></div>
                                    <div style="width: 105px"><b style="font-size: 12px">Start Date<br />(Date)</b></div>
                                    <div style="width: 105px"><b style="font-size: 12px">Finish Date<br />(Date)</b></div>
                                    <div style="width: 150px"><b style="font-size: 12px">OP Sequence<br />(Name)</b></div>
                                    <div style="width: 210px"><b style="font-size: 12px">Model<br />(Based On)</b></div>
                                    <div style="border-bottom: none"></div>
                                </div>
                                <div class="tilsoft-table-body" style="width: 870px">
                                    <table>
                                        <tbody>
                                            <tr ng-repeat="item in preOrderWorkOrderForm.data | orderBy : '-workOrderID'">
                                                <td style="width: 59px; text-align: center">
                                                    <a class="btn btn-primary btn-xs font-12" href="javascript:void(0)" ng-click="preOrderWorkOrderForm.selectedWorkOrder(item)"><i class="fa fa-check"></i></a>
                                                </td>
                                                <td style="width: 150px; text-align: left">{{item.workOrderUD}}</td>
                                                <td style="width: 80px; text-align: center">{{item.workOrderStatusNM}}</td>
                                                <td style="width: 105px; text-align: center">{{item.startDate}}</td>
                                                <td style="width: 105px; text-align: center">{{item.finishDate}}</td>
                                                <td style="width: 150px; text-align: left">{{item.opSequenceNM}}</td>
                                                <td style="width: 210px; text-align: left">{{item.modelUD}} ({{item.modelNM}})</td>
                                                <td style="border-bottom: none"></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer" style="padding: 10px">
                    <a href="javascript:void(0)" class="btn btn-default btn-xs font-12 btn-danger" data-dismiss="modal"><i class="fa fa-times"></i> Cancel</a>
                </div>
            </div>
        </div>
    </div>

    <div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="frmOPSequenceDetail" class="modal fade" style="display: none;z-index:999" data-backdrop="static">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <a href="javascript:void(0)" aria-hidden="true" data-dismiss="modal" class="close">x</a>
                    <h5 id="myModalLabel" class="modal-title"><i class="fa fa-cogs"></i> <label style="font-style: italic">{{data.opSequenceNM}}</label></h5>
                </div>
                <div class="modal-body">
                    <a href="javascript:void(0)" class="btn btn-default btn-sm" style="margin-bottom: 3px" ng-click="event.checkAllActive()" ng-hide="data.workOrderStatusID != 1 || data.bomid != 0"><i class="fa fa-check-square-o"></i> Select all</a>
                    <div class="widget-body">
                        <div class="tilsoft-table-wrapper">
                            <div class="tilsoft-table">
                                <div class="tilsoft-table-header">
                                    <div style="width: 60px; text-align: center">Total <label style="color: #0026ff">{{opSequenceDetails.length | number}}</label></div>
                                    <div>Work Center</div>
                                </div>
                                <div class="tilsoft-table-body">
                                    <table>
                                        <tbody>
                                            <tr ng-repeat="item in opSequenceDetails">
                                                <td style="width: 59px; text-align: center">
                                                    <input type="checkbox" ng-model="item.isActived" ng-click="event.checkItemActive(item, data)" ng-disabled="item.isDisabled || data.workOrderStatusID != 1 || data.bomid != 0" />
                                                </td>
                                                <td>{{item.workCenterNM}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="javascript:void(0)" aria-hidden="true" class="btn btn-default btn-sm btn-primary" ng-click="event.saveWorkOrderOPSequence(data, opSequenceDetails)" ng-hide="data.workOrderStatusID != 1 || data.bomid != 0">
                        <i class="fa fa-save"></i> Save
                    </a>
                    <a href="javascript:void(0)" aria-hidden="true" data-dismiss="modal" class="btn btn-default btn-sm btn-danger">
                        <i class="fa fa-times"></i> Close
                    </a>
                </div>
            </div>
        </div>
    </div>

<!--Lock material-->
    <div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="frmBlockMaterial" class="modal fade" style="display: none;z-index:999" data-backdrop="static">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <a href="javascript:void(0)" aria-hidden="true" data-dismiss="modal" class="close">x</a>
                    <h5 id="myModalLabel" class="modal-title"><i class="fa fa-cogs"></i> <label style="font-style: italic">Block material in {{data.opSequenceNM}}</label></h5>
                </div>
                <div class="modal-body">
                    <a href="javascript:void(0)" class="btn btn-default btn-sm" style="margin-bottom: 3px" ng-click="event.checkAllActive()" ng-hide="data.workOrderStatusID != 1 || data.bomid != 0"><i class="fa fa-check-square-o"></i> Select all</a>
                    <div class="widget-body">
                        <div class="tilsoft-table-wrapper">
                            <div class="tilsoft-table">
                                <div class="tilsoft-table-header">
                                    <div style="width: 60px; text-align: center">Total <label style="color: #0026ff">{{opSequenceDetails.length | number : 0}}</label></div>
                                    <div style="width: 300px;">Work Center</div>
                                    <div>Set Block</div>
                                </div>
                                <div class="tilsoft-table-body">
                                    <table>
                                        <tbody>
                                            <tr ng-repeat="item in opSequenceDetails">
                                                <td style="width: 59px; text-align: center">{{$index + 1}}</td>
                                                <td style="width: 300px;">{{item.workCenterNM}}</td>
                                                <td style="text-align: center;">
                                                    <input type="checkbox" ng-model="item.isBlocked" ng-disabled="!item.isDisabledBlock" />
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="javascript:void(0)" aria-hidden="true" class="btn btn-default btn-sm btn-primary hidden">
                        <i class="fa fa-save"></i> Save
                    </a>
                    <a href="javascript:void(0)" aria-hidden="true" data-dismiss="modal" class="btn btn-default btn-sm btn-danger">
                        <i class="fa fa-times"></i> Close
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="frmTransferWO" class="modal fade" style="display: none;z-index:999" data-backdrop="static">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header" style="padding: 10px">
                    <button aria-hidden="true" data-dismiss="modal" class="close" type="button" style="margin-top: 5px" ng-click="transferWorkOrder.event.close(data.workOrderID, data.preOrderWorkOrderID)">×</button>
                    <h5 id="myModalLabel" class="modal-title" ng-if="isEdit"><i class="{{transferWorkOrder.data.transferWorkOrderID === 0 ? 'fa fa-file-o' : 'fa fa-pencil-square-o'}}"></i> {{transferWorkOrder.data.transferWorkOrderID === 0 ? 'Create' : 'Edit'}} transfer Work-Order</h5>
                    <h5 id="myModalLabel" class="modal-title" ng-if="isView"><i class="fa fa-eye"></i> View transfer Work-Order</h5>
                </div>
                <div class="modal-body no-padding">
                    <div class="smart-form">
                        <fieldset>
                            <div class="row">
                                <div id="errorComponent" style="display: none" class="alert alert-warning"></div>
                            </div>
                            <div class="row">
                                <div class="col col-sm-3">
                                    <label>Pre-Order(Work-Order)</label>
                                    <label class="input">
                                        <input type="text" class="form-control" style="height: 30px; font-family: Arial; font-size: 12px" readonly ng-model="transferWorkOrder.data.workOrderUD" />
                                    </label>
                                </div>
                                <div class="col col-sm-3">
                                    <label>Proforma Invoice</label>
                                    <label class="input">
                                        <input type="text" class="form-control" style="height: 30px; font-family: Arial; font-size: 12px" readonly ng-model="transferWorkOrder.data.proformaInvoiceNo" />
                                    </label>
                                </div>
                                <div class="col col-sm-3">
                                    <label>LDS</label> <i class="fa fa-calendar"></i>
                                    <label class="input">
                                        <input type="text" class="form-control" style="height: 30px; font-family: Arial; font-size: 12px" readonly ng-model="transferWorkOrder.data.lds" />
                                    </label>
                                </div>
                                <div class="col col-sm-3">
                                    <label>Quantity</label>
                                    <label class="input">
                                        <input type="text" avs-number-2 class="form-control" style="height: 30px; font-family: Arial; font-size: 12px; text-align: right" readonly ng-model="transferWorkOrder.data.productionQuantity" ng-decimal="0" />
                                    </label>
                                </div>
                            </div>
                            <div class="row" style="margin-top: 10px">
                                <div class="col col-sm-12">
                                    <div class="tilsoft-table-wrapper" avs-scrollable-table>
                                        <div class="tilsoft-table">
                                            <div class="tilsoft-table-header" style="width: 705px">
                                                <div style="width: 250px"><b style="font-size: 12px; font-family: Arial">Component<br />(Code)</b></div>
                                                <div style="width: 130px"><b style="font-size: 12px; font-family: Arial">Remain of Pre<br />(Qnt)</b></div>
                                                <div style="width: 125px"><b style="font-size: 12px; font-family: Arial">Remain of WO<br />(Qnt)</b></div>
                                                <div style="width: 95px"><b style="font-size: 12px; font-family: Arial">Transfer<br />(Qnt)</b></div>
                                                <div style="width: 95px; display: none"><b style="font-size: 12px; font-family: Arial">Remain<br />(Qnt)</b></div>
                                                <div style="border-bottom: none"></div>
                                            </div>
                                            <div class="tilsoft-table-body" style="width: 705px">
                                                <table>
                                                    <tbody>
                                                        <tr ng-repeat="item in transferWorkOrder.data.transferWorkOrderDetails">
                                                            <td style="width: 249px"><a href="javascript:void(0)"><b>{{item.productionItemUD}}</b></a></td>
                                                            <td style="width: 130px; text-align: right">{{item.preOrderWorkOrderQuantity | number : 0}}</td>
                                                            <td style="width: 125px; text-align: right">{{item.workOrderQuantity | number : 0}}</td>
                                                            <td style="width: 95px">
                                                                <label class="input" ng-if="isEdit">
                                                                    <input type="text" class="form-control" style="text-align: right; font-family: Arial; font-size: 12px; height: 30px" avs-number-2 ng-model="item.transferQuantity" ng-decimal="0" />
                                                                </label>
                                                                <label ng-if="isView" style="text-align: right">{{item.transferQuantity | number : 0}}</label>
                                                            </td>
                                                            <td style="width: 95px; text-align: right; display: none">{{20 | number : 0}}</td>
                                                            <td style="border-bottom: none"></td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                </div>
                <div class="modal-footer" style="padding: 10px">
                    <a href="javascript:void(0)" class="btn btn-default btn-xs font-12 btn-primary" ng-click="transferWorkOrder.event.savePreOrder2WorkOrder(transferWorkOrder.data, data.workOrderID, data.preOrderWorkOrderID)"><i class="fa fa-save"></i> Save</a>
                    <a href="javascript:void(0)" class="btn btn-default btn-xs font-12 btn-danger" data-dismiss="modal" ng-click="transferWorkOrder.event.close(data.workOrderID, data.preOrderWorkOrderID)"><i class="fa fa-times"></i> Cancel</a>
                </div>
            </div>
        </div>
    </div>
</form>

@section FormAction {
<ul id="sparks">
    <li class="sparks-info">
        <a href="@Url.Action("Index", "WorkOrder")" class="btn btn-default" title="Go Back"><i class="fa fa-arrow-left"></i></a>
    </li>
    <li class="sparks-info">
        <a href="javascript:void(0)" class="btn btn-default @ViewBag.Update" title="Save" ng-click="event.update($event)"><i class="fa fa-save"></i></a>
    </li>
    <li class="sparks-info">
        <a href="javascript:void(0)" class="btn btn-default @ViewBag.Delete" title="Delete" style="color: #ff0000;" ng-click="event.delete($event)"><i class="fa fa-times"></i></a>
    </li>
    <li class="sparks-info">
        <a href="@Url.Action("Index", "WorkOrderRpt", new { id = UrlParameter.Optional })/{{data.workOrderID}}" class="btn btn-default @ViewBag.Read" title="History" target="_blank"><i class="fa fa-history"></i></a>
    </li>
    <li class="sparks-info">
        <a href="javascript:void(0)" class="btn btn-default @ViewBag.Reset" title="Set Status To Confirm All" style="color: slategrey;" ng-click="event.openWorkoderStatus($event)"><i class="fa fa-eraser"></i></a>
    </li>
    <li class="sparks-info">
        <a href="javascript:void(0)" id="btnBlock" class="btn btn-default" title="Block Material" style="color: #ff0000;" ng-click="event.openMaterial(data, opSequenceDetails)" ng-disabled="workCenterToBlock === null"><i class="fa fa-lock"></i></a>
    </li>
</ul>
}
@section pagejs {
    <script src="~/Angular/app/jsonService.js?c=@System.Guid.NewGuid().ToString().Replace("-", "")"></script>
    <script src="~/Angular/app/support/service.js?c=@System.Guid.NewGuid().ToString().Replace("-","")"></script>
    <script type="text/javascript">
        jsonService.serviceUrl = '@(System.Configuration.ConfigurationManager.AppSettings["BackendServiceUrl"])api/workOrder/';
        jsonService.token = '@Session[Frontend.Customize.Common.ProjectDefinition.TOKEN_SESSION]';

        supportService.serviceUrl = '@(System.Configuration.ConfigurationManager.AppSettings["BackendServiceUrl"])api/support/';
        supportService.token = '@Session[Frontend.Customize.Common.ProjectDefinition.TOKEN_SESSION]';

        var context = {
            id: '@ViewBag.ID',
            backUrl: '@Url.Action("Index", "WorkOrder")',
            refreshUrl: '@Url.Action("Edit", "WorkOrder", new { id = UrlParameter.Optional })/',
            errMsg: '@Frontend.Properties.Resources.INPUT_VALIDATION_FAILED',
            supportServiceUrl: '@(System.Configuration.ConfigurationManager.AppSettings["BackendServiceUrl"])api/support/',
            token: '@Session[Frontend.Customize.Common.ProjectDefinition.TOKEN_SESSION]',
            bomUrl: '@Url.Action("Edit", "BOM", new { id = UrlParameter.Optional })/',
            reset: '@ViewBag.Reset',
            workOrderUrl: '@Url.Action("Edit", "WorkOrder", new { id = UrlParameter.Optional })/',
            branchID: '@userInfo.Data.BranchID',
        }
    </script>
    <script src="~/Views/WorkOrder/service.js?c=@System.Guid.NewGuid().ToString().Replace("-", "")"></script>
    <script src="~/Views/WorkOrder/edit.js?c=@System.Guid.NewGuid().ToString().Replace("-", "")"></script>
}

