<div ng-controller="SaleByCountryController">
    <div class="tilsoft-table">
        <div class="tilsoft-table-body">
            <table>
                <tbody>
                    <tr>
                        <th colspan="3"></th>
                        <th colspan="4" class="mi-background-current-season" style="font-weight:bold;text-align:center">PROFORMA INVOICE (PF)<br />@ViewBag.CurrentSeason</th>
                        <th colspan="4" class="mi-background-last-season" style="font-weight:bold;text-align:center">COMMERCIAL INVOICE (CI)<br /> @ViewBag.PreSeason</th>
                        <th colspan="2" class="mi-lccost-interest-last-season">Cost<br />@ViewBag.PreSeason</th>
                        <th colspan="3" class="mi-margin-last-season" style="font-weight:bold;text-align:center">&Delta; AFTER ALL<br /> @ViewBag.PreSeason</th>

                    </tr>
                    <tr>
                        <th style="font-weight: bold;width:35px">#<br />{{saleByCountryResult.length}}</th>
                        <th style="font-weight: bold;width:50px">
                            <a href="javascript:void(0)" ng-click="method.sortData('SaleByCountry', 'clientCountryUD')">
                                CODE
                                <span ng-show="sortValue.SaleByCountry === '-clientCountryUD'" class="fa fa-caret-down"></span>
                                <span ng-show="sortValue.SaleByCountry === 'clientCountryUD'" class="fa fa-caret-up"></span>
                            </a>
                        </th>
                        <th style="font-weight: bold;">
                            <a href="javascript:void(0)" ng-click="method.sortData('SaleByCountry', 'clientCountryNM')">
                                COUNTRY NAME
                                <span ng-show="sortValue.SaleByCountry === '-clientCountryNM'" class="fa fa-caret-down"></span>
                                <span ng-show="sortValue.SaleByCountry === 'clientCountryNM'" class="fa fa-caret-up"></span>
                            </a>
                        </th>

                        @*this season*@

                        <th style="font-weight: bold;width:60px;" class="mi-background-current-season">
                            <a href="javascript:void(0)" ng-click="method.sortData('SaleByCountry', 'proformaInvoiceCont_ThisYear')">
                                TOTAL CONT
                                <span ng-show="sortValue.SaleByCountry === '-proformaInvoiceCont_ThisYear'" class="fa fa-caret-down"></span>
                                <span ng-show="sortValue.SaleByCountry === 'proformaInvoiceCont_ThisYear'" class="fa fa-caret-up"></span>
                            </a>
                        </th>
                        <th style="font-weight: bold;width:120px;" class="mi-background-current-season">
                            <a href="javascript:void(0)" ng-click="method.sortData('SaleByCountry', 'proformaInvoiceAmountEUR_ThisYear')">
                                TOTAL AMOUNT (EUR)
                                <span ng-show="sortValue.SaleByCountry === '-proformaInvoiceAmountEUR_ThisYear'" class="fa fa-caret-down"></span>
                                <span ng-show="sortValue.SaleByCountry === 'proformaInvoiceAmountEUR_ThisYear'" class="fa fa-caret-up"></span>
                            </a>
                        </th>
                        <th style="font-weight: bold;width:70px;" class="mi-background-current-season">
                            <a href="javascript:void(0)" ng-click="method.sortData('SaleByCountry', 'percentProformaInvoice_ThisYear')">
                                %
                                <span ng-show="sortValue.SaleByCountry === '-percentProformaInvoice_ThisYear'" class="fa fa-caret-down"></span>
                                <span ng-show="sortValue.SaleByCountry === 'percentProformaInvoice_ThisYear'" class="fa fa-caret-up"></span>
                            </a>
                        </th>
                        <th style="font-weight: bold;width:60px;" class="mi-background-current-season">
                            <a href="javascript:void(0)" ng-click="method.sortData('SaleByCountry', 'proformaInvoiceTotalClient_ThisYear')">
                                NUM BER OF CLI ENT
                                <span ng-show="sortValue.SaleByCountry === '-proformaInvoiceTotalClient_ThisYear'" class="fa fa-caret-down"></span>
                                <span ng-show="sortValue.SaleByCountry === 'proformaInvoiceTotalClient_ThisYear'" class="fa fa-caret-up"></span>
                            </a>
                        </th>

                        @*last season*@

                        <th style="font-weight: bold;width:60px;" class="mi-background-last-season">
                            <a href="javascript:void(0)" ng-click="method.sortData('SaleByCountry', 'totalCont_LastYear')">
                                TOTAL CONT
                                <span ng-show="sortValue.SaleByCountry === '-totalCont_LastYear'" class="fa fa-caret-down"></span>
                                <span ng-show="sortValue.SaleByCountry === 'totalCont_LastYear'" class="fa fa-caret-up"></span>
                            </a>
                        </th>
                        <th style="font-weight: bold;width:120px;" class="mi-background-last-season">
                            <a href="javascript:void(0)" ng-click="method.sortData('SaleByCountry', 'totalEURAmount_LastYear')">
                                TOTAL AMOUNT (EUR)
                                <span ng-show="sortValue.SaleByCountry === '-totalEURAmount_LastYear'" class="fa fa-caret-down"></span>
                                <span ng-show="sortValue.SaleByCountry === 'totalEURAmount_LastYear'" class="fa fa-caret-up"></span>
                            </a>
                        </th>
                        <th style="font-weight: bold;width:70px;" class="mi-background-last-season">
                            <a href="javascript:void(0)" ng-click="method.sortData('SaleByCountry', 'percent_LastYear')">
                                %
                                <span ng-show="sortValue.SaleByCountry === '-percent_LastYear'" class="fa fa-caret-down"></span>
                                <span ng-show="sortValue.SaleByCountry === 'percent_LastYear'" class="fa fa-caret-up"></span>
                            </a>
                        </th>
                        <th style="font-weight: bold;width:60px;" class="mi-background-last-season">
                            <a href="javascript:void(0)" ng-click="method.sortData('SaleByCountry', 'totalClient_LastYear')">
                                NUM BER OF CLI ENT
                                <span ng-show="sortValue.SaleByCountry === '-totalClient_LastYear'" class="fa fa-caret-down"></span>
                                <span ng-show="sortValue.SaleByCountry === 'totalClient_LastYear'" class="fa fa-caret-up"></span>
                            </a>
                        </th>

                        <th style="font-weight: bold;width:60px" class="mi-lccost-interest-last-season" title="LC Cost">
                            <a href="javascript:void(0)" ng-click="method.sortData('SaleByCountry', 'lcCostAmountEUR_LastYear')">
                                LC Cost
                                <span ng-show="sortValue.SaleByCountry === '-lcCostAmountEUR_LastYear'" class="fa fa-caret-down"></span>
                                <span ng-show="sortValue.SaleByCountry === 'lcCostAmountEUR_LastYear'" class="fa fa-caret-up"></span>
                            </a>
                        </th>
                        <th style="font-weight: bold;width:70px" class="mi-lccost-interest-last-season" title="Interest Cost">
                            <a href="javascript:void(0)" ng-click="method.sortData('SaleByCountry', 'interestAmountEUR_LastYear')">
                                Interest
                                <span ng-show="sortValue.SaleByCountry === '-interestAmountEUR_LastYear'" class="fa fa-caret-down"></span>
                                <span ng-show="sortValue.SaleByCountry === 'interestAmountEUR_LastYear'" class="fa fa-caret-up"></span>
                            </a>
                        </th>


                        <th style="font-weight: bold;width:120px;" class="mi-margin-last-season">
                            <a href="javascript:void(0)" ng-click="method.sortData('SaleByCountry', 'totalMarginAmountEUR_LastYear')">
                                &Delta;
                                <span ng-show="sortValue.SaleByCountry === '-totalMarginAmountEUR_LastYear'" class="fa fa-caret-down"></span>
                                <span ng-show="sortValue.SaleByCountry === 'totalMarginAmountEUR_LastYear'" class="fa fa-caret-up"></span>
                            </a>
                        </th>

                        <th style="font-weight: bold;width:70px;" class="mi-margin-last-season">
                            <a href="javascript:void(0)" ng-click="method.sortData('SaleByCountry', 'percentMargin_LastYear')">
                                % OF 100%
                                <span ng-show="sortValue.SaleByCountry === '-percentMargin_LastYear'" class="fa fa-caret-down"></span>
                                <span ng-show="sortValue.SaleByCountry === 'percentMargin_LastYear'" class="fa fa-caret-up"></span>
                            </a>
                        </th>

                        <th style="font-weight: bold;width:70px;" class="mi-margin-last-season" title="% between margin and commercial invoice">
                            <a href="javascript:void(0)" ng-click="method.sortData('SaleByCountry', 'percentMarginCompareToCommercialInvoice_LastYear')">
                                % &Delta;
                                <span ng-show="sortValue.SaleByCountry === '-percentMarginCompareToCommercialInvoice_LastYear'" class="fa fa-caret-down"></span>
                                <span ng-show="sortValue.SaleByCountry === 'percentMarginCompareToCommercialInvoice_LastYear'" class="fa fa-caret-up"></span>
                            </a>
                        </th>


                    </tr>

                    <tr>
                        <th></th>
                        <th>A</th>
                        <th>B</th>

                        <th class="mi-background-current-season">C</th>
                        <th class="mi-background-current-season">D</th>
                        <th class="mi-background-current-season">E</th>
                        <th class="mi-background-current-season">F</th>

                        <th class="mi-background-last-season">G</th>
                        <th class="mi-background-last-season" style="text-align:center">H</th>
                        <th class="mi-background-last-season">I</th>
                        <th class="mi-background-last-season">J</th>

                        <th class="mi-lccost-interest-last-season" style="text-align:center">K</th>
                        <th class="mi-lccost-interest-last-season" style="text-align:center">L</th>

                        <th class="mi-margin-last-season" style="text-align:center">M</th>
                        <th class="mi-margin-last-season" style="text-align:center">N</th>
                        <th class="mi-margin-last-season" style="text-align:center">O</th>


                    </tr>

                    <tr>
                        <td colspan="3" style="font-weight: bold;text-align: left;">TOTAL({{saleByCountryResult.length}}) countries</td>

                        <td style="font-weight: bold;text-align: right;" class="mi-background-current-season">{{saleByCountryResult | sumFunc:'proformaInvoiceCont_ThisYear' | number : 1}}</td>
                        <td style="font-weight: bold;text-align: right;" class="mi-background-current-season">{{saleByCountryResult | sumFunc:'proformaInvoiceAmountEUR_ThisYear' | currency :'&euro;' : 0}}</td>
                        <td style="font-weight: bold;text-align: right;" class="mi-background-current-season">100%</td>
                        <td style="font-weight: bold;text-align: right;" class="mi-background-current-season">{{saleByCountryResult | sumFunc:'proformaInvoiceTotalClient_ThisYear' | number : 0}}</td>

                        <td style="font-weight: bold;text-align: right;" class="mi-background-last-season">{{saleByCountryResult | sumFunc:'totalCont_LastYear' | number : 1}}</td>
                        <td style="font-weight: bold;text-align: right;" class="mi-background-last-season">{{saleByCountryResult | sumFunc:'totalEURAmount_LastYear' | currency :'&euro;' : 0}}</td>
                        <td style="font-weight: bold;text-align: right;" class="mi-background-last-season">100%</td>
                        <td style="font-weight: bold;text-align: right;" class="mi-background-last-season">{{saleByCountryResult | sumFunc:'totalClient_LastYear' | currency :'&euro;' : 0}}</td>

                        <td style="font-weight: bold;text-align: right;" class="mi-lccost-interest-last-season">
                            {{saleByCountryResult | sumFunc:'lcCostAmountEUR_LastYear' | currency :'&euro;' : 0}}
                        </td>
                        <td style="font-weight: bold;text-align: right;" class="mi-lccost-interest-last-seasonn">
                            {{saleByCountryResult | sumFunc:'interestAmountEUR_LastYear' | currency :'&euro;' : 0}}
                        </td>

                        <td style="font-weight: bold;text-align: right;" class="mi-margin-last-season">
                            {{saleByCountryResult | sumFunc:'totalMarginAmountEUR_LastYear' | currency :'&euro;' : 0}}
                        </td>
                        <td style="font-weight: bold;text-align: right;" class="mi-margin-last-season">100%</td>
                        <td style="font-weight: bold;text-align: right;" class="mi-margin-last-season">
                            {{(saleByCountryResult | sumFunc:'totalMarginAmountEUR_LastYear') / (saleByCountryResult | sumFunc:'totalEURAmount_LastYear') * 100 | number : 0}}%
                        </td>


                    </tr>
                    <tr ng-repeat="item in saleByCountryResult = (SaleByCountry | filter : {clientCountryUD : ''} | orderBy : sortValue.SaleByCountry)">
                        <td style="text-align: right">{{$index+1}}</td>
                        <td style="text-align: center">{{item.clientCountryUD}}</td>
                        <td style="">{{item.clientCountryNM}}</td>

                        <td style="text-align: right;" class="mi-background-current-season">{{item.proformaInvoiceCont_ThisYear | number:1}}</td>
                        <td style="text-align: right;" class="mi-background-current-season">{{item.proformaInvoiceAmountEUR_ThisYear | currency:'&euro;':0}}</td>
                        <td style="text-align: right;" class="mi-background-current-season">{{item.proformaInvoiceAmountEUR_ThisYear / (saleByCountryResult | sumFunc :'proformaInvoiceAmountEUR_ThisYear') * 100 | number : 1}}%</td>
                        <td style="text-align: right;" class="mi-background-current-season">{{item.proformaInvoiceTotalClient_ThisYear | number:0}}</td>

                        <td style="text-align: right;" class="mi-background-last-season">{{item.totalCont_LastYear | number:1}}</td>
                        <td style="text-align: right;" class="mi-background-last-season">{{item.totalEURAmount_LastYear | currency:'&euro;':0}}</td>
                        <td style="text-align: right;" class="mi-background-last-season">{{item.totalEURAmount_LastYear / (saleByCountryResult | sumFunc :'totalEURAmount_LastYear') * 100 | number : 1}}%</td>
                        <td style="text-align: right;" class="mi-background-last-season">{{item.totalClient_LastYear | number:0}}</td>

                        <td style="text-align: right;" class="mi-lccost-interest-last-season">{{item.lcCostAmountEUR_LastYear | currency:'&euro;':0}}</td>
                        <td style="text-align: right;" class="mi-lccost-interest-last-season">{{item.interestAmountEUR_LastYear | currency:'&euro;':0}}</td>

                        <td style="text-align: right;" class="mi-margin-last-season">{{item.totalMarginAmountEUR_LastYear | currency:'&euro;':0}}</td>
                        <td style="text-align: right;" class="mi-margin-last-season">{{item.totalMarginAmountEUR_LastYear / (saleByCountryResult | sumFunc:'totalMarginAmountEUR_LastYear') * 100 | number : 1}}%</td>
                        <td style="text-align: right;" class="mi-margin-last-season">{{item.percentMargin_LastYear | number : 1}}%</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>