@{
    ViewBag.Icon = "fa-bar-chart-o";
    ViewBag.Title = "Client Overview";
    ViewBag.Module = "Client Overview";
    ViewBag.Offer = "OfferMng";
    ViewBag.SaleOrder = "SaleOrderMng";
    ViewBag.PLC = "FactoryPLCMng";
    ViewBag.ECommercialInvoice = "ECommercialInvoiceMng";
    ViewBag.Sample = "Sample2Mng";
    ViewBag.ClientComplaint = "ClientComplaint";
    ViewBag.LoadingPLan = "LoadingPlanMng";
    Frontend.APIDTO.APIUserInformation userInfo = (Frontend.APIDTO.APIUserInformation)Session[Frontend.Customize.Common.ProjectDefinition.USER_INFO_SESSION];

    string canViewAllSaleData = "false";
    if (userInfo.Data.ModuleSpecialPermissionAccesses.Count(o => o.ModuleSpecialPermissionUD == Frontend.Helper.ConstantIdentifier.SPECIAL_PERMISSION_CLIENTSPECIAL) > 0)
    {
        canViewAllSaleData = "true";
    }

    string offerViewUrl = Url.Action("Overview", "OfferToClientMng", new { id = UrlParameter.Optional });
    string offerEditUrl = Url.Action("Edit", "OfferToClientMng", new { id = UrlParameter.Optional });
    string saleOrderViewUrl = Url.Action("Overview", "SaleOrder", new { id = UrlParameter.Optional });
    string loadingPlanViewUrl = Url.Action("Overview", "LoadingPlan", new { id = UrlParameter.Optional });
    string relationshipViewUrl = Url.Action("Index", "OrderProcessMonitoringRpt", new { id = UrlParameter.Optional });
    string sampleViewUrl = Url.Action("Index", "AgendaMng", new { id = UrlParameter.Optional });
    string clientComplaintViewUrl = Url.Action("Edit", "ClientComplaint", new { id = UrlParameter.Optional });

    string PurchasingPriceMngMarginUrl = Url.Action("Index", "EurofarPurchasingPriceMng", new { articleCode = UrlParameter.Optional });
    string PurchasingPriceMngUrl = Url.Action("Index", "EstimatedPurchasingPriceMng", new { articleCode = UrlParameter.Optional });
    string OfferMngUrl = Url.Action("OverView", "Offer", new { id = UrlParameter.Optional });
    string ModelMngUrl = Url.Action("Index", "ProductOverviewRpt", new { id = UrlParameter.Optional });

    string autoTab = string.Empty;
    string autoSeason = string.Empty;
    if (Request.QueryString["tab"] != null)
    {
        autoTab = Request.QueryString["tab"].ToString();
    }
    if (Request.QueryString["season"] != null)
    {
        autoSeason = Request.QueryString["season"].ToString();
    }
}
<style>
    .tilsoft-table .tilsoft-table-header div,
    .tilsoft-table .tilsoft-table-body table th {
        font-size: 11px;
        text-transform: inherit;
    }

    .margin-top {
        margin-top: 50px !important;
    }

    .page-title {
        margin-bottom: 10px !important;
    }

    .price {
        background-color: lightgray;
    }

    tr.dummy-row {
        visibility: collapse;
    }
</style>

<div class="row">

    <div class="col-sm-12">
        <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false" data-widget-colorbutton="false" data-widget-fullscreenbutton="false" data-widget-deletebutton="false">
            <header>
                <ul class="nav nav-tabs pull-left in">
                    <li class="active">
                        <a data-toggle="tab" href="#generaltab"> <span>General</span> </a>
                    </li>
                    <li>
                        <a data-toggle="tab" href="#gictab"> <span>GIC</span> </a>
                    </li>
                    <li>
                        <a data-toggle="tab" href="#meetingtab"> <span>Meeting</span> </a>
                    </li>
                    <li>
                        <a data-toggle="tab" href="#cistab"> <span>CIS</span> </a>
                    </li>
                    <li>
                        <a data-toggle="tab" href="#offertab"> <span>Offer</span> </a>
                    </li>
                    <li>
                        <a data-toggle="tab" href="#offermargintab"> <span>O.S. Delta</span> </a>
                    </li>
                    <li>
                        <a data-toggle="tab" href="#pitab"> <span>P/I</span> </a>
                    </li>
                    <li>
                        <a data-toggle="tab" href="#loadingplantab"> <span>Loading Plan/Report</span> </a>
                    </li>
                    <li>
                        <a data-toggle="tab" href="#citab"> <span>C/I</span> </a>
                    </li>

                    <li ng-show="@userInfo.Data.ModuleSpecialPermissionAccesses.Count(o => o.ModuleSpecialPermissionUD == Frontend.Helper.ConstantIdentifier.SPECIAL_PERMISSION_CLIENTOVERVIEW_CI) > 0">
                        <a data-toggle="tab" href="#deltatab"> <span>Delta</span> </a>
                    </li>

                    <li ng-show="@userInfo.Data.ModuleSpecialPermissionAccesses.Count(o => o.ModuleSpecialPermissionUD == Frontend.Helper.ConstantIdentifier.SPECIAL_PERMISSION_CLIENTOVERVIEW_CI) > 0">
                        <a data-toggle="tab" href="#deltatab2"> <span>Delta 2</span> </a>
                    </li>

                    <li ng-show="@userInfo.Data.ModuleSpecialPermissionAccesses.Count(o => o.ModuleSpecialPermissionUD == Frontend.Helper.ConstantIdentifier.SPECIAL_PERMISSION_CLIENTOVERVIEW_CI) > 0">
                        <a data-toggle="tab" href="#deltatab3"> <span>Delta 3</span> </a>
                    </li>

                    <li>
                        <a data-toggle="tab" href="#sampletab"> <span>Sample</span> </a>
                    </li>

                    <li>
                        <a data-toggle="tab" href="#complaintab"> <span>Complaint</span> </a>
                    </li>

                    <li>
                        <a data-toggle="tab" href="#documenttab"> <span>Documents</span> </a>
                    </li>

                    <li>
                        <a data-toggle="tab" href="#contracttab"> <span>Contract</span> </a>
                    </li>

                    <li>
                        <a data-toggle="tab" href="#purchasingoverviewtab"> <span>Purchasing Overview</span> </a>
                    </li>

                    <li>
                        <a data-toggle="tab" href="#additionalCostTab"> <span>Est. Cost</span> </a>
                    </li>

                    <li>
                        <a data-toggle="tab" href="#otherinfotab"> <span>Other</span> </a>
                    </li>
                    <li>
                        <a data-toggle="tab" href="#cardtab"> <span>Business Card</span> </a>
                    </li>
                    <li>
                        <a data-toggle="tab" href="#tabclientrequirement"> <i class="fa fa-file-text"></i> <span class="hidden-mobile hidden-tablet">Client Requirements</span> </a>
                    </li>
                </ul>
            </header>
            <div>
                <div class="widget-body">
                    <div class="tab-content">
                        <!-- GENERAL -->
                        <div class="tab-pane active" id="generaltab">
                            <div class="col-sm-12">
                                <div class="smart-form">
                                    <fieldset>
                                        <section class="col col-8 no-padding">
                                            <div class="row">
                                                <section class="col col-4">
                                                    <a href="{{data.fileLocation}}" data-featherlight="image">
                                                        <img ng-src="{{data.thumbnailLocation}}" style="width: 100%; height: 180px" />
                                                    </a>
                                                </section>
                                                <section class="col col-8">
                                                    <h3>{{data.clientNM}} <span ng-if="data.isActive" class="label bg-color-green">ACTIVE</span><span ng-if="!data.isActive" class="label" style="background: #ddd;">INACTIVE</span></h3>
                                                    <p><strong style="display: inline-block; width: 150px;">Code</strong>: {{data.clientUD}}</p>
                                                    <p><strong style="display: inline-block; width: 150px;">Country</strong>: {{data.clientCountryNM}}</p>
                                                    <p><strong style="display: inline-block; width: 150px;">City</strong>: {{data.clientCityNM}}</p>
                                                    <p><strong style="display: inline-block; width: 150px;">Client Type</strong>: {{data.clientTypeNM}}</p>
                                                    <p><strong style="display: inline-block; width: 150px;">Qnt of store</strong>: {{data.qntOfStore}}</p>
                                                    <p><strong style="display: inline-block; width: 150px;">First business year</strong>: {{data.haveBusinessRelationshipFromYear}}</p>
                                                    <p><strong style="display: inline-block; width: 150px;">Relationship type</strong>: {{data.clientRelationshipTypeNM}}</p>
                                                    <p style="display: none;"><input type="checkbox" disabled ng-model="data.isBuyingOrangePie" /> Orange Pine client</p>
                                                    <p class="text-muted" ng-if="method.getDefaultEmail(data.clientContacts)">
                                                        <i class="fa fa-envelope-o"></i>&nbsp;&nbsp;<a href="mailto:{{method.getDefaultEmail(data.clientContacts)}}" target="_top">{{method.getDefaultEmail(data.clientContacts)}}</a>
                                                    </p>
                                                    <p class="text-muted" ng-if="!method.getDefaultEmail(data.clientContacts)">
                                                        <i class="fa fa-envelope-o"></i>&nbsp;&nbsp;<a href="mailto:{{data.email}}" target="_top">{{data.email}}</a>
                                                    </p>
                                                    <p class="text-muted" ng-if="data.telephone">
                                                        <i class="fa fa-phone"></i>&nbsp;&nbsp;<a href="javascript:void(0);" ng-click="event.openCall(model.telephone)">{{data.telephone}}</a>
                                                    </p>
                                                    <p class="text-muted" ng-if="data.skypeID">
                                                        <i class="fa fa-skype"></i>&nbsp;&nbsp;<a href="javascript:void(0);" ng-click="event.skypeChat(model.skypeID)">{{data.skypeID}}</a>
                                                    </p>
                                                    <p class="text-muted" ng-if="data.website || data.website2">
                                                        <i class="fa fa-globe"></i>&nbsp;&nbsp;<a href="http://{{data.website}}" target="_blank">{{data.website}}</a>&nbsp; <a ng-if="data.website2" href="http://{{data.website2}}" target="_blank">- {{data.website2}}</a>
                                                    </p>
                                                    <p ng-if="data.buyingOrganization"><strong style="display: inline-block; width: 90px;">Buying Org</strong>: {{data.buyingOrganization}}</p>
                                                </section>
                                            </div>

                                            <!-- Follow up -->
                                            <section class="col col-6">
                                                <div class="row">
                                                    <section class="col col-12">
                                                        <h2>Follow up</h2>
                                                    </section>
                                                </div>
                                                <div class="row">
                                                    <section class="col col-12">

                                                        <table>
                                                            <tbody>
                                                                <tr>
                                                                    <td style="width: 130px; vertical-align: top"><strong>Acc Manager</strong></td>
                                                                    <td style="vertical-align:top">
                                                                        : <a href="@Url.Action("Detail", "EmployeeMng", new { id = UrlParameter.Optional })/{{data.accountManagerID}}" data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600">
                                                                            {{data.accountManagerName}}
                                                                        </a>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td style="width: 130px; vertical-align: top"><strong>Sales Assistant</strong></td>
                                                                    <td style="vertical-align:top">
                                                                        : <a href="@Url.Action("Detail", "EmployeeMng", new { id = UrlParameter.Optional })/{{data.salesAssitantID}}" data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600">
                                                                            {{data.salesAssitantName}}
                                                                        </a>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td style="width: 130px; vertical-align: top"><strong>VN Merchandiser</strong></td>
                                                                    <td style="vertical-align:top">
                                                                        : <a href="@Url.Action("Detail", "EmployeeMng", new { id = UrlParameter.Optional })/{{data.vnSaleAssistantID}}" data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600">
                                                                            {{data.vnSaleAssistantName}}
                                                                        </a>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td style="width: 130px; vertical-align: top"><strong>VN Mer.Assistant</strong></td>
                                                                    <td style="vertical-align:top">
                                                                        : <a href="@Url.Action("Detail", "EmployeeMng", new { id = UrlParameter.Optional })/{{data.vnSaleMerchandiserAssistantID}}" data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600">
                                                                            {{data.vnSaleMerchandiserAssistantName}}
                                                                        </a>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td style="width: 130px; vertical-align: top"><strong>VN Log. Assistant</strong></td>
                                                                    <td style="vertical-align:top">
                                                                        : <a href="@Url.Action("Detail", "EmployeeMng", new { id = UrlParameter.Optional })/{{data.vnSaleAssistant2ID}}" data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600">
                                                                            {{data.vnSaleAssistant2Name}}
                                                                        </a>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td style="width: 130px; vertical-align: top"><strong>Agent</strong></td>
                                                                    <td style="vertical-align:top">: {{data.agentNM}}<i ng-if="data.defaultCommissionPercent!=null"> ({{data.defaultCommissionPercent}}%)</i></td>
                                                                </tr>
                                                                <tr>
                                                                    <td style="width: 130px; vertical-align: top"><strong>Discount/Bonus</strong></td>
                                                                    <td style="vertical-align:top">: {{data.bonusPercent}}%</td>
                                                                </tr>
                                                                <tr>
                                                                    <td style="width: 130px; vertical-align: top"><strong>Delivery Term</strong></td>
                                                                    <td style="vertical-align:top">: {{data.deliveryTermNM}}</td>
                                                                </tr>
                                                                <tr>
                                                                    <td style="width: 130px; vertical-align: top"><strong>Payment Term</strong></td>
                                                                    <td style="vertical-align:top">: {{data.paymentTermNM}}</td>
                                                                </tr>
                                                                <tr>
                                                                    <td style="width: 130px; vertical-align: top"><strong>Penalty Term</strong></td>
                                                                    <td style="vertical-align:top">
                                                                        <label ng-if="data.penaltyTerms.length > 0">: Yes</label>
                                                                        <label ng-if="data.penaltyTerms.length <= 0">: No</label>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td style="width: 130px; vertical-align: top"><strong>Client Group</strong></td>
                                                                    <td style="vertical-align:top">: {{data.clientGroupNM}}</td>
                                                                </tr>
                                                                <tr>
                                                                    <td style="width: 130px; vertical-align: top"><strong>Shipping length</strong></td>
                                                                    <td style="vertical-align:top">: {{data.shippingLength}} day(s)</td>
                                                                </tr>
                                                                <tr>
                                                                    <td style="width: 130px; vertical-align: top"></td>
                                                                    <td style="vertical-align:top"><input type="checkbox" disabled ng-model="data.crf" /> FCR</td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </section>
                                                </div>
                                            </section>

                                            <!-- Sign contract -->
                                            <section class="col col-6">
                                                <div class="row">
                                                    <section class="col col-12">
                                                        <h2>Signed contract</h2>
                                                    </section>
                                                </div>
                                                <div class="row">
                                                    <section class="col col-12">
                                                        <div avs-scroll grid-handler="gridHandler" class="tilsoft-table-wrapper">
                                                            <div class="tilsoft-table">
                                                                <div class="tilsoft-table-header" style="height: 0px">
                                                                </div>
                                                                <div class="tilsoft-table-body" style="min-height: 0px; max-height: 290px; min-width: 300px; margin-top: 0px">
                                                                    <table>
                                                                        <tr ng-repeat="item in data.clientContracts | filter: filterContractData">
                                                                            <td>
                                                                                <a ng-href="{{item.contractFileURL}}" target="_blank">{{item.contractFileFriendlyName}}</a>
                                                                            </td>
                                                                        </tr>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </section>
                                                </div>
                                            </section>
                                        </section>
                                        <section class="col col-4 no-padding">
                                            <div style="text-align: center; font-weight: bold; background: #f9f9f9; padding: 8px 0px; border: solid 1px #ddd; border-bottom: none; box-sizing: border-box;">
                                                CONTACT PERSON
                                            </div>
                                            <div style="height: 453px; overflow-y: scroll; border: solid 1px #ddd;">
                                                <table class="table table-bordered" style="box-sizing: border-box; border: none;">
                                                    <tbody>
                                                        <tr ng-repeat="item in data.clientContacts | orderBy: 'displayIndex'">
                                                            <td>
                                                                <strong>{{item.fullName}}</strong> - {{item.jobTitle}} <span ng-if="item.isEurofarAgent" class="label bg-color-teal">Agent</span> <span ng-if="item.isDefault" class="label bg-color-orange">Default</span>
                                                                <div class="note">
                                                                    <span ng-if="item.email" style="display: inline-block; margin-right: 10px;"><a style="font-size: inherit;" title="send email to {{item.email}}" href="mailto:{{item.email}}"><i class="fa fa-envelope-o"></i> {{item.email}}</a></span>
                                                                    <span ng-if="item.telephone" style="display: inline-block; margin-right: 10px;"><i class="fa fa-phone"></i> {{item.telephone}}</span>
                                                                    <span ng-if="item.mobile" style="display: inline-block; margin-right: 10px;"><i class="fa fa-mobile-phone"></i> {{item.mobile}}</span>
                                                                </div>
                                                                <p ng-if="item.remark" class="note">
                                                                    {{item.remark}}
                                                                </p>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </section>
                                    </fieldset>
                                    <fieldset ng-if="data.penaltyTerms.length > 0">
                                        <h2>Penalty Term</h2>
                                        <fieldset style="padding: 0px;">
                                            <table class="table table-bordered">
                                                <tr>
                                                    <th style="width: 200px; text-align: center">Name</th>
                                                    <th style="width: 100px; text-align: center">Number Date</th>
                                                    <th style="width: 100px; text-align: center">Percent</th>
                                                    <th style="width: 100px; text-align: center">Value</th>
                                                    <th style="text-align: center">Remark</th>
                                                </tr>
                                                <tr ng-repeat="item in data.penaltyTerms">
                                                    <td style="width:300px">
                                                        {{item.penaltyTermNM}}
                                                    </td>
                                                    <td style="width: 100px; text-align: center">
                                                        {{item.numberDate | number : 0}}
                                                    </td>
                                                    <td style="width: 100px; text-align: right">
                                                        {{item.percent | number : 2}}
                                                    </td>
                                                    <td style="width: 150px; text-align: right">
                                                        {{item.value | number : 2}}
                                                    </td>
                                                    <td> {{item.remark}}</td>
                                                </tr>
                                            </table>
                                        </fieldset>
                                    </fieldset>
                                    <fieldset>
                                        <section>
                                            <h2>DDC</h2>
                                        </section>
                                        <section>
                                            <table class="table table-bordered">
                                                <tr style="background-color: #f9f9f9;">
                                                    <th rowspan="2" style="text-align: center; border-right: solid 1px #aaa;">SEASON</th>
                                                    <th colspan="4" style="text-align: center; border-top: solid 1px #aaa; border-left: solid 1px #aaa; border-right: solid 1px #aaa;">EXPECTATION</th>
                                                    <th colspan="4" style="text-align: center; border-top: solid 1px #aaa; border-left: solid 1px #aaa; border-right: solid 1px #aaa;">P/I</th>
                                                    <th colspan="4" style="text-align: center; border-top: solid 1px #aaa; border-left: solid 1px #aaa; border-right: solid 1px #aaa;">P/I CONF</th>
                                                    <th colspan="4" style="text-align: center; border-top: solid 1px #aaa; border-left: solid 1px #aaa; border-right: solid 1px #aaa;">C/I</th>
                                                </tr>
                                                <tr style="background-color: #f9f9f9;">
                                                    <th style="text-align: center; border-left: solid 1px #aaa;">QNT (40HC)</th>
                                                    <th style="text-align: center;">USD</th>
                                                    <th style="text-align: center;">EUR</th>
                                                    <th style="text-align: center; border-right: solid 1px #aaa;">TOTAL EUR</th>

                                                    <th style="text-align: center; border-left: solid 1px #aaa;">QNT (40HC)</th>
                                                    <th style="text-align: center;">USD</th>
                                                    <th style="text-align: center;">EUR</th>
                                                    <th style="text-align: center; border-right: solid 1px #aaa;">TOTAL EUR</th>

                                                    <th style="text-align: center; border-left: solid 1px #aaa;">QNT (40HC)</th>
                                                    <th style="text-align: center;">USD</th>
                                                    <th style="text-align: center;">EUR</th>
                                                    <th style="text-align: center; border-right: solid 1px #aaa;">TOTAL EUR</th>

                                                    <th style="text-align: center; border-left: solid 1px #aaa;">QNT (40HC)</th>
                                                    <th style="text-align: center;">USD</th>
                                                    <th style="text-align: center;">EUR</th>
                                                    <th style="text-align: center; border-right: solid 1px #aaa;">TOTAL EUR</th>
                                                </tr>
                                                <tr ng-repeat="item in data.clientDDCs | orderBy: '-season'">
                                                    <td style="text-align: center; border-right: solid 1px #aaa;">
                                                        {{item.season}}
                                                    </td>

                                                    <td style="text-align: right; {{$index == data.clientDDCs.length - 1 ? 'border-bottom: solid 1px #aaa;' : ''}} border-left: solid 1px #aaa;">{{(item.convertUSD2EURCont != null && item.convertUSD2EURCont != 0) ? (item.totalExpectionConvertEUR / item.convertUSD2EURCont) : null | number:2}}</td>
                                                    <td style="text-align: right; {{$index == data.clientDDCs.length - 1 ? 'border-bottom: solid 1px #aaa;' : ''}}">{{item.expectionUSD | currency:'$': 0}}</td>
                                                    <td style="text-align: right; {{$index == data.clientDDCs.length - 1 ? 'border-bottom: solid 1px #aaa;' : ''}}">{{item.expectionEUR | currency:'&euro;': 0}}</td>
                                                    <td style="text-align: right; {{$index == data.clientDDCs.length - 1 ? 'border-bottom: solid 1px #aaa;' : ''}} border-right: solid 1px #aaa;">{{item.totalExpectionConvertEUR | currency:'&euro;': 0}}</td>

                                                    <td style="text-align: right; {{$index == data.clientDDCs.length - 1 ? 'border-bottom: solid 1px #aaa;' : ''}} border-left: solid 1px #aaa;">{{item.orderQnt40HC | number:2}}</td>
                                                    <td style="text-align: right; {{$index == data.clientDDCs.length - 1 ? 'border-bottom: solid 1px #aaa;' : ''}}">{{item.allOrderTotalUSD | currency:'$':0}}</td>
                                                    <td style="text-align: right; {{$index == data.clientDDCs.length - 1 ? 'border-bottom: solid 1px #aaa;' : ''}}">{{item.allOrderTotalEUR | currency:'&euro;':0}}</td>
                                                    <td style="text-align: right; {{$index == data.clientDDCs.length - 1 ? 'border-bottom: solid 1px #aaa;' : ''}} border-right: solid 1px #aaa;">{{item.allOrderConvertoEUR | currency:'&euro;':0}}</td>

                                                    <td style="text-align: right; {{$index == data.clientDDCs.length - 1 ? 'border-bottom: solid 1px #aaa;' : ''}} border-left: solid 1px #aaa;">{{item.confirmedOrderQnt40HC | number:2}}</td>
                                                    <td style="text-align: right; {{$index == data.clientDDCs.length - 1 ? 'border-bottom: solid 1px #aaa;' : ''}}">{{item.confirmedOrderTotalUSD | currency:'$':0}}</td>
                                                    <td style="text-align: right; {{$index == data.clientDDCs.length - 1 ? 'border-bottom: solid 1px #aaa;' : ''}}">{{item.confirmedOrderTotalEUR | currency:'&euro;':0}}</td>
                                                    <td style="text-align: right; {{$index == data.clientDDCs.length - 1 ? 'border-bottom: solid 1px #aaa;' : ''}} border-right: solid 1px #aaa;">{{item.confirmedOrderConvertoEUR | currency:'&euro;':0}}</td>

                                                    <td style="text-align: right; {{$index == data.clientDDCs.length - 1 ? 'border-bottom: solid 1px #aaa;' : ''}} border-left: solid 1px #aaa;">{{item.ciTotalQnt40HC | number:2}}</td>
                                                    <td style="text-align: right; {{$index == data.clientDDCs.length - 1 ? 'border-bottom: solid 1px #aaa;' : ''}}">{{item.ciTotalUSD | currency:'$':0}}</td>
                                                    <td style="text-align: right; {{$index == data.clientDDCs.length - 1 ? 'border-bottom: solid 1px #aaa;' : ''}}">{{item.ciTotalEUR | currency:'&euro;':0}}</td>
                                                    <td style="text-align: right; {{$index == data.clientDDCs.length - 1 ? 'border-bottom: solid 1px #aaa;' : ''}} border-right: solid 1px #aaa;">{{item.ciTotalConvertToEUR | currency:'&euro;':0}}</td>
                                                </tr>
                                            </table>
                                        </section>
                                        <section ng-show="data.hasPermissionOnCommercialInvoiceChart">
                                            <div style="border: solid 1px #ddd; padding: 10px 0px;">
                                                <div id="chartCommercialInvoice"></div>
                                            </div>
                                        </section>
                                    </fieldset>
                                </div>
                            </div>
                        </div>

                        <!--GIC-->
                        <div class="tab-pane" id="gictab">
                            <div class="row">
                                <div class="col-sm-12 m-bottom-15">                                    
                                    <div class="row">
                                        <div class="col-sm-12 m-bottom-15">
                                            <label style="color: gray;">
                                                Below story is how today {{data.accountManagerName}} evaluates this client. How he looks doing business with them in the past and what’s the potential towards the future.
                                                <a href="javascript:void(0)" class="btn btn-success btn-xs" ng-click="event.saveGIC()" ng-if="@userInfo.Data.UserId === data.accountManagerID || @canViewAllSaleData == true">Save</a>
                                            </label>                                            
                                        </div>
                                    </div>
                                    <div class="row" ng-if="@userInfo.Data.UserId === data.accountManagerID || @canViewAllSaleData == true">                                        
                                        <div class="col-sm-12 m-bottom-15">
                                            <textarea style="color:black;" class="form-control" ng-model="GICItem.communicationContent" rows="50"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12 m-bottom-15">
                                    <div class="smart-form">
                                        <div class="widget-body no-padding">
                                            <div avs-scroll grid-handler="gridHandler" class="tilsoft-table-wrapper">
                                                <div class="tilsoft-table" style="height:700px">
                                                    <div class="tilsoft-table-header" style="width: 1050px;">
                                                        <div style="width: 80px;"></div>
                                                        <div style="width: 100px;" data-colname="ContactDate">DATE</div>
                                                        <div data-colname="CommunicationContent">CONTENT</div>
                                                    </div>

                                                    <div class="tilsoft-table-body" style="width: 1050px;">
                                                        <table>
                                                            <tr ng-repeat="item in data.clientContactHistories | orderBy: '-clientContactHistoryID'">
                                                                <td style="width:80px;text-align:center">
                                                                    <a ng-if="checkEditDate(item)" class="btn btn-primary btn-xs font-11" title="Edit" ng-click="editGIC(item)"><i class="fa fa-pencil"></i>Edit</a>
                                                                </td>
                                                                <td style="text-align: center; width: 100px; vertical-align:middle">{{item.contactDate}}</td>
                                                                <td style="text-align: left; vertical-align:middle; "><textarea readonly rows="5" style="padding: 5px;">{{item.communicationContent}}</textarea></td>
                                                            </tr>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- CIS -->
                        <div class="tab-pane" id="cistab">
                            <h2 style="margin-top: 0px; margin-bottom: 5px;">SHIPPING PERFORMANCE</h2>
                            <section>
                                <div class="smart-form">
                                    <fieldset style="padding: 0px;">
                                        <div class="row">
                                            <section class="col col-4">
                                                <label class="label">Season</label>
                                                <label class="select">
                                                    <select ng-model="shippingPerformanceData.season" ng-options="season.seasonValue as season.seasonText for season in seasons"></select>
                                                    <i></i>
                                                </label>
                                                <a style="margin-top: 15px;" href="javascript:void(0)" class="btn btn-success btn-lg" ng-click="event.getCISShippingPerformance()">Refresh</a>
                                            </section>
                                            <section class="col col-8">
                                                <label class="label">Shipping window length: {{data.shippingLength ? data.shippingLength + ' day(s)' : 'N/A'}}</label>
                                                <table class="table table-bordered">
                                                    <thead>
                                                        <tr>
                                                            <th colspan="4">
                                                                Ordered: {{shippingPerformanceData.totalOrdered40HC | number:2}} / Shipped: {{shippingPerformanceData.totalShipped40HC | number:2}} (Actual shipped: {{shippingPerformanceData.total40HC + shippingPerformanceData.total40DC + shippingPerformanceData.total20DC + shippingPerformanceData.totalUnknowContainerType | number:0}}) / To Be Shipped: {{shippingPerformanceData.totalToBeShipped | number:2}}
                                                                <div class="note">Base on the 40HC load ability</div>
                                                            </th>
                                                        </tr>
                                                        <tr>
                                                            <th colspan="2">Total Container: {{shippingPerformanceData.total40HC + shippingPerformanceData.total40DC + shippingPerformanceData.total20DC + shippingPerformanceData.totalUnknowContainerType | number:0}}</th>
                                                            <th colspan="2">
                                                                Conclusion (Avg: {{shippingPerformanceData.avgLateInDays | number:0}}, Rating: <span style="cursor: pointer;" onclick="$('#ratingExplaination').modal('show');" class="label {{method.getRatingClass(shippingPerformanceData.finalPerformanceConclusion)}}">{{shippingPerformanceData.finalPerformanceConclusion}} <i class="fa fa-question-circle"></i></span>)
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td>
                                                                40HC
                                                                <div class="note" style="display: inline-block;">(Actual shipped containers)</div>
                                                            </td>
                                                            <td style="text-align: right;">{{shippingPerformanceData.total40HC | number:0}}</td>
                                                            <td>
                                                                On Time Container(s)
                                                                <div class="note" style="display: inline-block;">(Actual shipped containers)</div>
                                                            </td>
                                                            <td style="text-align: right;">{{shippingPerformanceData.totalOnTimeContainer}}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                40DC
                                                                <div class="note" style="display: inline-block;">(Actual shipped containers)</div>
                                                            </td>
                                                            <td style="text-align: right;">{{shippingPerformanceData.total40DC | number:0}}</td>
                                                            <td>
                                                                Late Container(s)
                                                                <div class="note" style="display: inline-block;">(Actual shipped containers)</div>
                                                            </td>
                                                            <td style="text-align: right;">{{shippingPerformanceData.totalLateContainer}}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                20DC
                                                                <div class="note" style="display: inline-block;">(Actual shipped containers)</div>
                                                            </td>
                                                            <td style="text-align: right;">{{shippingPerformanceData.total20DC | number:0}}</td>
                                                            <td>
                                                                To Be Shipped
                                                                <div class="note" style="display: inline-block;">(Based on load ability for 40HC container)</div>
                                                            </td>
                                                            <td style="text-align: right;">{{shippingPerformanceData.totalToBeShipped | number:2}}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                Unknow Container Type
                                                                <div class="note" style="display: inline-block;">(Actual shipped containers)</div>
                                                            </td>
                                                            <td style="text-align: right;">{{shippingPerformanceData.totalUnknowContainerType | number:0}}</td>
                                                            <td></td>
                                                            <td style="text-align: right;"></td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </section>
                                        </div>
                                    </fieldset>
                                </div>
                            </section>
                            <section>
                                <div avs-scroll grid-handler="gridHandler" class="tilsoft-table-wrapper">
                                    <div class="tilsoft-table">
                                        <div class="tilsoft-table-header" style="width: 900px;">
                                            <div style="width: 50px; height: 30px;">#</div>
                                            <div style="width:100px; height: 30px;">P/I</div>
                                            <div style="width:100px; height: 30px;">Agreed LDS</div>
                                            <div style="width:150px; height: 30px;">Loading Plan/Report</div>
                                            <div style="width:120px; height: 30px;">Container</div>
                                            <div style="width:80px; height: 30px;">Type</div>
                                            <div style="width:150px; height: 30px;">Loading Date</div>
                                            <div style="width:100px; height: 30px;">ETD</div>
                                            <div style="width:100px; height: 30px;">ETA</div>
                                            <div style="width:100px; height: 30px;">Diff</div>
                                            <div style="height: 30px;">&nbsp;</div>
                                        </div>
                                        <div class="tilsoft-table-body" style="width: 900px; margin-top: 30px; height: auto; max-height: 400px;">
                                            <table>
                                                <tr ng-repeat="item in shippingPerformanceData.shippingPerformanceDTOs" style="{{item.overDue < 0 ? 'background-color: #fbe3b2;' : ''}}">
                                                    <td style="width: 50px; text-align: right;">{{$index+1}}</td>
                                                    <td style="width: 100px; text-align: center;">
                                                        <a target="_blank" href="@saleOrderViewUrl/{{item.saleOrderID}}/{{item.offerID}}">{{item.proformaInvoiceNo}}</a>
                                                        <a target="_blank" href="@relationshipViewUrl?id={{item.saleOrderID}}&t=s" class="btn btn-default btn-xs" title="Relationship Map"><i class="fa fa-sitemap"></i></a>
                                                    </td>
                                                    <td style="width: 100px; text-align: center;">{{item.lds}}</td>
                                                    <td style="width: 150px; text-align: center;"><a target="_blank" href="@loadingPlanViewUrl/{{item.loadingPlanID}}">{{item.loadingPlanUD}}</a></td>
                                                    <td style="width: 120px; text-align: center;">{{item.containerNo}}</td>
                                                    <td style="width: 80px; text-align: center;">{{item.containerTypeNM}}</td>
                                                    <td style="width: 150px; text-align: center;">{{item.loadingDate}}</td>
                                                    <td style="width: 100px; text-align: center;">{{item.etd}}</td>
                                                    <td style="width: 100px; text-align: center;">{{item.eta}}</td>
                                                    <td style="width: 100px; text-align: right;">{{item.overDue}}</td>
                                                    <td>&nbsp;</td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>

                                <div style="border: solid 1px #ddd; padding: 10px 0px;">
                                    <div id="chartShippingPerformance"></div>
                                </div>
                            </section>

                            <h2 style="margin-bottom: 5px;">@*PRODUCTS*@PRODUCT DETAIL ({{itemData.itemDTOs.length}})</h2>
                            <section>
                                <div class="smart-form">
                                    <fieldset style="padding: 0px;">
                                        <div class="row">
                                            <section class="col col-3">
                                                <label class="label">Season (Ex.Rate: {{itemData.exRate | number:2}})</label>
                                                <label class="select">
                                                    <select ng-model="itemData.season" ng-options="season.seasonValue as season.seasonText for season in seasons"></select>
                                                    <i></i>
                                                </label>
                                            </section>
                                            <section class="col col-3">
                                                <label class="label">&nbsp;</label>
                                                <a href="javascript:void(0)" class="btn btn-success" style="padding: 6px 12px;" ng-click="event.getCISItem()">Refresh</a>
                                            </section>
                                        </div>
                                    </fieldset>
                                </div>
                            </section>
                            <section>
                                <div class="smart-form">
                                    <div avs-scrollable-table @*grid-handler="gridHandler"*@ class="tilsoft-table-wrapper">
                                        <div class="tilsoft-table">
                                            <div class="tilsoft-table-header" style="width: 1635px;">
                                                <div style="width:50px; height: 75px;">#<br />{{itemData.itemDTOs.length}}</div>
                                                <div style="width:100px; height: 75px;">IMAGE</div>
                                                <div style="width:120px; height: 75px;">ART.CODE</div>
                                                <div style="width:250px; height: 75px;">DESCRIPTION</div>
                                                <div style="width:80px; height: 75px;">QNT</div>
                                                <div style="width:80px; height: 75px;">QNT / 40HC</div>
                                                <div style="width:80px; height: 75px;">SHIPPED QNT</div>
                                                <div style="width:80px; height: 75px;">SHIPPED QNT/40HC</div>
                                                <div style="width:80px; height: 75px;">TB SHIPPED QNT</div>
                                                <div style="width:80px; height: 75px;">TB SHIPPED QNT/40HC</div>
                                                <div style="width:80px; height: 75px;">PRICE (USD)</div>
                                                <div style="width:90px; height: 75px;">AMOUNT (USD)</div>
                                                <div style="width:80px; height: 75px;">PRICE (EUR)</div>
                                                <div style="width:90px; height: 75px;">AMOUNT (EUR)</div>
                                                <div style="height: 75px; width: 105px">CONVERTED (USD) <i class="fa fa-exchange"></i> (EUR)</div>
                                                <div style="width:90px; height: 75px;" ng-if="false">FOB in USD (Company)</div>
                                                <div style="width:90px; height: 75px;" ng-if="false">FOB in EUR (Company)</div>
                                                <div style="border-bottom: none; height: 75px"></div>
                                            </div>
                                            <div class="tilsoft-table-totalrow" style="width: 1635px; margin-top: 75px;">
                                                <div style="width:520px;">TOTAL (items with price = 0 are not included)</div>
                                                <div style="width:80px;">{{itemDataSummary.totalOrderQnt | number:0}}</div>
                                                <div style="width:80px;">{{itemDataSummary.totalOrderQnt40HC | number:2}}</div>
                                                <div style="width:80px;">{{itemDataSummary.totalShippedQnt | number:0}}</div>
                                                <div style="width:80px;">{{itemDataSummary.totalShippedQnt40HC | number:2}}</div>
                                                <div style="width:80px;">{{itemDataSummary.totalToBeShippedQnt | number:0}}</div>
                                                <div style="width:80px;">{{itemDataSummary.totalToBeShippedQnt40HC | number:2}}</div>
                                                <div style="width:80px;"></div>
                                                <div style="width:90px;">{{itemDataSummary.totalAmountUSD | currency:'$':2}}</div>
                                                <div style="width:80px;"></div>
                                                <div style="width:90px;">{{itemDataSummary.totalAmountEUR | currency:'&euro;':2}}</div>
                                                <div style="width: 105px">{{itemDataSummary.totalAmountConvertToEUR | currency:'&euro;':2}}</div>
                                                <div style="width:90px;" ng-if="false">{{method.getTotalShippedPrice_USD() | currency:'$':2}}</div>
                                                <div style="width:90px;" ng-if="false">{{method.getTotalShippedPrice_EUR(itemData.exRate) | currency:'&euro;':2}}</div>
                                                <div style="border-bottom: none"></div>
                                            </div>
                                            <div class="tilsoft-table-body" style="width: 1635px; margin-top: 105px; height: auto; max-height: 400px;">
                                                <table>
                                                    <tr ng-repeat="item in itemData.itemDTOs | orderBy: 'articleCode'" style="{{(!item.unitPriceUSD && !item.unitPriceEUR) ? 'background-color: #fbe3b2;' : ''}}">
                                                        <td style="width: 50px; text-align: right;">{{$index+1}}</td>
                                                        <td style="width:100px;text-align: center;">
                                                            <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                <img style="width: 95%" ng-src="{{item.thumbnailLocation}}" />
                                                            </a>
                                                        </td>
                                                        <td style="width: 120px; text-align: center;"><a href="javascript:void(0)" ng-click="event.getPIByArticleCode(item)">{{item.articleCode}}</a></td>
                                                        <td style="width: 250px; text-align: left;">{{item.description}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.totalOrderQnt | number:0}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.totalOrderQnt40HC | number:2}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.totalShippedQnt | number:0}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.totalShippedQnt40HC | number:2}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.totalToBeShippedQnt | number:0}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.totalToBeShippedQnt40HC | number:2}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.unitPriceUSD | currency:'$':2}}</td>
                                                        <td style="width: 90px; text-align: right;">{{item.totalAmountUSD | currency:'$':2}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.unitPriceEUR | currency:'&euro;':2}}</td>
                                                        <td style="width: 90px; text-align: right;">{{item.totalAmountEUR | currency:'&euro;':2}}</td>
                                                        <td style="text-align: right; width: 105px">{{item.totalAmountConvertToEUR | currency:'&euro;':2}}</td>
                                                        <td style="text-align: right; width: 90px;" ng-if="false">{{item.totalShippedPrice | currency:'$':2}}</td>
                                                        <td style="text-align: right; width: 90px;" ng-if="false">{{method.getShippedPrice_EUR(item.totalShippedPrice, itemData.exRate) | currency:'&euro;':2}}</td>
                                                        <td style="border-bottom: none"></td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <h2 style="margin-bottom: 5px;">PRODUCT SUMMARY ({{modelData.modelDTOs.length}})</h2>
                            <section>
                                <div class="smart-form">
                                    <fieldset style="padding: 0px;">
                                        <div class="row">
                                            <section class="col col-3">
                                                <label class="label">Season (Ex.Rate: {{modelData.exRate | number:2}})</label>
                                                <label class="select">
                                                    <select ng-model="modelData.season" ng-options="season.seasonValue as season.seasonText for season in seasons"></select>
                                                    <i></i>
                                                </label>
                                            </section>
                                            <section class="col col-3">
                                                <label class="label">&nbsp;</label>
                                                <a href="javascript:void(0)" class="btn btn-success" style="padding: 6px 12px;" ng-click="event.getCISModel()">Refresh</a>
                                            </section>
                                        </div>
                                    </fieldset>
                                </div>
                            </section>
                            <section>
                                <div class="smart-form">
                                    <div avs-scrollable-table class="tilsoft-table-wrapper">
                                        <div class="tilsoft-table">
                                            <div class="tilsoft-table-header" style="width: 1635px;">
                                                <div style="width:50px; height: 75px;">#<br />{{modelData.modelDTOs.length}}</div>
                                                <div style="width:100px; height: 75px;">IMAGE</div>
                                                <div style="width:120px; height: 75px;">CODE</div>
                                                <div style="width:250px; height: 75px;">NAME</div>
                                                <div style="width:80px; height: 75px;">QNT</div>
                                                <div style="width:80px; height: 75px;">QNT / 40HC</div>
                                                <div style="width:80px; height: 75px;">SHIPPED QNT</div>
                                                <div style="width:80px; height: 75px;">SHIPPED QNT/40HC</div>
                                                <div style="width:80px; height: 75px;">TB SHIPPED QNT</div>
                                                <div style="width:80px; height: 75px;">TB SHIPPED QNT/40HC</div>
                                                <div style="width:80px; height: 75px;">PRICE (USD)</div>
                                                <div style="width:90px; height: 75px;">AMOUNT (USD)</div>
                                                <div style="width:80px; height: 75px;">PRICE (EUR)</div>
                                                <div style="width:90px; height: 75px;">AMOUNT (EUR)</div>
                                                <div style="height: 75px; width: 105px">CONVERTED (USD) <i class="fa fa-exchange"></i> (EUR)</div>
                                                <div style="width:90px; height: 75px;">FOB in USD (Company)</div>
                                                <div style="width:90px; height: 75px;">FOB in EUR (Company)</div>
                                                <div style="border-bottom: none; height: 75px"></div>
                                            </div>
                                            <div class="tilsoft-table-totalrow" style="width: 1635px; margin-top: 75px;">
                                                <div style="width:520px;">TOTAL (items with price = 0 are not included)</div>
                                                <div style="width:80px;">{{modelDataSummary.totalOrdered | number:0}}</div>
                                                <div style="width:80px;">{{modelDataSummary.totalOrderQnt40HC | number:2}}</div>
                                                <div style="width:80px;">{{modelDataSummary.totalShipped | number:0}}</div>
                                                <div style="width:80px;">{{modelDataSummary.totalShippedQnt40HC | number:2}}</div>
                                                <div style="width:80px;">{{modelDataSummary.totalToBeShippedQnt | number:0}}</div>
                                                <div style="width:80px;">{{modelDataSummary.totalToBeShippedQnt40HC | number:2}}</div>
                                                <div style="width:80px;"></div>
                                                <div style="width:90px;">{{modelDataSummary.totalAmountUSD | currency:'$':2}}</div>
                                                <div style="width:80px;"></div>
                                                <div style="width:90px;">{{modelDataSummary.totalAmountEUR | currency:'&euro;':2}}</div>
                                                <div style="width: 105px">{{modelDataSummary.totalConvertToEUR | currency:'&euro;':2}}</div>
                                                <div style="width:90px;">{{method.getTotalShippedPrice_USD_Model() | currency:'$':2}}</div>
                                                <div style="width:90px;">{{method.getTotalShippedPrice_EUR_Model(modelData.exRate) | currency:'&euro;':2}}</div>
                                                <div style="border-bottom: none"></div>
                                            </div>
                                            <div class="tilsoft-table-body" style="width: 1635px; margin-top: 105px; height: auto; max-height: 400px;">
                                                <table>
                                                    <tr ng-repeat="item in modelData.modelDTOs | orderBy: 'modelUD'">
                                                        <td style="width: 50px; text-align: right;">{{$index+1}}</td>
                                                        <td style="width:100px;text-align: center;">
                                                            <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                <img style="width: 95%" ng-src="{{item.thumbnailLocation}}" />
                                                            </a>
                                                        </td>
                                                        <td style="width: 120px; text-align: center;">{{item.modelUD}}</td>
                                                        <td style="width: 250px; text-align: left;">{{item.modelNM}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.totalOrdered | number:0}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.totalOrderQnt40HC | number:2}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.totalShipped | number:0}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.totalShippedQnt40HC | number:2}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.totalOrdered - item.totalShipped | number:0}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.totalOrderQnt40HC - item.totalShippedQnt40HC | number:2}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.totalUnitPriceUSD | currency:'$':2}}</td>
                                                        <td style="width: 90px; text-align: right;">{{item.totalAmountUSD | currency:'$':2}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.totalUnitPriceEUR | currency:'&euro;':2}}</td>
                                                        <td style="width: 90px; text-align: right;">{{item.totalAmountEUR | currency:'&euro;':2}}</td>
                                                        <td style="text-align: right; width: 105px">{{item.totalConvertToEUR | currency:'&euro;':2}}</td>
                                                        <td style="text-align: right; width: 90px;">{{item.totalShippedPrice | currency:'$':2}}</td>
                                                        <td style="text-align: right; width: 90px;">{{method.getShippedPrice_EUR_Model(item.totalShippedPrice, itemData.exRate) | currency:'&euro;':2}}</td>
                                                        <td style="border-bottom: none"></td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <h2 style="margin-bottom: 5px;">PRICE COMPARISON ({{priceComparisonData.priceComparisonDTOs.length}})</h2>
                            <section>
                                <div class="smart-form">
                                    <fieldset style="padding: 0px;">
                                        <div class="row">
                                            <section class="col col-3">
                                                <label class="label">Season (Ex.Rate: {{priceComparisonData.exRate | number:2}})</label>
                                                <label class="select">
                                                    <select ng-model="priceComparisonData.season" ng-options="season.seasonValue as season.seasonText for season in seasons"></select>
                                                    <i></i>
                                                </label>
                                            </section>
                                            <section class="col col-3">
                                                <label class="label">Season to compare (Ex.Rate: {{priceComparisonData.exRateToCompare | number:2}})</label>
                                                <label class="select">
                                                    <select ng-model="priceComparisonData.seasonToCompare" ng-options="season.seasonValue as season.seasonText for season in seasons"></select>
                                                    <i></i>
                                                </label>
                                            </section>
                                            <section class="col col-3">
                                                <label class="label">&nbsp;</label>
                                                <a href="javascript:void(0)" class="btn btn-success" style="padding: 6px 12px;" ng-click="event.getCISPriceComparison()">Refresh</a>
                                            </section>
                                        </div>
                                    </fieldset>
                                </div>
                            </section>
                            <section>
                                <div avs-scroll grid-handler="gridHandler" class="tilsoft-table-wrapper">
                                    <div class="tilsoft-table">
                                        <div class="tilsoft-table-header" style="width: 1535px;">
                                            <div style="width:50px; height: 75px;">#<br />{{priceComparisonData.priceComparisonDTOs.length}}</div>
                                            <div style="width:100px; height: 75px;">IMAGE</div>
                                            <div style="width:120px; height: 75px;">ART.CODE</div>
                                            <div style="width:250px; height: 75px;">DESCRIPTION</div>
                                            <div style="width:95px; height: 75px;">ORDER QNT {{priceComparisonData.season}}</div>
                                            <div style="width:95px; height: 75px;">ORDER QNT {{priceComparisonData.seasonToCompare}}</div>
                                            <div style="width:95px; height: 75px;">AMOUNT (EUR) {{priceComparisonData.season}}</div>
                                            <div style="width:95px; height: 75px;">AMOUNT (EUR) {{priceComparisonData.seasonToCompare}}</div>
                                            <div style="width:80px; height: 75px;">PRICE (USD) {{priceComparisonData.season}}</div>
                                            <div style="width:80px; height: 75px;">PRICE (USD) {{priceComparisonData.seasonToCompare}}</div>
                                            <div style="width:80px; height: 75px;">PRICE (EUR) {{priceComparisonData.season}}</div>
                                            <div style="width:80px; height: 75px;">PRICE (EUR) {{priceComparisonData.seasonToCompare}}</div>
                                            <div style="width:75px; height: 75px;">DELTA % QNT</div>
                                            <div style="width:75px; height: 75px;">DELTA % AMOUNT (EUR)</div>
                                            <div style="width:75px; height: 75px;">DELTA % PRICE (USD)</div>
                                            <div style="width:75px; height: 75px;">DELTA % PRICE (EUR)</div>
                                            <div style="height: 75px;">&nbsp;</div>
                                        </div>
                                        <div class="tilsoft-table-body" style="width: 1535px; margin-top: 75px; height: auto; max-height: 400px;">
                                            <table>
                                                <tr ng-repeat="item in priceComparisonData.priceComparisonDTOs | orderBy: 'articleCode'">
                                                    <td style="width: 50px; text-align: right;">{{$index+1}}</td>
                                                    <td style="width:100px;text-align: center;">
                                                        <a href="{{item.fileLocation}}" data-featherlight="image">
                                                            <img style="width: 95%" ng-src="{{item.thumbnailLocation}}" />
                                                        </a>
                                                    </td>
                                                    <td style="width: 120px; text-align: center;">{{item.articleCode}}</td>
                                                    <td style="width: 250px; text-align: left;">{{item.description}}</td>
                                                    <td style="width: 95px; text-align: right;">{{item.totalOrderQnt | number:0}}</td>
                                                    <td style="width: 95px; text-align: right;">{{item.compareToTotalOrderQnt | number:0}}</td>
                                                    <td style="width: 95px; text-align: right;">{{item.totalAmountConvertToEUR | currency:'&euro;':2}}</td>
                                                    <td style="width: 95px; text-align: right;">{{item.compareToTotalAmountConvertToEUR | currency:'&euro;':2}}</td>
                                                    <td style="width: 80px; text-align: right;">{{item.unitPriceUSD | currency:'$':2}}</td>
                                                    <td style="width: 80px; text-align: right;">{{item.compareToUnitPriceUSD | currency:'$':2}}</td>
                                                    <td style="width: 80px; text-align: right;">{{item.unitPriceEUR | currency:'&euro;':2}}</td>
                                                    <td style="width: 80px; text-align: right;">{{item.compareToUnitPriceEUR | currency:'&euro;':2}}</td>
                                                    <td style="width: 75px; text-align: right; {{(item.totalOrderQnt - item.compareToTotalOrderQnt < 0) ? 'color: #ff0000;' : ''}}">{{item.compareToTotalOrderQnt ? ((item.totalOrderQnt - item.compareToTotalOrderQnt)*100/item.compareToTotalOrderQnt).toFixed(2) + ' %' : null}}</td>
                                                    <td style="width: 75px; text-align: right; {{(item.totalAmountConvertToEUR - item.compareToTotalAmountConvertToEUR < 0) ? 'color: #ff0000;' : ''}}">{{item.compareToTotalAmountConvertToEUR ? ((item.totalAmountConvertToEUR - item.compareToTotalAmountConvertToEUR)*100/item.compareToTotalAmountConvertToEUR).toFixed(2) + ' %' : null}}</td>
                                                    <td style="width: 75px; text-align: right; {{(item.unitPriceUSD - item.compareToUnitPriceUSD < 0) ? 'color: #ff0000;' : ''}}">{{item.compareToUnitPriceUSD ? ((item.unitPriceUSD - item.compareToUnitPriceUSD)*100/item.compareToUnitPriceUSD).toFixed(2) + ' %' : null}}</td>
                                                    <td style="width: 75px; text-align: right; {{(item.unitPriceEUR - item.compareToUnitPriceEUR < 0) ? 'color: #ff0000;' : ''}}">{{item.compareToUnitPriceEUR ? ((item.unitPriceEUR - item.compareToUnitPriceEUR)*100/item.unitPriceEUR).toFixed(2) + ' %' : null}}</td>
                                                    <td style="text-align: right;">&nbsp;</td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>

                            </section>
                        </div>

                        <!-- Offer-->
                        <div class="tab-pane" id="offertab">
                            <div class="row">
                                <div class="col-sm-12 m-bottom-15">
                                    <div avs-scroll grid-handler="gridHandler" class="tilsoft-table-wrapper">
                                        <div class="tilsoft-table">
                                            <div class="tilsoft-table-header" style="width: 1000px;">
                                                <div style="width:70px; font-size: 12px;"></div>
                                                <div style="width:80px; font-size: 12px;">SEASON</div>
                                                <div style="width:250px; font-size: 12px;">OFFER</div>
                                                <div style="width:60px; font-size: 12px;">CUR.</div>
                                                <div style="width:80px; font-size: 12px;">VALID UNTIL</div>
                                                <div style="font-size: 12px;">TERMS & CONDITIONS</div>
                                            </div>
                                            <div class="tilsoft-table-body" style="width: 1000px; height: auto; max-height: 450px;">
                                                <table>
                                                    <tr ng-repeat="item in offers">
                                                        <td style="width:69px;text-align: center;">
                                                            <a class="btn btn-default btn-xs font-11" href="javascript:void(0)" title="Overview" style="margin-bottom:2px" ng-click="viewDetailForm.load('OFFER',item)"><i class="fa fa-list-ul"></i> View</a>
                                                        </td>
                                                        <td style="text-align:center;width:80px">{{item.season}}</td>
                                                        <td style="width:250px;">
                                                            <a target="_blank" href="@offerEditUrl/{{item.offerID}}?clientID={{item.clientID}}&season={{item.season}}&currency={{item.currency}}">{{item.offerUD}}</a>
                                                            <a target="_blank" href="@relationshipViewUrl?id={{item.offerID}}" class="btn btn-default btn-xs" title="Relationship Map"><i class="fa fa-sitemap"></i></a>
                                                            <div class="note">
                                                                <strong>Date</strong>: {{item.offerDate}}
                                                                <br />
                                                                <strong>Ver</strong>: {{item.offerVersion}}
                                                                <br />
                                                                Updated By
                                                                <a ng-show="(item.updatedBy!=null && item.updatorName!=null)" href="@Url.Action("Detail", "EmployeeMng", new { id = UrlParameter.Optional })/{{item.updatedBy}}" da data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600">
                                                                    {{item.updatorName}}
                                                                </a>
                                                                on
                                                                {{item.updatedDate}}
                                                            </div>
                                                        </td>
                                                        <td style="width:60px">{{item.currency}}</td>
                                                        <td style="width:80px">{{item.validUntil}}</td>
                                                        <td>
                                                            <strong>Payment Term</strong>: {{item.paymentTermNM}}
                                                            <br />
                                                            <strong>Delivery Term</strong>: {{item.deliveryTermNM}}
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Offer margin -->
                        <div class="tab-pane" id="offermargintab">
                            <div class="row">
                                <div class="col-sm-12 m-bottom-15">
                                    <div class="smart-form">
                                        <fieldset style="padding: 0px;">
                                            <div class="row">
                                                <section class="col col-3">
                                                    <label class="label">Season (Ex.Rate: {{offersmargin.exRate | number:2}})</label>
                                                    <label class="select">
                                                        <select ng-model="offersmargin.season" ng-options="season.seasonValue as season.seasonText for season in seasons"></select>
                                                        <i></i>
                                                    </label>
                                                </section>
                                                <section class="col col-6">
                                                    <label class="label">&nbsp;</label>
                                                    <a href="javascript:void(0)" class="btn btn-default" style="padding: 6px 12px;" ng-click="event.getOfferMarginData()">Refresh</a>
                                                    <a href="javascript:void(0)" class="btn btn-default" style="padding: 6px 12px;" ng-click="updateOfferPotentialStatus(true)">Mark selected offer as potential</a>
                                                    <a href="javascript:void(0)" class="btn btn-default" style="padding: 6px 12px;" ng-click="updateOfferPotentialStatus(false)">Mark selected offer as not potential</a>
                                                    <a href="javascript:void(0)" class="btn btn-default" style="padding: 6px 12px; display:none">Export to Excel</a>
                                                </section>
                                            </div>
                                        </fieldset>
                                    </div>
                                    <style>
                                        #offermargintab .tilsoft-table-header div {
                                            height: 75px !important;
                                        }
                                    </style>
                                    <div avs-scroll grid-handler="nullHandler" class="tilsoft-table-wrapper">
                                        <div class="tilsoft-table">
                                            <div class="tilsoft-table-header">
                                                <div style="width: 100px;"></div>
                                                <div style="width: 85px;">OFFER NO</div>
                                                <div style="width: 70px;">SEASON</div>
                                                <div style="width: 50px;">TOTAL ITEM</div>
                                                <div style="width: 50px;">QNT</div>
                                                <div style="width: 70px;">QNT/40HC</div>
                                                <div style="width: 80px;">SALE PRICE (USD)</div>
                                                <div style="width: 80px;">SALE PRICE (EUR)</div>
                                                <div style="width: 80px;">SALE PRICE (EUR to USD)</div>
                                                <div style="width: 80px;">FACTORY PRICE</div>
                                                <div style="width: 60px;">
                                                    % DELTA (5)
                                                    <button style="height:40px; width:40px" class="btn btn-link" title="Sort" ng-click="event.orderPercentMargin()"><i class="fa fa-fw fa-sort"></i></button>
                                                </div>
                                                <div style="width: 95px;">DELTA (5)</div>
                                                <div style="width: 60px;">% SINGLE DELTA</div>
                                                <div style="width: 95px;">SINGLE DELTA</div>
                                                <div style="width: 100px;">SALE AMOUNT</div>
                                                <div style="width: 100px;">FACTORY AMOUNT</div>
                                                <div style="width: 80px;">SALE PRICE ({{method.getPrevSeasonOfferMargin(offersmargin.season)}})</div>
                                                <div style="width: 80px;">FACTORY PRICE ({{method.getPrevSeasonOfferMargin(offersmargin.season)}})</div>
                                                <div style="width: 85px;">TRANS COST</div>
                                                <div style="width: 85px;">LC COST</div>
                                                <div style="width: 85px;">INTEREST</div>
                                                <div style="width: 85px;">COMM</div>
                                                <div style="width: 85px;">DAMAGE</div>

                                                <div>&nbsp;</div>
                                            </div>
                                            <div class="tilsoft-table-totalrow">
                                                <div>TOTAL</div>
                                                <div></div>
                                                <div></div>
                                                <div></div>
                                                <div>{{calTotalQuantity(offersmargin.offerMarginDTOs) | number: 0}}</div>
                                                <div>{{calTotalQuantity40HC(offersmargin.offerMarginDTOs) | number: 2}}</div>
                                                <div></div>
                                                <div></div>
                                                <div></div>
                                                <div></div>
                                                <div>{{calTotalPercentMargin(offersmargin.offerMarginDTOs) | number : 1}}%</div>
                                                <div>{{calTotalMargin(offersmargin.offerMarginDTOs) | currency:'$' :2}}</div>
                                                <div></div>
                                                <div></div>
                                                <div>{{calTotalOfferAmount(offersmargin.offerMarginDTOs) | currency:'$' :2}}</div>
                                                <div>{{calTotalFactoryAmount(offersmargin.offerMarginDTOs) | currency:'$' :2}}</div>
                                                <div></div>
                                                <div></div>
                                                <div>{{calTransportationAmountUSD(offersmargin.offerMarginDTOs) | currency:'$' :2}}</div>
                                                <div>{{calLcCostAmountUSD(offersmargin.offerMarginDTOs) | currency:'$' :2}}</div>
                                                <div>{{calInterestAmountUSD(offersmargin.offerMarginDTOs) | currency:'$' :2}}</div>
                                                <div>{{calCommissionAmountUSD(offersmargin.offerMarginDTOs) | currency:'$' :2}}</div>
                                                <div>{{calDamageAmountUSD(offersmargin.offerMarginDTOs) | currency:'$' :2}}</div>

                                                <div>&nbsp;</div>
                                            </div>
                                            <div class="tilsoft-table-body">
                                                <table>
                                                    <tbody ng-repeat="item in offersmargin.offerMarginDTOs">
                                                        <tr>
                                                            <td style="text-align: center;">
                                                                <label style="display: inline;">
                                                                    <input type="checkbox" ng-model="item.isSelected" />
                                                                    &nbsp;&nbsp;
                                                                </label>
                                                                &nbsp;
                                                                <a href="#" class="btn btn-{{item.status === 1 ? 'primary' : 'warning'}} btn-xs font-11" title="View offer detail" ng-click="searchOfferDetail($event,item)"><i id="icon-view-detail-{{item.offerID}}{{item.status}}" class="fa fa-plus-square-o"></i> Detail</a>
                                                            </td>
                                                            <td>
                                                                <strong>
                                                                    @if (Frontend.Helper.AuthHelper.GetActionButtonStatus(ViewBag.Offer, Frontend.Helper.ActionEnum.Update, HttpContext.Current) != "disabled")
                                                                    {
                                                                        <a href="@offerEditUrl/{{item.offerID}}?clientID={{item.clientID}}&season={{offersmargin.season}}&currency={{item.currency}}" target="_blank"><strong>{{item.offerUD}}</strong></a>
                                                                    }
                                                                    else
                                                                    {
                                                                        <a href="@offerEditUrl/{{item.offerID}}?clientID={{item.clientID}}&season={{offersmargin.season}}&currency={{item.currency}}" target="_blank"><strong>{{item.offerUD}}</strong></a>
                                                                    }
                                                                </strong>
                                                                <i class="fa fa-star" style="color: yellowgreen;" ng-if="item.isPotential"></i>
                                                            </td>
                                                            <td style="text-align:center"><strong>{{item.season}}</strong></td>
                                                            <td style="text-align:center"><strong>{{item.totalItem}}/{{calTotalOfferItem(item.offerID)}}</strong></td>
                                                            <td style="text-align:right"><strong>{{item.totalQnt | number:0}}</strong></td>
                                                            <td style="text-align:right"><strong>{{item.totalCont | number:2}}</strong></td>
                                                            <td></td>
                                                            <td></td>
                                                            <td></td>
                                                            <td></td>
                                                            <td ng-if="item.percentMargin!=null && item.percentMargin<0" style="text-align: right; color:red"><strong>{{item.percentMargin | number : 1}}%</strong></td>
                                                            <td ng-if="item.percentMargin!=null && (item.percentMargin>0 || item.percentMargin==null || item.percentMargin==0 || item.percentMargin=='')" style="text-align: right"><strong>{{item.percentMargin | number : 1}}%</strong></td>
                                                            <td ng-if="item.percentMargin==null"></td>
                                                            <td style="text-align:right">
                                                                <strong>{{item.totalMargin | currency:'$' :2}}</strong>
                                                            </td>
                                                            <td style="text-align:right"></td>
                                                            <td style="text-align:right"></td>
                                                            <td style="text-align:right">
                                                                <strong>{{item.totalAmount | currency:'$' :2}}</strong>
                                                            </td>
                                                            <td style="text-align:right"><strong>{{item.totalFactoryAmount | currency:'$' :2}}</strong></td>
                                                            <td></td>
                                                            <td></td>
                                                            <td style="text-align:right"><strong>{{item.transportationAmountUSD | currency:'$' :2}}</strong></td>
                                                            <td style="text-align:right"><strong>{{item.lcCostAmountUSD | currency:'$' :2}}</strong></td>
                                                            <td style="text-align:right"><strong>{{item.interestAmountUSD | currency:'$' :2}}</strong></td>
                                                            <td style="text-align:right"><strong>{{item.commissionAmountUSD | currency:'$' :2}}</strong></td>
                                                            <td style="text-align:right"><strong>{{item.damageAmountUSD | currency:'$' :2}}</strong></td>

                                                            <td>&nbsp;</td>
                                                        </tr>
                                                        <tr style="display:none" class="{{item.offerID}}{{item.status}}" ng-repeat="itemdetail in item.offerMarginDetail">
                                                            <td style="width:100px; text-align: center">
                                                                <a href="{{itemdetail.productFileLocation}}" data-featherlight="image">
                                                                    <img style="width: 95%" ng-src="{{itemdetail.productThumbnailLocation}}" />
                                                                </a>
                                                            </td>
                                                            <td colspan="3">
                                                                @if (Frontend.Helper.AuthHelper.GetActionButtonStatus("EurofarPurchasingPriceMng", Frontend.Helper.ActionEnum.Update, HttpContext.Current) != "disabled")
                                                                {
                                                                    <a href="@PurchasingPriceMngMarginUrl{{itemdetail.articleCode}}&season={{$parent.offersmargin.season}}" target="_blank"><strong>{{itemdetail.articleCode}}</strong></a>
                                                                }
                                                                else
                                                                {
                                                                    <strong>{{itemdetail.articleCode}}</strong>
                                                                }
                                                                <br />
                                                                {{itemdetail.description}}
                                                            </td>
                                                            <td style="text-align:right">{{itemdetail.quantity | number :0}}</td>
                                                            <td style="text-align:right">{{itemdetail.qnt40HC | number :2}}</td>
                                                            <td style="text-align:right"><span ng-if="itemdetail.currency == 'USD'">{{itemdetail.unitPrice | currency:'$' :2}}</span></td>
                                                            <td style="text-align:right"><span ng-if="itemdetail.currency == 'EUR'">{{itemdetail.unitPrice | currency:'€' :2}}</span></td>
                                                            <td style="text-align:right">{{itemdetail.unitPriceToUSD | currency:'$' :2}}</td>
                                                            <td style="text-align:right;">
                                                                <span ng-if="itemdetail.avtPurchasingPriceStatusID === 1">
                                                                    <a style="color: blue;" href="javascript:void(0)" ng-click="event.getPlaningPurchasingPrice(itemdetail)" title="Confirmed Price">{{itemdetail.avtPurchasingPrice | currency:'$':2}}</a>
                                                                </span>

                                                                <span ng-if="itemdetail.avtPurchasingPriceStatusID === 2">
                                                                    <a style="color: green;" href="javascript:void(0)" ng-click="event.getPlaningPurchasingPrice(itemdetail)" title="Configured purchasing price in Model module">{{itemdetail.avtPurchasingPrice | currency:'$':2}}</a>
                                                                </span>

                                                                <span ng-if="itemdetail.avtPurchasingPriceStatusID === 3">
                                                                    <a style="color: orange;" href="javascript:void(0)" ng-click="event.getPlaningPurchasingPrice(itemdetail)" title="Estimated purchasing price manually input in the offer">{{itemdetail.avtPurchasingPrice | currency:'$':2}}</a>
                                                                </span>

                                                                <span ng-if="itemdetail.avtPurchasingPriceStatusID === 8">
                                                                    <a style="color: darkviolet;" href="javascript:void(0)" ng-click="event.getPlaningPurchasingPrice(itemdetail)" title="Estimated purchasing price in the estimated price module">{{itemdetail.avtPurchasingPrice | currency:'$':2}}</a>
                                                                </span>
                                                            </td>
                                                            <td ng-if="itemdetail.percentMargin!= null && itemdetail.percentMargin<0" style="text-align:right; color:red">{{itemdetail.percentMargin | number:1}}%</td>
                                                            <td ng-if="itemdetail.percentMargin!= null && itemdetail.percentMargin>=0 && itemdetail.percentMargin <= 5" style="text-align:right; color:lightseagreen">{{itemdetail.percentMargin | number:1}}%</td>
                                                            <td ng-if="itemdetail.percentMargin!= null && itemdetail.percentMargin > 5 && itemdetail.percentMargin <= 10" style="text-align:right; color:orange">{{itemdetail.percentMargin | number:1}}%</td>
                                                            <td ng-if="itemdetail.percentMargin!= null && itemdetail.percentMargin > 10" style="text-align:right;">{{itemdetail.percentMargin | number:1}}%</td>
                                                            <td ng-if="itemdetail.percentMargin == null || itemdetail.percentMargin == ''" style="text-align:right;"></td>

                                                            <td style="text-align:right">{{itemdetail.totalMargin | currency:'$':2}}</td>
                                                            <td style="text-align:right">{{itemdetail.percentSingleMargin | number:1}}%</td>
                                                            <td style="text-align:right">{{itemdetail.singleMargin | currency:'$':2}}</td>
                                                            <td style="text-align:right">{{itemdetail.offerAmount | currency:'$':2}}</td>
                                                            <td style="text-align:right">{{itemdetail.factoryAmount | currency:'$':2}}</td>
                                                            <td style="text-align:right">{{itemdetail.lastUnitPrice | currency:'$' :2}}</td>
                                                            <td style="text-align:right">{{itemdetail.lastAVTPurchasingPrice | currency:'$' :2}}</td>
                                                            <td style="text-align:right">{{itemdetail.transportationAmountUSD | currency:'$':2}}</td>
                                                            <td style="text-align:right">{{itemdetail.lcCostAmountUSD | currency:'$':2}}</td>
                                                            <td style="text-align:right">{{itemdetail.interestAmountUSD | currency:'$':2}}</td>
                                                            <td style="text-align:right">{{itemdetail.commissionAmountUSD | currency:'$':2}}</td>
                                                            <td style="text-align:right">{{itemdetail.damageAmountUSD | currency:'$':2}}</td>

                                                            <td>&nbsp;</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Proforma Invoice -->
                        <div class="tab-pane" id="pitab">
                            <div class="row">
                                <div class="col-sm-12 m-bottom-15">
                                    <div avs-scroll grid-handler="gridHandler" class="tilsoft-table-wrapper">
                                        <div class="tilsoft-table">
                                            <div class="tilsoft-table-header" style="width: 1000px;">
                                                <div style="width: 70px;font-size: 12px;"></div>
                                                <div style="width:80px;font-size: 12px;">SEASON</div>
                                                <div style="width:300px;font-size: 12px;">Proforma Invoice</div>
                                                <div style="width:50px;font-size: 12px;">VAT</div>
                                                <div style="width:80px;font-size: 12px;">Total Amount</div>
                                                <div style="width:50px;font-size: 12px;">Curre ncy</div>
                                                <div style="width:350px;font-size: 12px;">TERM & CONDITION</div>
                                                <div style="font-size: 12px;">OTHER</div>
                                            </div>
                                            <div class="tilsoft-table-body margin-top" style="width: 1000px;">
                                                <table>
                                                    <tr ng-repeat="item in saleOrders">
                                                        <td style="width:69px;text-align: center;">
                                                            <a class="btn btn-default btn-xs font-11" href="javascript:void(0)" title="Overview" style="margin-bottom:2px" ng-click="viewDetailForm.load('PI',item)"><i class="fa fa-list-ul"></i> View</a>
                                                        </td>
                                                        <td style="text-align:center;width:80px">{{item.season}}</td>
                                                        <td style="width:300px">
                                                            <a target="_blank" href="@saleOrderViewUrl/{{item.saleOrderID}}/0">{{item.proformaInvoiceNo}}</a>
                                                            <a target="_blank" href="@relationshipViewUrl?id={{item.saleOrderID}}&t=s" class="btn btn-default btn-xs" title="Relationship Map"><i class="fa fa-sitemap"></i></a>
                                                            <div class="note">
                                                                <strong>Invoice Date</strong>: {{item.invoiceDate}}
                                                                <br />
                                                                <strong>Order Type</strong>: {{item.orderType}}
                                                                <br />
                                                                <strong>Status</strong>: {{item.trackingStatusNM}}
                                                                <br />
                                                                <span ng-show="item.ispiReceived">
                                                                    <strong>Received By</strong>: {{item.piReceivedBy}} on {{item.piReceivedDate}}
                                                                </span>
                                                                <br />
                                                                <strong>LDS</strong>: {{item.lds}}
                                                                <br /><br />
                                                                Created By
                                                                <a ng-show="(item.createdBy!=null && item.creatorName!=null)" href="@Url.Action("Detail", "EmployeeMng", new { id = UrlParameter.Optional })/{{item.createdBy}}" da data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600">
                                                                    {{item.creatorName}}
                                                                </a>
                                                                on
                                                                {{item.createdDate}}
                                                                <br />
                                                                Updated By
                                                                <a ng-show="(item.updatedBy!=null && item.updatorName!=null)" href="@Url.Action("Detail", "EmployeeMng", new { id = UrlParameter.Optional })/{{item.updatedBy}}" da data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600">
                                                                    {{item.updatorName}}
                                                                </a>
                                                                on
                                                                {{item.updatedDate}}
                                                            </div>
                                                        </td>
                                                        <td style="width:50px;text-align:center">{{item.vatPercent}}%</td>
                                                        <td style="width:80px;text-align:right">{{item.totalOrderAmount | number : 2}}</td>
                                                        <td style="width:50px;text-align:center">{{item.currency}}</td>
                                                        <td style="width:350px">
                                                            <strong>Payment Term:</strong>{{item.paymentTermNM}}
                                                            <br />
                                                            <strong>Payment Status:</strong>{{item.paymentStatusNM }}
                                                            <strong ng-if="item.paymentDate"><br />Payment Date:</strong>{{item.paymentDate}}
                                                            <strong ng-if="item.paymentRemark"><br />Payment Remark:</strong>{{item.paymentRemark}}
                                                            <br />
                                                            <strong>Condition</strong>: {{item.conditions }}
                                                            <br />
                                                            <strong>Delivery Term</strong>: {{item.deliveryTermNM }}
                                                            <br />
                                                            <strong>Delivery Date</strong>: {{item.deliveryDate }}
                                                        </td>
                                                        <td>
                                                            <strong>Reference</strong>: {{item.reference}}
                                                            <br />
                                                            <strong>Client Order Number</strong>: {{item.clientOrderNumber}}
                                                            <br />
                                                            <strong>Signed PI File:</strong><a href="{{item.signedPIFileURL}}" target="_blank">{{item.signedPIFileFriendlyName}}</a>
                                                            <br />
                                                            <strong>Client's PO File:</strong><a href="{{item.clientPOFileURL}}" target="_blank">{{item.clientPOFriendlyName}}</a>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- LOADING PLAN -->
                        <div class="tab-pane" id="loadingplantab">
                            <div class="row">
                                <div class="col-sm-12 m-bottom-15">
                                    <div avs-scroll grid-handler="gridHandler" class="tilsoft-table-wrapper">
                                        <div class="tilsoft-table">
                                            <div class="tilsoft-table-header" style="width: 1080px;">
                                                <div style="width:80px;">SEASON</div>
                                                <div style="width:180px;">LOADING PLAN / REPORT</div>
                                                <div style="width:100px;">FACTORY</div>
                                                <div style="width:80px;">SHIPPED DATE</div>
                                                <div style="width:120px;">CONTAINER NO</div>
                                                <div style="width:60px;">TYPE</div>
                                                <div style="width:100px;">SEAL NO</div>
                                                <div style="width:100px;">B/L</div>
                                                <div style="width:80px;">ETD</div>
                                                <div style="width:80px;">ETA</div>
                                                <div style="width:80px;">CUT OFF</div>
                                                <div>&nbsp;</div>
                                            </div>
                                            <div class="tilsoft-table-body" style="width: 1080px; height:auto; max-height: 400px;">
                                                <table>
                                                    <tr ng-repeat="item in loadingPlanDTOs">
                                                        <td style="width: 80px; text-align: center;">{{item.season}}</td>
                                                        <td style="width: 180px; text-align: center;"><a href="@loadingPlanViewUrl/{{item.loadingPlanID}}" target="_blank">{{item.loadingPlanUD}}</a></td>
                                                        <td style="width: 100px; text-align: center;">{{item.factoryUD}}</td>
                                                        <td style="width: 80px; text-align: center;">{{item.shippedDate}}</td>
                                                        <td style="width: 120px; text-align: center;">{{item.containerNo}}</td>
                                                        <td style="width: 60px; text-align: center;">{{item.containerTypeNM}}</td>
                                                        <td style="width: 100px; text-align: center;">{{item.sealNo}}</td>
                                                        <td style="width: 100px; text-align: center;">{{item.blNo}}</td>
                                                        <td style="width: 80px; text-align: center;">{{item.etd}}</td>
                                                        <td style="width: 80px; text-align: center;">{{item.eta}}</td>
                                                        <td style="width: 80px; text-align: center;">{{item.cutOff}}</td>
                                                        <td>&nbsp;</td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Commercial Invoice -->
                        <div class="tab-pane" id="citab">
                            <div class="row">
                                <div class="col-sm-12 m-bottom-15">
                                    <div avs-scroll grid-handler="gridHandler" class="tilsoft-table-wrapper">
                                        <div class="tilsoft-table">
                                            <div class="tilsoft-table-header" style="width: 1100px;">
                                                <div style="width:70px; font-size: 12px;"></div>
                                                <div style="width:80px; font-size: 12px;">Season</div>
                                                <div style="width:300px; font-size: 12px;">INVOICE</div>

                                                <div style="width:50px; font-size: 12px;">VAT</div>
                                                <div style="width:80px;  font-size: 12px;">NET AMOUNT</div>
                                                <div style="width:80px; font-size: 12px;">VAT AMOUNT</div>
                                                <div style="width:80px; font-size: 12px;">TOTAL AMOUNT</div>
                                                <div style="width:60px; font-size: 12px;">CURRE NCY</div>

                                                <div font-size: 12px;">TERM & CONDITIONS</div>
                                            </div>
                                            <div class="tilsoft-table-body margin-top" style="width: 1100px;">
                                                <table>
                                                    <tr ng-repeat="item in commercialInvoices">
                                                        <td style="width:69px;text-align: center;">
                                                            @if (Frontend.Helper.AuthHelper.GetActionButtonStatus(ViewBag.ECommercialInvoice, Frontend.Helper.ActionEnum.Update, HttpContext.Current) != "disabled")
                                                            {
                                                                <a href="@Url.Action("Edit", "ECommercialInvoice")/{{item.eCommercialInvoiceID}}" class="btn btn-primary btn-xs font-11" target="_blank" style="margin-bottom:2px"><i class="fa fa-pencil"></i>&nbsp;&nbsp;&nbsp;Edit</a>
                                                            }
                                                            <a class="btn btn-default btn-xs font-11" href="javascript:void(0)" title="Overview" style="margin-bottom:2px" ng-click="viewDetailForm.load('CI',item)"><i class="fa fa-list-ul"></i> View</a>
                                                        </td>
                                                        <td style="text-align:center;width:80px">{{item.season}}</td>
                                                        <td style="width:300px">
                                                            {{item.invoiceNo}}

                                                            <div class="note">
                                                                <strong>Invoice Date</strong>: {{item.invoiceDate}}
                                                                <br />
                                                                <strong>Type</strong>: {{item.typeOfInvoiceText}}
                                                                <br />
                                                                <strong>Acc No</strong>: {{item.accountNo}}
                                                                <br />
                                                                <strong>Status</strong>: {{item.isConfirmed?'CONFIRMED':'NOT CONFIRMED'}}
                                                                <br /><br />
                                                                Created By
                                                                <a ng-show="(item.createdBy!=null && item.creatorName!=null)" href="@Url.Action("Detail", "EmployeeMng", new { id = UrlParameter.Optional })/{{item.createdBy}}" da data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600">
                                                                    {{item.creatorName}}
                                                                </a>
                                                                on
                                                                {{item.createdDate}}
                                                                <br />
                                                                Updated By
                                                                <a ng-show="(item.updatedBy!=null && item.updatorName!=null)" href="@Url.Action("Detail", "EmployeeMng", new { id = UrlParameter.Optional })/{{item.updatedBy}}" da data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600">
                                                                    {{item.updatorName}}
                                                                </a>
                                                                on
                                                                {{item.updatedDate}}
                                                                <br />
                                                                <span ng-if="item.confirmerName">
                                                                    Confirmed By
                                                                    <a ng-show="(item.confirmedBy!=null && item.confirmerName!=null)" href="@Url.Action("Detail", "EmployeeMng", new { id = UrlParameter.Optional })/{{item.confirmedBy}}" da data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600">
                                                                        {{item.confirmerName}}
                                                                    </a>
                                                                    on
                                                                    {{item.confirmedDate}}
                                                                </span>
                                                            </div>

                                                        </td>


                                                        <td style="width:50px;text-align:center">{{item.vatRate}}%</td>
                                                        <td style="width:80px;text-align:right">{{item.netAmount | number : 2}}</td>
                                                        <td style="width:80px;text-align:right">{{item.vatAmount | number : 2}}</td>
                                                        <td style="width:80px;text-align:right">{{item.totalAmount | number : 2}}</td>
                                                        <td style="width:60px;text-align:center">{{item.currency}}</td>
                                                        <td>
                                                            <strong>Payment Term:</strong>{{item.paymentTerm}}
                                                            <br />
                                                            <strong>Delivery Term</strong>: {{item.deliveryTerm }}
                                                            <br />
                                                            <strong>Condition</strong>: {{item.conditions }}
                                                            <br />
                                                            <strong>Reference</strong>: {{item.refNo }}
                                                            <br />
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- DELTA -->
                        <div class="tab-pane" id="deltatab" ng-if="@userInfo.Data.ModuleSpecialPermissionAccesses.Count(o => o.ModuleSpecialPermissionUD == Frontend.Helper.ConstantIdentifier.SPECIAL_PERMISSION_CLIENTOVERVIEW_CI) > 0">
                            <div class="row">
                                <div class="col-sm-12 m-bottom-15">
                                    <div class="smart-form">
                                        <fieldset style="padding: 0px;">
                                            <div class="row">
                                                <section class="col col-3">
                                                    <label class="label">Season (Ex.Rate: {{delta.exRate | number:2}})</label>
                                                    <label class="select">
                                                        <select ng-model="delta.season" ng-options="season.seasonValue as season.seasonText for season in seasons"></select>
                                                        <i></i>
                                                    </label>
                                                </section>
                                                <section class="col col-6">
                                                    <label class="label">&nbsp;</label>
                                                    <a href="javascript:void(0)" class="btn btn-success" style="padding: 6px 12px;" ng-click="event.getDeltaData()">Refresh</a>
                                                    <a href="javascript:void(0)" class="btn btn-default" style="padding: 6px 12px;" ng-click="event.deltaExportExcel()">Export to Excel</a>
                                                </section>
                                            </div>
                                        </fieldset>
                                    </div>
                                    <div avs-scrollable-table class="tilsoft-table-wrapper">
                                        <div class="tilsoft-table">
                                            <div class="tilsoft-table-header" style="width: 4800px;">
                                                <div style="width: 80px; height: 75px;">P/I</div>
                                                <div style="width: 90px; height: 75px;">P/I Date</div>
                                                <div style="width: 100px; height: 75px;">Image</div>
                                                <div style="width: 120px; height: 75px;">Art.Code</div>
                                                <div style="width: 200px; height: 75px;">Desription</div>
                                                <div style="width: 60px; height: 75px;">Qnt / 40HC</div>
                                                <div style="width: 60px; height: 75px;">Ordered Qnt</div>
                                                <div style="width: 60px; height: 75px;">Ordered Qnt 40HC</div>
                                                <div style="width: 60px; height: 75px;">Order Type</div>
                                                <div style="width: 60px; height: 75px;">Loaded Qnt</div>
                                                <div style="width: 60px; height: 75px;">Loaded Qnt 40HC</div>
                                                <div style="width: 60px; height: 75px;">Shipped Qnt</div>
                                                <div style="width: 60px; height: 75px;">Shipped Qnt 40HC</div>
                                                <div style="width: 60px; height: 75px;">To Be Shipped</div>
                                                <div style="width: 60px; height: 75px;">To Be Shipped 40HC</div>
                                                <div style="width: 60px; height: 75px;">Material</div>
                                                <div style="width: 70px; height: 75px;">Production Status</div>
                                                <div style="width: 90px; height: 75px;">Supplier</div>
                                                <div style="width: 90px; height: 75px;">LDS</div>
                                                <div style="width: 90px; height: 75px;">Price Quote</div>
                                                <div style="width: 80px; height: 75px;">CO</div>
                                                <div style="width: 100px; height: 75px;">Place</div>
                                                <div style="width: 60px; height: 75px;">Quality</div>
                                                <div style="width: 80px; height: 75px;">FOB in USD (Company)</div>
                                                <div style="width: 100px; height: 75px;">Total in USD (Company)</div>
                                                <div style="width: 80px; height: 75px;">Target Price</div>
                                                <div style="width: 80px; height: 75px;">Price Status</div>
                                                <div style="width: 90px; height: 75px;">Price Confirmed Date</div>
                                                <div style="width: 50px; height: 75px;">Remark</div>
                                                <div style="width: 65px; height: 75px;">Currency</div>
                                                <div style="width: 80px; height: 75px;">Sale U.Price (EUR)</div>
                                                <div style="width: 100px; height: 75px;">Sale Amount (EUR)</div>
                                                <div style="width: 80px; height: 75px;">Sale U.Price (USD)</div>
                                                <div style="width: 100px; height: 75px;">Sale Amount (USD)</div>
                                                <div style="width: 100px; height: 75px;">Total Amount (Converted to EUR)</div>
                                                <div style="width: 100px; height: 75px;">Transport for EUR Sales (40HC)</div>
                                                <div style="width: 80px; height: 75px;">Transport Per Unit</div>
                                                <div style="width: 100px; height: 75px;">Total Transport (EUR)</div>
                                                <div style="width: 140px; height: 75px;">FOB Sale Price For EUR Order (Transport excluded)</div>
                                                <div style="width: 80px; height: 75px;">Sales FOB (USD)</div>
                                                <div style="width: 100px; height: 75px;">Total Sale Amount (USD)</div>
                                                <div style="width: 120px; height: 75px;">Gross Margin Before Commission (USD)</div>
                                                <div style="width: 100px; height: 75px;">Gross Margin % Before Commission</div>
                                                <div style="width: 80px; height: 75px;">Commission (%)</div>
                                                <div style="width: 80px; height: 75px;">Commission U.Price (USD)</div>
                                                <div style="width: 80px; height: 75px;">Commission U.Price (EUR)</div>
                                                <div style="width: 130px; height: 75px;">Commission U.Price (Converted to USD)</div>
                                                @*<div style="width: 100px; height: 75px;">Commission Amount (USD)</div>*@

                                                <div style="width: 80px; height: 75px;">Commission Amount (USD)</div>
                                                <div style="width: 80px; height: 75px;">Damages Cost (USD)</div>
                                                <div style="width: 80px; height: 75px;">LC Cost (USD)</div>
                                                <div style="width: 80px; height: 75px;">Interest (USD)</div>
                                                <div style="width: 80px; height: 75px;">Transport (USD)</div>


                                                <div style="width: 100px; height: 75px;">Gross Margin % After COMM, DAM, LC, INT</div>
                                                <div style="width: 120px; height: 75px;">Gross Margin After COMM, DAM, LC, INT (USD)</div>
                                                <div style="height: 75px;">&nbsp;</div>
                                            </div>
                                            <div class="tilsoft-table-totalrow" style="width: 4800px; margin-top: 75px;">
                                                <div style="width: 80px;"></div>
                                                <div style="width: 90px;"></div>
                                                <div style="width: 100px;"></div>
                                                <div style="width: 120px;"></div>
                                                <div style="width: 200px;">TOTAL</div>
                                                <div style="width: 60px;"></div>
                                                <div style="width: 60px;">{{deltaSummary.totalOrderQnt | number:0}}</div>
                                                <div style="width: 60px;">{{deltaSummary.totalOrderQnt40HC | number:2}}</div>
                                                <div style="width: 60px;"></div>
                                                <div style="width: 60px;">{{deltaSummary.totalLoadedQnt | number:0}}</div>
                                                <div style="width: 60px;">{{deltaSummary.totalLoadedQnt40HC | number:2}}</div>
                                                <div style="width: 60px;">{{deltaSummary.totalShippedQnt | number:0}}</div>
                                                <div style="width: 60px;">{{deltaSummary.totalShippedQnt40HC | number:2}}</div>
                                                <div style="width: 60px;">{{deltaSummary.totalToBeShippedQnt | number:0}}</div>
                                                <div style="width: 60px;">{{deltaSummary.totalToBeShippedQnt40HC | number:2}}</div>
                                                <div style="width: 60px;"></div>
                                                <div style="width: 70px;"></div>
                                                <div style="width: 90px;"></div>
                                                <div style="width: 90px;"></div>
                                                <div style="width: 90px;"></div>
                                                <div style="width: 80px;"></div>
                                                <div style="width: 100px;"></div>
                                                <div style="width: 60px;"></div>
                                                <div style="width: 80px;"></div>
                                                <div style="width: 100px;">{{deltaSummary.totalPurchasingAmountUSD | currency:'$':2}}</div>
                                                <div style="width: 80px;"></div>
                                                <div style="width: 80px;"></div>
                                                <div style="width: 90px;"></div>
                                                <div style="width: 50px;"></div>
                                                <div style="width: 65px;"></div>
                                                <div style="width: 80px;"></div>
                                                <div style="width: 100px;">{{deltaSummary.totalSaleAmountEUR | currency:'&euro;':2}}</div>
                                                <div style="width: 80px;"></div>
                                                <div style="width: 100px;">{{deltaSummary.totalSaleAmountUSD | currency:'$':2}}</div>
                                                <div style="width: 100px;">{{deltaSummary.totalSaleAmountConvertToEUR | currency:'&euro;':2}}</div>
                                                <div style="width: 100px;"></div>
                                                <div style="width: 80px;"></div>
                                                <div style="width: 100px;">{{deltaSummary.totalTransportAmountEUR | currency:'&euro;':2}}</div>
                                                <div style="width: 140px;"></div>
                                                <div style="width: 80px;"></div>
                                                <div style="width: 100px;">{{deltaSummary.totalSaleAmountUSDForMargin | currency:'$':2}}</div>
                                                <div style="width: 120px;">{{deltaSummary.totalGrossMarginAmountBeforeComm | currency:'$':2}}</div>
                                                <div style="width: 100px;">{{deltaSummary.totalGrossMarginPercentBeforeComm | number:2}}%</div>
                                                <div style="width: 80px;"></div>
                                                <div style="width: 80px;"></div>
                                                <div style="width: 80px;"></div>
                                                <div style="width: 130px;"></div>
                                                @*<div style="width: 100px;">{{deltaSummary.totalCommissionAmount | currency:'$':2}}</div>*@

                                                <div style="width: 80px;">{{deltaSummary.totalCommissionAmountUSD | currency:'$':2}}</div>
                                                <div style="width: 80px;">{{deltaSummary.totalDamagesCostAmount | currency:'$':2}}</div>
                                                <div style="width: 80px;">{{deltaSummary.totalLCCostAmount | currency:'$':2}}</div>
                                                <div style="width: 80px;">{{deltaSummary.totalInterestAmount | currency:'$':2}}</div>
                                                <div style="width: 80px;">{{deltaSummary.totalTransportAmount | currency:'$':2}}</div>

                                                <div style="width: 100px;">{{deltaSummary.totalGrossMarginPercentAfterComm | number:2}}%</div>
                                                <div style="width: 120px;">{{deltaSummary.totalGrossMarginAmountAfterComm | currency:'$':2}}</div>
                                                <div>&nbsp;</div>
                                            </div>
                                            <div id="deltaTable" class="tilsoft-table-body" style="width: 4800px; margin-top: 105px !important;">
                                                <table>
                                                    <tr ng-repeat="item in delta.eurofarPriceOverviewDTOs">
                                                        <td style="width: 80px; text-align: center;">
                                                            <a target="_blank" href="@saleOrderViewUrl/{{item.saleOrderID}}/{{item.offerID}}">{{item.proformaInvoiceNo}}</a>
                                                            <a target="_blank" href="@relationshipViewUrl?id={{item.saleOrderID}}&t=s" class="btn btn-default btn-xs" title="Relationship Map"><i class="fa fa-sitemap"></i></a>
                                                        </td>
                                                        <td style="width: 90px; text-align: center;">{{item.invoiceDate}}</td>
                                                        <td style="width: 100px;">
                                                            <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                <img style="width: 95%" ng-src="{{item.thumbnailLocation}}" />
                                                            </a>
                                                        </td>
                                                        <td style="width: 120px;">{{item.articleCode}}</td>
                                                        <td style="width: 200px;">{{item.description}}</td>
                                                        <td style="width: 60px; text-align: right;">{{item.qnt40HC | number:0}}</td>
                                                        <td style="width: 60px; text-align: right;">{{item.orderQnt | number:0}}</td>
                                                        <td style="width: 60px; text-align: right;">{{item.qnt40HC ? item.orderQnt / item.qnt40HC : 0 | number:2}}</td>
                                                        <td style="width: 60px; text-align: center;">{{item.orderTypeNM}}</td>
                                                        <td style="width: 60px; text-align: right;">{{item.loadedQnt}}</td>
                                                        <td style="width: 60px; text-align: right;">{{item.qnt40HC ? item.loadedQnt / item.qnt40HC : 0 | number:2}}</td>
                                                        <td style="width: 60px; text-align: right;">{{item.shippedQnt}}</td>
                                                        <td style="width: 60px; text-align: right;">{{item.qnt40HC ? item.shippedQnt / item.qnt40HC : 0 | number:2}}</td>
                                                        <td style="width: 60px; text-align: right;">{{item.orderQnt - item.shippedQnt}}</td>
                                                        <td style="width: 60px; text-align: right;">{{item.qnt40HC ? (item.orderQnt - item.shippedQnt) / item.qnt40HC : 0 | number:2}}</td>
                                                        <td style="width: 60px; text-align: center;">{{item.materialNM}}</td>
                                                        <td style="width: 70px; text-align: center;">{{item.productionStatus}}</td>
                                                        <td style="width: 90px; text-align: center;">{{item.factoryUD}}</td>
                                                        <td style="width: 90px; text-align: center;">{{item.lds}}</td>
                                                        <td style="width: 90px; text-align: center;">{{item.quotationUD}}</td>
                                                        <td style="width: 80px; text-align: center;">{{item.manufacturerCountryNM}}</td>
                                                        <td style="width: 100px; text-align: center;">{{item.locationNM}}</td>
                                                        <td style="width: 60px; text-align: center;">{{item.priceDifferenceCode}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.salePrice | currency:'$':2}}</td>
                                                        <td style="width: 100px; text-align: right;">{{item.salePrice * item.orderQnt | currency:'$':2}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.targetPrice | currency:'$':2}}</td>
                                                        <td style="width: 80px; text-align: center;">{{item.quotationStatusNM}}</td>
                                                        <td style="width: 90px; text-align: center;">{{item.statusUpdatedDate}}</td>
                                                        <td style="width: 50px;">{{item.remark}}</td>
                                                        <td style="width: 65px; text-align: center;">{{item.currency}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.currency == 'EUR' ? item.unitPrice : null | currency:'&euro;':2}}</td>
                                                        <td style="width: 100px; text-align: right;">{{item.currency == 'EUR' ? item.unitPrice * item.orderQnt : null | currency:'&euro;':2}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.currency == 'USD' ? item.unitPrice : null | currency:'$':2}}</td>
                                                        <td style="width: 100px; text-align: right;">{{item.currency == 'USD' ? item.unitPrice * item.orderQnt : null | currency:'$':2}}</td>
                                                        <td style="width: 100px; text-align: right;">{{item.currency == 'USD' ? item.unitPrice * item.orderQnt / $parent.delta.exRate : item.unitPrice * item.orderQnt | currency:'&euro;':2}}</td>
                                                        <td style="width: 100px; text-align: right;">{{item.currency == 'EUR' ? item.transportation : null | currency:'&euro;':2}}</td>
                                                        <td style="width: 80px; text-align: right;">{{(item.qnt40HC && item.currency == 'EUR') ? item.transportation / item.qnt40HC : null | currency:'&euro;':2}}</td>
                                                        <td style="width: 100px; text-align: right;">{{(item.qnt40HC && item.currency == 'EUR') ? item.transportation * item.orderQnt / item.qnt40HC : null | currency:'&euro;':2}}</td>
                                                        <td style="width: 140px; text-align: right;">{{item.currency == 'EUR' ? (item.unitPrice - (item.qnt40HC ? item.transportation * item.orderQnt / item.qnt40HC : 0)) * $parent.delta.exRate : null | currency:'&euro;':2}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.currency == 'USD' ? item.unitPrice : (item.unitPrice - (item.qnt40HC ? item.transportation * item.orderQnt / item.qnt40HC : 0)) * $parent.delta.exRate | currency:'$':2}}</td>
                                                        <td style="width: 100px; text-align: right;">{{item.currency == 'USD' ? item.unitPrice * item.orderQnt : (item.unitPrice - (item.qnt40HC ? item.transportation * item.orderQnt / item.qnt40HC : 0)) * $parent.delta.exRate * item.orderQnt | currency:'$':2}}</td>
                                                        <td style="width: 120px; text-align: right;">{{((item.currency == 'USD' ? item.unitPrice : (item.unitPrice - (item.qnt40HC ? item.transportation * item.orderQnt / item.qnt40HC : 0)) * $parent.delta.exRate) - item.salePrice) * item.orderQnt | currency:'$':2}}</td>
                                                        <td style="width: 100px; text-align: right;">{{item.salePrice ? (((item.currency == 'USD' ? item.unitPrice : (item.unitPrice - (item.qnt40HC ? item.transportation * item.orderQnt / item.qnt40HC : 0)) * $parent.delta.exRate) - item.salePrice) * 100 / item.salePrice) : null | number:2}}%</td>
                                                        <td style="width: 80px; text-align: right;">{{item.commission | number:2}}%</td>
                                                        <td style="width: 80px; text-align: right;">{{item.currency == 'USD' ? item.unitPrice * item.commission : null | currency:'$':2}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.currency == 'EUR' ? item.unitPrice * item.commission : null | currency:'&euro;':2}}</td>
                                                        <td style="width: 130px; text-align: right;">{{item.currency == 'USD' ? item.unitPrice * item.commission : item.unitPrice * item.commission * $parent.delta.exRate | currency:'$':2}}</td>
                                                        @*<td style="width: 100px; text-align: right;">{{(item.currency == 'USD' ? item.unitPrice * item.commission : item.unitPrice * item.commission * $parent.delta.exRate) * item.orderQnt | currency:'$':2}}</td>*@

                                                        <td ng-if="item.commissionAmount != null" style="width: 80px; text-align: right;">{{item.commissionAmount | currency:'$':2}}</td>
                                                        <td ng-if="item.commissionAmount == null" style="width: 80px; text-align: right;">{{0 | currency:'$;':2}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.damagesCost | currency:'$':2}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.lcCostAmount | currency:'$;':2}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.interestAmount | currency:'$':2}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.transportCost | currency:'$':2}}</td>

                                                        <td style="width: 100px; text-align: right;">{{item.salePrice ? item.grossMarginAfterInUSD * 100 / (item.salePrice * item.orderQnt) : null | number:2}}%</td>
                                                        <td style="width: 120px; text-align: right;">{{item.grossMarginAfterInUSD | currency:'$':2}}</td>
                                                        <td>&nbsp;</td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- DELTA 2 -->
                        <div class="tab-pane" id="deltatab2" ng-if="@userInfo.Data.ModuleSpecialPermissionAccesses.Count(o => o.ModuleSpecialPermissionUD == Frontend.Helper.ConstantIdentifier.SPECIAL_PERMISSION_CLIENTOVERVIEW_CI) > 0">
                            <div class="row">
                                <div class="col-sm-12 m-bottom-15">
                                    <div class="smart-form">
                                        <fieldset style="padding: 0px;">
                                            <div class="row">
                                                <section class="col col-3">
                                                    <label class="label">Season (Ex.Rate: {{delta2.exRate | number:2}})</label>
                                                    <label class="select">
                                                        <select ng-model="delta2.season" ng-options="season.seasonValue as season.seasonText for season in seasons"></select>
                                                        <i></i>
                                                    </label>
                                                </section>
                                                <section class="col col-6">
                                                    <label class="label">&nbsp;</label>
                                                    <a href="javascript:void(0)" class="btn btn-success" style="padding: 6px 12px;" ng-click="event.getDelta2Data()">Refresh</a>
                                                    <a href="javascript:void(0)" class="btn btn-default" style="padding: 6px 12px;" ng-click="event.delta2ExportExcel()">Export to Excel</a>
                                                </section>
                                            </div>
                                        </fieldset>
                                    </div>
                                    <div avs-scrollable-table class="tilsoft-table-wrapper">
                                        <div class="tilsoft-table">
                                            <div class="tilsoft-table-header" style="width: 1770px;">
                                                <div style="width:40px; height: 75px;"></div>
                                                <div style="width: 100px; height: 75px;">Image</div>
                                                <div style="width: 120px; height: 75px;">Art.Code</div>
                                                <div style="width: 200px; height: 75px;">Desription</div>
                                                <div style="width: 60px; height: 75px;">Ordered Qnt</div>
                                                <div style="width: 65px; height: 75px;">Qnt/40HC</div>
                                                <div style="width: 65px; height: 75px;">Ordered Qnt/40HC</div>
                                                <div style="width: 80px; height: 75px;">FOB in USD (Company)</div>
                                                <div style="width: 100px; height: 75px;">Total in USD (Company)</div>
                                                <div style="width: 80px; height: 75px;">Sale U.Price (USD)</div>
                                                <div style="width: 100px; height: 75px;">Sale Amount (USD)</div>

                                                <div style="width: 100px; height: 75px;">Commission Amount(USD)</div>
                                                <div style="width: 100px; height: 75px;">Damages Cost(USD)</div>
                                                <div style="width: 100px; height: 75px;">LC Cost (USD)</div>
                                                <div style="width: 100px; height: 75px;">Interest (USD)</div>
                                                <div style="width: 100px; height: 75px;">Transport (USD)</div>

                                                <div style="width: 100px; height: 75px;">Gross Margin % After COMM, DAM, LC, INT</div>
                                                <div style="width: 120px; height: 75px;">Gross Margin After COMM, DAM, LC, INT (USD)</div>
                                                <div style="height: 75px;">&nbsp;</div>
                                            </div>
                                            <div class="tilsoft-table-totalrow" style="width: 1770px; margin-top: 75px;">
                                                <div style="width:40px"></div>
                                                <div style="width: 100px;"></div>
                                                <div style="width: 120px;"></div>
                                                <div style="width: 200px;">TOTAL</div>
                                                <div style="width: 60px;">{{delta2Summary.totalOrderQnt | number:0}}</div>
                                                <div style="width: 65px;"></div>
                                                <div style="width: 65px;">{{delta2Summary.totalOrderQnt40HC | number:2}}</div>
                                                <div style="width: 80px;"></div>
                                                <div style="width: 100px;">{{delta2Summary.totalPurchasingAmountUSD | currency:'$':2}}</div>
                                                <div style="width: 80px;"></div>
                                                <div style="width: 100px;">{{delta2Summary.totalSaleAmountUSD | currency:'$':2}}</div>

                                                <div style="width: 100px;">{{delta2Summary.totalCommissionAmount | currency:'$':2}}</div>
                                                <div style="width: 100px;">{{delta2Summary.totalDamagesCostAmount | currency:'$':2}}</div>
                                                <div style="width: 100px;">{{delta2Summary.totalLCCostAmount | currency:'$':2}}</div>
                                                <div style="width: 100px;">{{delta2Summary.totalInterestAmount | currency:'$':2}}</div>
                                                <div style="width: 100px;">{{delta2Summary.totalTransportAmount | currency:'$':2}}</div>

                                                <div style="width: 100px;">{{delta2Summary.totalGrossMarginPercentAfterComm | number:2}}%</div>
                                                <div style="width: 120px;">{{delta2Summary.totalGrossMarginAmountAfterComm | currency:'$':2}}</div>
                                                <div>&nbsp;</div>
                                            </div>
                                            <div id="delta2Table" class="tilsoft-table-body" style="width: 1770px; margin-top: 105px !important;">
                                                <table>
                                                    <tr ng-repeat="item in delta2.eurofarPriceOverviewDTOs">
                                                        <td style="width: 39px; text-align: center">{{$index + 1}}</td>
                                                        <td style="width: 100px;">
                                                            <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                <img style="width: 95%" ng-src="{{item.thumbnailLocation}}" />
                                                            </a>
                                                        </td>
                                                        <td style="width: 120px;">{{item.articleCode}}</td>
                                                        <td style="width: 200px;">{{item.description}}</td>
                                                        <td style="width: 60px; text-align: right;">{{item.totalOrderQnt | number:0}}</td>
                                                        <td style="width: 65px; text-align: right;">{{item.qnt40HC | number:0}}</td>
                                                        <td style="width: 65px; text-align: right;">{{item.totalOrderedQnt40HC | number:2}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.avgFOBPrice | currency:'$':2}}</td>
                                                        <td style="width: 100px; text-align: right;">{{item.totalPurchasingAmount | currency:'$':2}}</td>
                                                        <td style="width: 80px; text-align: right;">{{item.avgUnitPriceUSD | currency:'$':2}}</td>
                                                        <td style="width: 100px; text-align: right;">{{item.totalSaleAmount | currency:'$':2}}</td>

                                                        <td style="width: 100px; text-align: right;">{{item.commissionAmount | currency:'$':2}}</td>
                                                        <td style="width: 100px; text-align: right;">{{item.damagesCost | currency:'$':2}}</td>
                                                        <td style="width: 100px; text-align: right;">{{item.lcCostAmount | currency:'$':2}}</td>
                                                        <td style="width: 100px; text-align: right;">{{item.interestAmount | currency:'$':2}}</td>
                                                        <td style="width: 100px; text-align: right;">{{item.transportCost | currency:'$':2}}</td>

                                                        <td style="width: 100px; text-align: right;">{{item.grossMarginPercent | number:2}}%</td>
                                                        <td style="width: 120px; text-align: right;">{{item.grossMargin - item.commissionAmount - item.damagesCost | currency:'$':2}}</td>
                                                        <td>&nbsp;</td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- DELTA 3 -->
                        <div class="tab-pane" id="deltatab3" ng-if="@userInfo.Data.ModuleSpecialPermissionAccesses.Count(o => o.ModuleSpecialPermissionUD == Frontend.Helper.ConstantIdentifier.SPECIAL_PERMISSION_CLIENTOVERVIEW_CI) > 0">
                            <div class="row">
                                <div class="col-sm-12 m-bottom-15">
                                    <div class="smart-form">
                                        <fieldset style="padding: 0px;">
                                            <div class="row">
                                                <section class="col col-3">
                                                    <label class="label">Season (Ex.Rate: {{delta3.exRate | number:2}})</label>
                                                    <label class="select">
                                                        <select ng-model="delta3.season" ng-options="season.seasonValue as season.seasonText for season in seasons"></select>
                                                        <i></i>
                                                    </label>
                                                </section>
                                                <section class="col col-6">
                                                    <label class="label">&nbsp;</label>
                                                    <a href="javascript:void(0)" class="btn btn-success" style="padding: 6px 12px;" ng-click="event.getDelta3Data()">Refresh</a>
                                                    <a href="javascript:void(0)" class="btn btn-default" style="padding: 6px 12px;" ng-click="event.delta3ExportExcel()">Export to Excel</a>
                                                </section>
                                            </div>
                                        </fieldset>
                                    </div>
                                    <div avs-scrollable-table class="tilsoft-table-wrapper">
                                        <div class="tilsoft-table">
                                            <div class="tilsoft-table-header" style="width: 1510px;">
                                                <div style="width: 40px; height: 130px;"></div>
                                                <div style="width: 70px; height: 130px;">Image</div>
                                                <div style="width: 60px; height: 130px;">Code</div>
                                                <div style="width: 200px; height: 130px;">Name</div>
                                                <div style="width: 60px; height: 130px;">Ordered Qnt</div>
                                                <div style="width: 50px; height: 130px;">Qnt / 40HC</div>
                                                <div style="width: 60px; height: 130px;">Ordered Qnt / 40HC</div>
                                                <div style="width: 70px; height: 130px;">FOB in USD (Company)</div>
                                                <div style="width: 100px; height: 130px;">Total in USD (Company)</div>
                                                <div style="width: 70px; height: 130px;">Sale U.Price (USD)</div>
                                                <div style="width: 100px; height: 130px;">Sale Amount (USD)</div>
                                                <div style="width: 70px; height: 130px;">Gross Margin % After COMM, DAM, LC, INT</div>
                                                <div style="width: 90px; height: 130px;">Gross Margin After COMM, DAM, LC, INT (USD)</div>
                                                <div style="width: 90px; height: 130px;">Commission Amount (USD)</div>
                                                <div style="width: 90px; height: 130px;">Damages Cost (USD)</div>
                                                <div style="width: 90px; height: 130px;">LC Cost (USD)</div>
                                                <div style="width: 90px; height: 130px;">Interest (USD)</div>
                                                <div style="width: 90px; height: 130px;">Transport (USD)</div>
                                                <div style="height: 130px;">&nbsp;</div>
                                            </div>
                                            <div class="tilsoft-table-totalrow" style="width: 1510px; margin-top: 130px;">
                                                <div style="width: 40px"></div>
                                                <div style="width: 70px;"></div>
                                                <div style="width: 60px;"></div>
                                                <div style="width: 200px;">TOTAL</div>
                                                <div style="width: 60px;">{{delta3Summary.totalOrderQnt | number:0}}</div>
                                                <div style="width: 50px;"></div>
                                                <div style="width: 60px;">{{delta3Summary.totalOrderQnt40HC | number:1}}</div>
                                                <div style="width: 70px;"></div>
                                                <div style="width: 100px;">{{delta3Summary.totalPurchasingAmountUSD | currency:'$':2}}</div>
                                                <div style="width: 70px;"></div>
                                                <div style="width: 100px;">{{delta3Summary.totalSaleAmountUSD | currency:'$':2}}</div>
                                                <div style="width: 70px;">{{delta3Summary.totalGrossMarginPercentAfterComm | number:1}}%</div>
                                                <div style="width: 90px;">{{delta3Summary.totalGrossMarginAmountAfterComm | currency:'$':2}}</div>
                                                <div style="width: 90px;">{{delta3Summary.totalCommissionAmount | currency:'$':2}}</div>
                                                <div style="width: 90px;">{{delta3Summary.totalDamagesCostAmount | currency:'$':2}}</div>
                                                <div style="width: 90px;">{{delta3Summary.totalLCCostAmount | currency:'$':2}}</div>
                                                <div style="width: 90px;">{{delta3Summary.totalInterestAmount | currency:'$':2}}</div>
                                                <div style="width: 90px;">{{delta3Summary.totalTransportAmount | currency:'$':2}}</div>

                                                <div>&nbsp;</div>
                                            </div>
                                            <div id="delta3Table" class="tilsoft-table-body" style="width: 1510px; margin-top: 160px !important;">
                                                <table>
                                                    <tr ng-repeat="item in delta3.eurofarPriceOverviewDTOs">
                                                        <td style="width: 40px; text-align: center">{{$index + 1}}</td>
                                                        <td style="width: 70px;">
                                                            <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                <img style="width: 95%" ng-src="{{item.thumbnailLocation}}" />
                                                            </a>
                                                        </td>
                                                        <td style="width: 60px;">{{item.modelUD}}</td>
                                                        <td style="width: 200px;">{{item.modelNM}}</td>
                                                        <td style="width: 60px; text-align: right;">{{item.totalOrderQnt | number:0}}</td>
                                                        <td style="width: 50px; text-align: right;">{{item.qnt40HC | number:0}}</td>
                                                        <td style="width: 60px; text-align: right;">{{item.totalOrderedQnt40HC | number:1}}</td>
                                                        <td style="width: 70px; text-align: right;">{{item.avgFOBPrice | currency:'$':2}}</td>
                                                        <td style="width: 100px; text-align: right;">{{item.totalPurchasingAmount | currency:'$':2}}</td>
                                                        <td style="width: 70px; text-align: right;">{{item.avgUnitPriceUSD | currency:'$':2}}</td>
                                                        <td style="width: 100px; text-align: right;">{{item.totalSaleAmount | currency:'$':2}}</td>
                                                        <td style="width: 70px; text-align: right; {{item.grossMarginPercent < 0 ? 'color: #ff0000;' : ''}}">{{item.grossMarginPercent | number:1}}%</td>
                                                        <td style="width: 90px; text-align: right; {{item.grossMargin < 0 ? 'color: #ff0000;' : ''}}">{{item.grossMargin | currency:'$':2}}</td>
                                                        <td style="width: 90px; text-align: right;">{{item.commissionAmount | currency:'$':2}}</td>
                                                        <td style="width: 90px; text-align: right;">{{item.damagesCost | currency:'$':2}}</td>
                                                        <td style="width: 90px; text-align: right;">{{item.lcCostAmount | currency:'$':2}}</td>
                                                        <td style="width: 90px; text-align: right;">{{item.interestAmount | currency:'$':2}}</td>
                                                        <td style="width: 90px; text-align: right;">{{item.transportCost | currency:'$':2}}</td>

                                                        <td>&nbsp;</td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Sample Order -->
                        <div class="tab-pane" id="sampletab">
                            <div class="row">
                                <div class="col-sm-12 m-bottom-15">
                                    <div avs-scroll grid-handler="gridHandler" class="tilsoft-table-wrapper">
                                        <div class="tilsoft-table">
                                            <div class="tilsoft-table-header" style="width: 900px;">
                                                <div style="width:80px; font-size: 12px;"></div>
                                                <div style="width: 80px; font-size: 12px;" class="sorting">SEASON</div>
                                                <div style="width: 80px; font-size: 12px;" class="sorting">STATUS</div>
                                                <div style="width: 100px; font-size: 12px;" class="sorting">CODE</div>
                                                <div style="width: 400px; font-size: 12px;" class="sorting">INFO</div>
                                                <div style=" font-size: 12px;" class="sorting">UPDATED BY</div>
                                            </div>
                                            <div class="tilsoft-table-body margin-top" style="width: 900px;">
                                                <table>
                                                    <tr ng-repeat="item in sampleOrders">
                                                        <td style="width:79px;text-align: center;">
                                                            @if (Frontend.Helper.AuthHelper.GetActionButtonStatus(ViewBag.Sample, Frontend.Helper.ActionEnum.Read, HttpContext.Current) != "disabled")
                                                            {
                                                                <a class="btn btn-success btn-xs font-11" target="_blank" href="@Url.Action("Detail", "Sample2Mng", new { id = UrlParameter.Optional })/{{item.sampleOrderID}}" title="Detail"><i class="fa fa-list-ul"></i> Detail</a>
                                                            }
                                                        </td>
                                                        <td style="width: 80px; text-align: center;">{{item.season}}</td>
                                                        <td style="width: 80px; text-align: center;">{{item.sampleOrderStatusNM}}</td>
                                                        <td style="width: 100px; text-align: center;">
                                                            <a target="_blank" href="@Url.Action("Detail", "Sample2Mng", new { id = UrlParameter.Optional })/{{item.sampleOrderID}}">{{item.sampleOrderUD}}</a>
                                                        </td>
                                                        <td style="width: 400px;text-align: left;">
                                                            <span class="item left"><u>Purpose</u>: {{item.purposeNM}}</span>
                                                            <span class="item right"><u>Transport</u>: {{item.transportTypeNM}}</span>

                                                            <div class="clear"></div>

                                                            <span class="item left"><u>Deadline</u>: {{item.deadline}}</span>
                                                            <span class="item right"><u>Hard Deadline</u>: {{item.hardDeadline}}</span>

                                                            <div class="clear"></div>

                                                            <u>Destination</u>: {{item.destination}}
                                                        </td>
                                                        <td>
                                                            <strong>
                                                                <a ng-if="item.updatedBy" href="@Url.Action("Detail", "EmployeeMng", new { id = UrlParameter.Optional })/{{item.updatedBy}}" da data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600">
                                                                    <i class="fa fa-user"></i> {{item.updatorName}}
                                                                </a>
                                                            </strong>
                                                            <br />{{item.updatedDate}}
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Client Complaint -->
                        <div class="tab-pane" id="complaintab">
                            <div class="row">
                                <div class="col-sm-12 m-bottom-15">
                                    <div avs-scroll grid-handler="gridHandler" class="tilsoft-table-wrapper">
                                        <div class="tilsoft-table">
                                            <div class="tilsoft-table-header" style="width: 1800px;">
                                                <div style="width:80px; font-size: 12px;"></div>
                                                <div style="width: 100px; font-size: 12px;">DATE RECEIVED</div>
                                                <div style="width: 100px; font-size: 12px;">COMPLAINT NUMBER</div>
                                                <div style="width: 100px; font-size: 12px;">SEASON</div>
                                                <div style="width: 100px; font-size: 12px;">CLIENT CODE</div>
                                                <div style="width: 220px; font-size: 12px;">CLIENT NAME</div>
                                                <div style="width: 120px; font-size: 12px;">CONTACT PERSON</div>
                                                <div style="width: 120px; font-size: 12px;">SALE MANAGER</div>
                                                <div style="width: 140px; font-size: 12px;">STATUS</div>
                                                <div style="width: 300px; font-size: 12px;">INFO</div>
                                                <div style="width: 120px; font-size: 12px;">COMPLAINT TYPE</div>
                                                <div style="text-align: center; font-size: 12px;">UPDATED BY</div>
                                            </div>
                                            <div class="tilsoft-table-body margin-top" style="width: 1800px;">
                                                <table>
                                                    <tr ng-repeat="item in clientComplaints">
                                                        <td style="width:79px;text-align: center; vertical-align: middle">
                                                            @if (Frontend.Helper.AuthHelper.GetActionButtonStatus(ViewBag.ClientComplaint, Frontend.Helper.ActionEnum.Update, HttpContext.Current) != "disabled")
                                                            {
                                                                <a href='@Url.Action("Edit", "ClientComplaint")/{{item.clientComplaintID}}?clientId={{item.clientID}}&season={{item.yearSeason}}' title="Edit" target="_blank"><i class="fa fa-pencil-square grid-button"></i></a>
                                                            }
                                                        </td>
                                                        <td style="width: 100px; vertical-align: middle;text-align:center;">{{item.receivedDate}}</td>
                                                        <td style="width: 100px; vertical-align: middle;text-align:center;">
                                                            <a href="@clientComplaintViewUrl/{{item.clientComplaintID}}" target="_blank">{{item.complaintNumber}}</a>
                                                        </td>
                                                        <td style="width: 100px; vertical-align: middle;text-align:center;">{{item.yearSeason}}</td>
                                                        <td style="width: 100px; vertical-align: middle;text-align:center;">{{data.clientUD}}</td>
                                                        <td style="width: 220px; vertical-align: middle;text-align:center;">{{data.clientNM}}</td>
                                                        <td style="width: 120px; vertical-align: middle;text-align:center;">{{item.contactPerson}}</td>
                                                        <td style="width: 120px; vertical-align: middle;text-align:center;">{{item.saleNM}}</td>
                                                        <td style="width: 140px; vertical-align: middle;text-align:center;text-transform:uppercase;">{{event.getComplaintStatus(item.complaintStatus)}}</td>
                                                        <td style="width: 300px; vertical-align: middle;">
                                                            <strong>{{item.article}}</strong>
                                                            <p>{{item.complaintDescription}}</p>
                                                        </td>
                                                        <td style="width: 120px; vertical-align: middle;text-align:center;text-transform:uppercase;">{{event.getComplaintType(item.complaintType)}}</td>
                                                        <td style="vertical-align: middle; text-align: center;">
                                                            <a ng-if="item.updatedBy" href='@Url.Action("Detail", "EmployeeMng", new { id = UrlParameter.Optional })/{{item.updatedBy}}' data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600">
                                                                <i class="fa fa-user"></i> {{item.updatorName}}
                                                            </a>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--Document-->
                        <div class="tab-pane" id="documenttab">
                            <div class="row">
                                <div class="col-sm-12 m-bottom-15">
                                    <div avs-scroll grid-handler="gridHandler" class="tilsoft-table-wrapper">
                                        <div class="tilsoft-table">
                                            <div class="tilsoft-table-header" style="width: 700px; ">
                                                <div style="width: 150px; font-size: 12px;">DOCUMENT TYPE</div>
                                                <div style="width: 150px; font-size: 12px;">DOCUMENT NAME</div>
                                                <div style="width: 300px; font-size: 12px;">DOCUMENT FILE</div>
                                                <div style="font-size: 12px;">DESCRIPTION</div>
                                            </div>
                                            <div class="tilsoft-table-body margin-top" style="width: 700px; min-height: 0px;">
                                                <table>
                                                    <tr ng-repeat="item in data.clientContracts | filter: {clientDocumentTypeNM : '!CONTRACT'}">
                                                        <td style="width: 149px; text-align: center;">{{item.clientDocumentTypeNM}}</td>
                                                        <td style="width: 150px; text-align: center;">{{item.contractNo}}</td>
                                                        <td style="width: 300px;">
                                                            <a ng-href="{{item.contractFileURL}}" target="_blank">{{item.contractFileFriendlyName}}</a>
                                                        </td>
                                                        <td>{{item.remark}}</td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--Contract-->
                        <div class="tab-pane" id="contracttab">
                            <div class="row">
                                <div class="col-sm-12 m-bottom-15">
                                    <div avs-scroll grid-handler="gridHandler" class="tilsoft-table-wrapper">
                                        <div class="tilsoft-table">
                                            <div class="tilsoft-table-header" style="width: 1000px; ">
                                                <div style="width: 70px; font-size: 12px;">SIGNED</div>
                                                <div style="width: 150px; font-size: 12px;">CONTRACT NO</div>
                                                <div style="width: 300px; font-size: 12px;">FILE</div>
                                                <div style="font-size: 12px;">DESCRIPTION</div>
                                            </div>
                                            <div class="tilsoft-table-body margin-top" style="width: 1000px; min-height: 0px;">
                                                <table>
                                                    <tr ng-repeat="item in data.clientContracts | filter: {clientDocumentTypeNM : 'CONTRACT'}">
                                                        <td style="text-align: center; width: 70px; vertical-align: middle"><label ng-class="item.isSigned == true ? 'fa fa-check' : 'label'"></label></td>
                                                        <td style="width: 150px; text-align: center;">{{item.contractNo}}</td>
                                                        <td style="width: 300px;">
                                                            <a ng-href="{{item.contractFileURL}}" target="_blank">{{item.contractFileFriendlyName}}</a>
                                                        </td>
                                                        <td>{{item.remark}}</td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- meeting -->
                        <div class="tab-pane" id="meetingtab">
                            <table class="table table-striped table-bordered table-hover" style="width: 100%;">
                                <thead>
                                    <tr>
                                        <th>SUBJECT</th>
                                        <th>OWNER</th>
                                        <th>LOCATION</th>
                                        <th>FACTORY</th>
                                        <th>START</th>
                                        <th>END</th>
                                        <th>ATTACHMENT</th>
                                        <th>DESCRIPTION</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="item in data.appointments">
                                        <td>
                                            <a href="javascript:void(0);" ng-click="event.getAgenda(item.appointmentID)">
                                                {{item.subject}}
                                            </a>
                                        </td>
                                        <td style="text-align: center;">
                                            <a href="@Url.Action("Detail", "EmployeeMng", new { id = UrlParameter.Optional })/{{item.userID}}" data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600">
                                                <i class="fa fa-user"></i> {{item.employeeNM}}
                                            </a>
                                        </td>
                                        <td style="text-align: center;">{{item.meetingLocationNM}}</td>
                                        <td style="text-align: center;">{{item.factoryUD}}</td>
                                        <td>{{item.startTime}}</td>
                                        <td>{{item.endTime}}</td>
                                        <td style="text-align: center;">{{item.totalAttachedFile}}</td>
                                        <td>{{item.description}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!--Purchasing Overview-->
                        <div class="tab-pane" id="purchasingoverviewtab">
                            <div class="row">
                                <article class="col-sm-12">
                                    <div class="jarviswidget" id="pnlSearchResult" data-widget-deletebutton="false" data-widget-editbutton="false" data-widget-colorbutton="false" data-widget-togglebutton="false">
                                        <header>
                                            <span class="widget-icon"> <i class="fa fa-search txt-color-darken"></i> </span>
                                            <h2>Search Result</h2>
                                        </header>
                                        <div class="no-padding">
                                            <div class="widget-body" style="padding-bottom: 0px;">
                                                <div class="form-inline dt-bootstrap no-footer tilsoft-table-wrapper">
                                                    <div class="dt-toolbar" style="padding: 10px; border: solid 1px #ddd; border-bottom: none; box-sizing: border-box; z-index: 101; font-size: 12px;">
                                                        @*<div class="row">
                                                                <div class="col-xs-12 col-sm-6" style="text-align: right;">
                                                                    <span class="label label-default">Total: {{total | number}}</span>
                                                                    <span class="label label-success">Confirmed: {{confirmed | number}}</span>
                                                                    <span class="label label-warning">Pending: {{pending | number}}</span>
                                                                    (
                                                                    <span class="label label-default" style="background: #afdc7e; color: #000;">Eurofar: {{waitEurofar | number}}</span>
                                                                    <span class="label label-default" style="background: #ffe699; color: #000;">Factory: {{waitFactory | number}}</span>
                                                                    )
                                                                </div>
                                                            </div>*@
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12">
                                                                Season
                                                                <select class="search-filter" ng-model="filters.Season" ng-options="item.seasonValue as item.seasonText for item in support.seasons"></select>
                                                                &nbsp;

                                                                P/I
                                                                <input class="search-filter" type="text" ng-model="filters.ProformaInvoiceNo" />
                                                                &nbsp;

                                                                Type
                                                                <select class="search-filter" ng-model="filters.ItemTypeID" ng-options="item.id as item.name for item in support.itemTypes">
                                                                    <option></option>
                                                                </select>
                                                                &nbsp;

                                                                Description
                                                                <input class="search-filter" type="text" ng-model="filters.Description" />
                                                                &nbsp;

                                                                Factory
                                                                <input class="search-filter" type="text" ng-model="filters.FactoryUD" />
                                                                &nbsp;

                                                                Status
                                                                <select class="search-filter" ng-model="filters.StatusID" ng-options="item.quotationStatusID as item.quotationStatusNM for item in quotationStatus">
                                                                    <option></option>
                                                                </select>

                                                                &nbsp;

                                                                Wait Status
                                                                <select class="search-filter" ng-model="filters.QuotationOfferDirectionID" ng-options="item.id as item.name for item in support.waitStatuses">
                                                                    <option></option>
                                                                </select>
                                                                &nbsp;

                                                                Order Type
                                                                <select class="search-filter" ng-model="filters.OrderTypeID" ng-options="item.orderTypeID as item.orderTypeNM for item in orderTypes">
                                                                    <option></option>
                                                                </select>
                                                                &nbsp;

                                                                <a href="javascript:void(0)" class="btn btn-primary btn-xs" title="Apply Filter" ng-click="event.reload()"><i class="fa fa-filter"></i></a>
                                                                <a href="javascript:void(0)" class="btn btn-default btn-xs" title="Clear Filter" ng-click="event.clearFilter()"><i class="fa fa-ban"></i></a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div avs-scrollable-table class="tilsoft-table-wrapper" @*ng-load-next-page="controls.grdSearchResult.event.loadMore()" ng-sort-data="controls.grdSearchResult.event.sort"*@>
                                                        <div class="tilsoft-table">
                                                            <div class="tilsoft-table-header" style="width:4000px">
                                                                <div style="width: 65px"><strong>Found</strong>: {{totalRows}}</div>
                                                                <div class="sorting" data-colname="Season" style="width: 40px">Sea son</div>
                                                                <div class="sorting" data-colname="ProformaInvoiceNo" style="width: 35px"> P/I</div>
                                                                <div class="sorting" data-colname="ClientNM" style="width: 80px">Client</div>
                                                                <div class="sorting" data-colname="ItemTypeID" style="width: 40px">Ty pe</div>
                                                                <div class="sorting" data-colname="FileLocation" style="width: 60px">Image</div>
                                                                <div class="sorting" data-colname="Description" style="width: 200px">Description</div>
                                                                <div class="sorting" data-colname="OrderQnt" style="width: 55px">Qnt</div>
                                                                <div class="sorting" data-colname="Qnt40HC" style="width: 50px">Qnt&nbsp;/ 40HC</div>
                                                                <div class="sorting" data-colname="OrderQnt40HC" style="width: 55px">40HC Qnt</div>
                                                                <div class="sorting" data-colname="FactoryUD" style="width: 50px">Fac tory</div>
                                                                <div class="sorting" data-colname="LDS" style="width: 50px">LDS</div>
                                                                <div data-colname="FactoryPrice1" style="width: 65px">Factory Price 1</div>
                                                                <div data-colname="TargetPrice1" style="width: 60px">Target Price-1</div>
                                                                <div data-colname="FactoryPrice2" style="width: 65px">Factory Price 2</div>
                                                                <div data-colname="TargetPrice2" style="width: 60px">Target Price-2</div>
                                                                <div data-colname="FactoryPrice3" style="width: 65px">Factory Price 3</div>
                                                                <div data-colname="TargetPrice3" style="width: 60px">Target Price-3</div>
                                                                <div class="sorting" data-colname="PurchasingPrice" style="width: 55px">Factory Price</div>
                                                                <div class="sorting" data-colname="PriceIncludeDiff" style="width: 55px">AVT Price</div>
                                                                <div class="sorting" data-colname="AVTBreakdown" style="width: 70px">AVT Break&nbsp;down</div>
                                                                <div class="sorting" data-colname="AVFBreakdown" style="width: 70px">AVF Break&nbsp;down</div>
                                                                <div class="sorting" style="width: 55px" data-colname="TargetPrice">Target Price</div>
                                                                @*<div style="width: 70px">New Target</div>
                                                                    <div style="width: 70px">New Comment</div>*@
                                                                <div class="sorting" style="width: 40px" data-colname="QuotationStatusNM">Sta tus</div>
                                                                <div class="sorting" style="width: 45px" data-colname="QuotationOfferDirectionID">Wait Status</div>
                                                                <div class="sorting" style="width: 55px" data-colname="PurchasingPricePreviousSeason">Price {{method.getPrevSeason()}}</div>
                                                                <div class="sorting" style="width: 55px" data-colname="PurchasingPrice2ndPreviousSeason">Price {{method.get2ndPrevSeason()}}</div>
                                                                <div class="sorting" style="width: 55px" data-colname="Remark">Re mark</div>
                                                                <div class="sorting" style="width: 60px" data-colname="PackagingMethodNM">Pac kaging</div>
                                                                <div class="sorting" style="width: 55px" data-colname="PriceUpdatedDate">Last Updated</div>

                                                                <div class="sorting" style="width: 65px; text-align: right;">Sale Price &euro;</div>
                                                                <div class="sorting" style="width: 65px; text-align: right;">Sale Price $</div>
                                                                <div class="sorting" style="width: 65px; text-align: right;">FOB Sale($)</div>
                                                                <div class="sorting" style="width: 100px; text-align: left;">FOB&nbsp;Sale&nbsp;Amount ($)&nbsp;Converted</div>
                                                                <div class="sorting" style="width: 85px; text-align: left;">Margin&nbsp;After Comm</div>
                                                                <div class="sorting" style="width: 65px; text-align: right;">%&nbsp;Margin After&nbsp;Comm</div>
                                                                <div class="sorting" style="width: 65px; text-align: right;">Transport /&nbsp;unit</div>

                                                                <div class="sorting" style="width: 100px; text-align: right;">Sale Amount EUR</div>
                                                                <div class="sorting" style="width: 100px; text-align: right;">Sale Amount USD</div>
                                                                <div class="sorting" style="width: 100px; text-align: right;">Transport</div>
                                                                <div class="sorting" style="width: 100px; text-align: right;">Total Transport</div>
                                                                <div class="sorting" style="width: 130px; text-align: right;">FOB&nbsp;Sale&nbsp;Price&nbsp;For&nbsp;EUR Order&nbsp;(excluded transport)</div>
                                                                <div class="sorting" style="width: 100px; text-align: right;">Margin Before Comm</div>
                                                                <div class="sorting" style="width: 100px; text-align: right;">% Margin Before Comm</div>
                                                                <div class="sorting" style="width: 100px; text-align: right;">Commission</div>
                                                                <div class="sorting" style="width: 100px; text-align: right;">Commission&nbsp;per unit&nbsp;in&nbsp;USD</div>
                                                                <div class="sorting" style="width: 100px; text-align: right;">Commission&nbsp;per unit&nbsp;in&nbsp;EUR</div>
                                                                <div class="sorting" style="width: 100px; text-align: right;">Commission&nbsp;per unit&nbsp;to&nbsp;EUR</div>
                                                                <div class="sorting" style="width: 100px; text-align: right;">Commission Amount&nbsp;USD</div>
                                                                <div class="sorting" style="width: 100px; text-align: right;">Order Type</div>
                                                                <div class="sorting" style="width: 100px; text-align: right;">Total&nbsp;in USD&nbsp;Company</div>

                                                                <div>&nbsp;</div>
                                                            </div>
                                                            <div class="tilsoft-table-totalrow" style="width:4000px; margin-top: 50px">
                                                                <div style="width: 65px"></div>
                                                                <div style="width: 40px"></div>
                                                                <div style="width: 35px"></div>
                                                                <div style="width: 80px"></div>
                                                                <div style="width: 40px"></div>
                                                                <div style="width: 60px"></div>
                                                                <div style="width: 200px"></div>
                                                                <div style="text-align: right; width: 55px">{{totalRow.totalOrderQnt | number}}</div>
                                                                <div style="width: 50px"></div>
                                                                <div style="text-align: right; width: 55px">{{totalRow.totalOrderQnt40HC | number}}</div>
                                                                <div style="width: 50px"></div>
                                                                <div style="width: 50px"></div>
                                                                <div style="width: 65px"></div>
                                                                <div style="width: 60px"></div>
                                                                <div style="width: 65px"></div>
                                                                <div style="width: 60px"></div>
                                                                <div style="width: 65px"></div>
                                                                <div style="width: 60px"></div>
                                                                <div style="width: 55px"></div>
                                                                <div style="width: 55px"></div>
                                                                <div style="width: 70px"></div>
                                                                <div style="width: 70px"></div>
                                                                <div style="width: 55px"></div>
                                                                @*<div style="width: 70px"></div>
                                                                    <div style="width: 70px"></div>*@
                                                                <div style="width: 40px"></div>
                                                                <div style="width: 45px"></div>
                                                                <div style="width: 55px"></div>
                                                                <div style="width: 55px"></div>
                                                                <div style="width: 55px"></div>
                                                                <div style="width: 60px"></div>
                                                                <div style="width: 55px"></div>

                                                                <div style="width: 65px; text-align: right;"></div>
                                                                <div style="width: 65px; text-align: right;"></div>
                                                                <div style="width: 65px; text-align: right;"></div>
                                                                <div style="width: 100px; text-align: right;">{{totalRow.fobAmountUSD | currency:'$':2}}</div>
                                                                <div style="width: 85px; text-align: right;">{{totalRow.marginAfterComm | currency:'$':2}}</div>
                                                                <div style="width: 65px; text-align: right;">{{totalRow.marginAfterComm * 100 / totalRow.fobPurchasingUSD | number:2}}%</div>
                                                                <div style="width: 65px; text-align: right;"></div>

                                                                <div style="width: 100px; text-align: right;"></div>
                                                                <div style="width: 100px; text-align: right;">{{totalRow.saleAmountUSD | currency:'$':2}}</div>
                                                                <div style="width: 100px; text-align: right;"></div>
                                                                <div style="width: 100px; text-align: right;">{{totalRow.totalTransport | currency:'&euro;':2}}</div>
                                                                <div style="width: 130px; text-align: right;"></div>
                                                                <div style="width: 100px; text-align: right;">{{totalRow.marginBeforeComm | currency:'$':2}}</div>
                                                                <div style="width: 100px; text-align: right;"></div>
                                                                <div style="width: 100px; text-align: right;"></div>
                                                                <div style="width: 100px; text-align: right;"></div>
                                                                <div style="width: 100px; text-align: right;"></div>
                                                                <div style="width: 100px; text-align: right;"></div>
                                                                <div style="width: 100px; text-align: right;">{{totalRow.commissionUSD | currency:'$':2}}</div>
                                                                <div style="width: 100px; text-align: right;"></div>
                                                                <div style="width: 100px; text-align: right;">{{totalRow.fobPurchasingUSD | currency:'$':2}}</div>

                                                                <div>&nbsp;</div>
                                                            </div>
                                                            <div class="tilsoft-table-subtotalrow" style="width:4000px; margin-top: 80px">
                                                                <div style="width: 65px"></div>
                                                                <div style="width: 40px"></div>
                                                                <div style="width: 35px"></div>
                                                                <div style="width: 80px"></div>
                                                                <div style="width: 40px"></div>
                                                                <div style="width: 60px"></div>
                                                                <div style="width: 200px"></div>
                                                                <div style="text-align: right; width: 55px">{{subTotalRow.totalOrderQnt | number}}</div>
                                                                <div style="width: 50px"></div>
                                                                <div style="text-align: right; width: 55px">{{subTotalRow.totalOrderQnt40HC | number}}</div>
                                                                <div style="width: 50px"></div>
                                                                <div style="width: 50px"></div>
                                                                <div style="width: 65px"></div>
                                                                <div style="width: 60px"></div>
                                                                <div style="width: 65px"></div>
                                                                <div style="width: 60px"></div>
                                                                <div style="width: 65px"></div>
                                                                <div style="width: 60px"></div>
                                                                <div style="width: 55px"></div>
                                                                <div style="width: 55px"></div>
                                                                <div style="width: 70px"></div>
                                                                <div style="width: 70px"></div>
                                                                <div style="width: 55px"></div>
                                                                @*<div style="width: 70px"></div>
                                                                    <div style="width: 70px"></div>*@
                                                                <div style="width: 40px"></div>
                                                                <div style="width: 45px"></div>
                                                                <div style="width: 55px"></div>
                                                                <div style="width: 55px"></div>
                                                                <div style="width: 55px"></div>
                                                                <div style="width: 60px"></div>
                                                                <div style="width: 55px"></div>

                                                                <div style="width: 65px; text-align: right;"></div>
                                                                <div style="width: 65px; text-align: right;"></div>
                                                                <div style="width: 65px; text-align: right;"></div>
                                                                <div style="width: 100px; text-align: right;">{{subTotalRow.fobAmountUSD | currency:'$':2}}</div>
                                                                <div style="width: 85px; text-align: right;">{{subTotalRow.marginAfterComm | currency:'$':2}}</div>
                                                                <div style="width: 65px; text-align: right;">{{subTotalRow.marginAfterComm * 100 / subTotalRow.fobPurchasingUSD | number:2}}%</div>
                                                                <div style="width: 65px; text-align: right;"></div>

                                                                <div style="width: 100px; text-align: right;"></div>
                                                                <div style="width: 100px; text-align: right;">{{subTotalRow.saleAmountUSD | currency:'$':2}}</div>
                                                                <div style="width: 100px; text-align: right;"></div>
                                                                <div style="width: 100px; text-align: right;">{{subTotalRow.totalTransport | currency:'&euro;':2}}</div>
                                                                <div style="width: 130px; text-align: right;"></div>
                                                                <div style="width: 100px; text-align: right;">{{subTotalRow.marginBeforeComm | currency:'$':2}}</div>
                                                                <div style="width: 100px; text-align: right;"></div>
                                                                <div style="width: 100px; text-align: right;"></div>
                                                                <div style="width: 100px; text-align: right;"></div>
                                                                <div style="width: 100px; text-align: right;"></div>
                                                                <div style="width: 100px; text-align: right;"></div>
                                                                <div style="width: 100px; text-align: right;">{{subTotalRow.commissionUSD | currency:'$':2}}</div>
                                                                <div style="width: 100px; text-align: right;"></div>
                                                                <div style="width: 100px; text-align: right;">{{subTotalRow.fobPurchasingUSD | currency:'$':2}}</div>

                                                                <div>&nbsp;</div>
                                                            </div>
                                                            <div class="tilsoft-table-body" style="width:4000px; margin-top:110px">
                                                                <table>
                                                                    <tr ng-repeat="item in sdata">
                                                                        <td style="width: 65px">
                                                                            <a target="_blank" ng-if="item.offerLineID" href="@Url.Action("Edit", "BreakDownMng", new { id = UrlParameter.Optional })/0?modelId=0&sampleProductId=0&offerLineId={{item.offerLineID}}&factoryId={{item.factoryID}}" class="btn btn-primary btn-xs" title="Breakdown"><i class="fa fa-cubes"></i></a>
                                                                        </td>
                                                                        <td style="width: 40px">{{item.season}}</td>
                                                                        <td style="width: 35px">{{item.proformaInvoiceNo}}</td>
                                                                        <td style="width: 80px">
                                                                            <strong>{{item.clientUD}}</strong>
                                                                            <br />
                                                                            {{item.clientNM}}
                                                                        </td>
                                                                        <td style="width: 40px">{{item.itemTypeID === 1 ? 'PRODUCT' : 'SPAREPART'}}</td>
                                                                        <td style="width: 60px">
                                                                            <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                                <img style="width: 95%;" ng-src="{{item.thumbnailLocation}}" />
                                                                            </a>
                                                                        </td>
                                                                        <td style="width: 200px">
                                                                            <strong>{{item.articleCode}}</strong>
                                                                            <br />
                                                                            {{item.description}}
                                                                        </td>
                                                                        <td style="text-align: right; width: 55px">{{item.orderQnt | number}}</td>
                                                                        <td style="width: 50px">{{item.qnt40HC | number}}</td>
                                                                        <td style="text-align: right; width: 55px">{{item.orderQnt40HC | number:2}}</td>
                                                                        <td style="width: 50px">{{item.factoryUD}}</td>
                                                                        <td style="width: 50px">{{item.lds}}</td>
                                                                        <td style="width: 65px">{{item.factoryPrice1 | currency:'$':2}}</td>
                                                                        <td style="width: 60px">{{item.targetPrice1 | currency:'$':2}}</td>
                                                                        <td style="width: 65px">{{item.factoryPrice2 | currency:'$':2}}</td>
                                                                        <td style="width: 60px">{{item.targetPrice2 | currency:'$':2}}</td>
                                                                        <td style="width: 65px">{{item.factoryPrice3 | currency:'$':2}}</td>
                                                                        <td style="width: 60px">{{item.targetPrice3 | currency:'$':2}}</td>
                                                                        <td style="width: 55px"><a href="javascript:void(0)" ng-click="event.openHistory(item)">{{item.purchasingPrice | currency:'$':2}}</a></td>
                                                                        <td style="width: 55px"><a href="javascript:void(0)" ng-click="event.openHistory(item)">{{item.priceIncludeDiff | currency:'$':2}}</a></td>
                                                                        <td style="width: 70px; text-align: right;"><a href="@Url.Action("Edit", "BreakDownMng", new { id = UrlParameter.Optional })/0?modelId=0&sampleProductId=0&offerLineId={{item.offerLineID}}&factoryId={{item.factoryID}}" target="_blank">{{method.getTotalCostPriceAVT_USD(item) | currency:'$':2}}</a></td>
                                                                        <td style="width: 70px; text-align: right;"><a href="@Url.Action("Edit", "BreakDownMng", new { id = UrlParameter.Optional })/0?modelId=0&sampleProductId=0&offerLineId={{item.offerLineID}}&factoryId={{item.factoryID}}" target="_blank">{{method.getTotalCostPriceAVF_USD(item) | currency:'$':2}}</a></td>
                                                                        <td style="width: 55px"><a href="javascript:void(0)" ng-click="event.openHistory(item)">{{item.targetPrice | currency:'$':2}}</a></td>
                                                                        @*<td style="width: 70px"><input ng-if="item.statusID !== 3" type="text" avs-currency-2 ng-model="item.newTargetPrice" style="text-align: right;" ng-focus="data.selectedRow = item" /></td>
                                                                            <td style="width: 70px"><input ng-if="item.statusID !== 3" type="text" ng-model="item.newTargetComment" ng-focus="data.selectedRow = item" /></td>*@
                                                                        <td style="width: 40px">
                                                                            <strong>{{item.quotationStatusNM}}</strong>
                                                                            <br />
                                                                            <a ng-if="item.statusUpdatedBy" href="@Url.Action("Detail", "EmployeeMng", new { id = UrlParameter.Optional })/{{item.statusUpdatedBy}}" data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600">
                                                                                {{item.statusUpdatorNM}}
                                                                            </a>
                                                                        </td>
                                                                        <td style="width: 45px; background-color: {{item.quotationOfferDirectionID === 1 ? '#afdc7e' : (item.quotationOfferDirectionID === 2 ? '#ffe699' : '')}}; ">
                                                                            {{item.quotationOfferDirectionID === 1 ? 'WAIT FOR EUROFAR' : (item.quotationOfferDirectionID === 2 ? 'WAIT FOR FACTORY' : '')}}
                                                                        </td>
                                                                        <td style="width: 55px"><a href="javascript:void(0)" ng-click="event.openPurchaseHistory(item)">{{item.purchasingPricePreviousSeason | currency:'$':2}}</a></td>
                                                                        <td style="width: 55px"><a href="javascript:void(0)" ng-click="event.openPurchaseHistory(item)">{{item.purchasingPrice2ndPreviousSeason | currency:'$':2}}</a></td>
                                                                        @*<td><a href="javascript:void(0)" ng-click="event.openPurchaseHistory(item)">{{item.purchasingPrice3rdPreviousSeason | currency:'$':2}}</a></td>*@
                                                                        <td style="width: 55px">{{item.remark}}</td>
                                                                        <td style="width: 60px">{{item.packagingMethodNM}}</td>
                                                                        <td style="width: 55px">{{item.priceUpdatedDate}}</td>

                                                                        <td style="width: 65px; text-align: right;">{{item.saleUnitPriceEUR | currency:'&euro;':2}}</td>
                                                                        <td style="width: 65px; text-align: right;">{{item.saleUnitPriceUSD | currency:'$':2}}</td>
                                                                        <td style="width: 65px; text-align: right;">{{item.fobUnitPrice | currency:'$':2}}</td>
                                                                        <td style="width: 100px; text-align: right;">{{item.fobAmountUSD | currency:'$':2}}</td>
                                                                        <td style="width: 85px; text-align: right;">{{item.marginAfterCommissionUSD | currency:'$':2}}</td>
                                                                        <td style="width: 65px; text-align: right;">{{item.marginPercentAfterCommission | number:2}}%</td>
                                                                        <td style="width: 65px; text-align: right;">{{item.transportPerItemEUR | currency:'&euro;':2}}</td>

                                                                        <td style="width: 100px; text-align: right;">{{item.saleAmountEUR | currency:'&euro;':2}}</td>
                                                                        <td style="width: 100px; text-align: right;">{{item.saleAmountUSD | currency:'$':2}}</td>
                                                                        <td style="width: 100px; text-align: right;">{{item.transportation | currency:'&euro;':2}}</td>
                                                                        <td style="width: 100px; text-align: right;">{{item.transportAmountEUR | currency:'&euro;':2}}</td>
                                                                        <td style="width: 130px; text-align: right;">{{item.saleUnitPriceTransportExcludedConvertedToEUR | currency:'&euro;':2}}</td>
                                                                        <td style="width: 100px; text-align: right;">{{item.marginBeforeCommissionUSD | currency:'$':2}}</td>
                                                                        <td style="width: 100px; text-align: right;">{{item.marginPercentBeforeCommission | number:2}}%</td>
                                                                        <td style="width: 100px; text-align: right;">{{item.commissionPercent * 100 | number:2}}%</td>
                                                                        <td style="width: 100px; text-align: right;">{{item.commissionPerItemUSD | currency:'$':2}}</td>
                                                                        <td style="width: 100px; text-align: right;">{{item.commissionPerItemEUR | currency:'&euro;':2}}</td>
                                                                        <td style="width: 100px; text-align: right;">{{item.commissionPerItemConvertedToUSD | currency:'$':2}}</td>
                                                                        <td style="width: 100px; text-align: right;">{{item.commissionAmountUSD | currency:'$':2}}</td>
                                                                        <td style="width: 100px; text-align: center;">{{item.orderTypeNM}}</td>
                                                                        <td style="width: 100px; text-align: right;">{{item.fobPurchasingUSD | currency:'$':2}}</td>

                                                                        <td></td>
                                                                    </tr>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </article>
                            </div>
                        </div>

                        <!-- other info-->
                        <div class="tab-pane" id="otherinfotab">
                            <div class="row">
                                <div class="col-sm-2 m-bottom-15">
                                    <label>Client Type</label>
                                    <input class="form-control" type="text" id="clientTypeNM" ng-model="data.clientTypeNM" readonly>
                                </div>

                                <div class="col-sm-2 m-bottom-15">
                                    <label>Client Group</label>
                                    <input class="form-control" type="text" id="clientGroupNM" ng-model="data.clientGroupNM" readonly>
                                </div>

                                <div class="col-sm-2 m-bottom-15">
                                    <label>First Bussiness year</label>
                                    <input class="form-control" type="text" id="haveBusinessRelationshipFromYear" ng-model="data.haveBusinessRelationshipFromYear" readonly>
                                </div>

                                <div class="col-sm-2 m-bottom-15">
                                    <label>Relationship Type</label>
                                    <input class="form-control" type="text" ng-model="data.clientRelationshipTypeNM" readonly>
                                </div>

                                <div class="col-sm-2 m-bottom-15">
                                    <label>VAT No</label>
                                    <input class="form-control" type="text" ng-model="data.vatNo" readonly>
                                </div>

                                <div class="col-sm-2 m-bottom-15">
                                    <label>GLN Number</label>
                                    <input class="form-control" type="text" ng-model="data.glnNumber" readonly>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-2 m-bottom-15">
                                    <label>Rating</label>
                                    <input class="form-control" type="text" ng-model="data.rating" readonly>
                                </div>

                                <div class="col-sm-5">
                                    <label>Credit Sale URL</label>
                                    <input class="form-control" type="text" ng-model="data.creditSafeURL" readonly>
                                </div>

                                <div class="col-sm-5">
                                    <label>Remark</label>
                                    <input class="form-control" type="text" ng-model="data.remark" readonly>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-12 m-bottom-15">
                                    <label>Addtional Condition</label>
                                    <textarea class="form-control" ng-model="data.additionalCondition" rows="3" readonly></textarea>
                                </div>
                            </div>

                            <fieldset>
                                <legend>Address</legend>
                                <div class="row">
                                    <div class="col-sm-6 m-bottom-15">
                                        <label>Street address 1</label>
                                        <input class="form-control" type="text" id="streetAddress1" ng-model="data.streetAddress1" readonly>
                                    </div>

                                    <div class="col-sm-6 m-bottom-15">
                                        <label>Street address 2</label>
                                        <input class="form-control" type="text" id="streetAddress2" ng-model="data.streetAddress2" readonly>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-sm-2 m-bottom-15">
                                        <label>Language1</label>
                                        <input class="form-control" type="text" id="streetAddress2" ng-model="data.language1NM" readonly>
                                    </div>

                                    <div class="col-sm-2 m-bottom-15">
                                        <label>Language2</label>
                                        <input class="form-control" type="text" id="streetAddress2" ng-model="data.language2NM" readonly>
                                    </div>

                                    <div class="col-sm-2 m-bottom-15">
                                        <label>Language3</label>
                                        <input class="form-control" type="text" id="streetAddress2" ng-model="data.language3NM" readonly>
                                    </div>
                                </div>
                            </fieldset>
                            <fieldset>
                                <legend>Tracking</legend>
                                <div class="row">
                                    <div class="col-sm-12 m-bottom-15" ng-if="data.createdBy">
                                        <label>
                                            Created By
                                            <a href="@Url.Action("Detail", "EmployeeMng", new { id = UrlParameter.Optional })/{{data.createdBy}}" data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600">
                                                {{data.creatorName}}
                                            </a>
                                            on
                                            {{data.createdDate}}
                                        </label>
                                    </div>

                                    <div class="col-sm-12 m-bottom-15" ng-if="data.updatedBy">
                                        Updated By
                                        <a href="@Url.Action("Detail", "EmployeeMng", new { id = UrlParameter.Optional })/{{data.updatedBy}}" data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600">
                                            {{data.updatorName}}
                                        </a>
                                        on
                                        {{data.updatedDate}}
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                        <!-- Business card -->
                        <div class="col-col-12 tab-pane" id="cardtab">
                            <div id="card-section" class="well-sm col-sm-12" style="background: #fff;">
                                <div>
                                    <div class="widget-body">
                                        <div id="searchResult" class="tilsoft-table-wrapper">
                                            <div class="row image-wrapper" style="width: auto;border:1px solid #ddd;">
                                                <section ng-repeat="data in clientBusinessCardDTO" class="col-sm-6">
                                                    <div class="row">
                                                        <p style="margin: 15px 0px 0px 0px;height:100px;padding:10px;color:#000;text-align:left;font-size:12px;overflow:hidden;">
                                                            <strong>Info: </strong>{{data.description}}
                                                            <br />
                                                            <span>
                                                                <strong>Remark: </strong>{{data.remark}}
                                                            </span>
                                                            <br />
                                                            <strong>Name: </strong>
                                                            <a ng-if="data.controllerID > 0" href="@Url.Action("Detail", "EmployeeMng", new { id = UrlParameter.Optional })/{{data.controllerID}}" dat data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600">
                                                                <i class="fa fa-user"></i>  {{data.controllerName}}
                                                            </a>
                                                            <a ng-if="data.otherName != null && data.controllerID == null">
                                                                <i class="fa fa-user"></i>  {{data.otherName}}
                                                            </a>
                                                        </p>
                                                    </div>
                                                    <div class="row">
                                                        <div style="padding: 10px;" class="col-sm-6">
                                                            <a data-featherlight="image" href="{{data.frontFileLocation}}" class="input-group" style="display:block;">
                                                                <div class="img m-bottom-15" style="background: url('{{data.frontThumbnailLocation}}') center center no-repeat;background-size:100%;"></div>
                                                            </a>
                                                        </div>
                                                        <div style="padding: 10px;" class="col-sm-6">
                                                            <a data-featherlight="image" href="{{data.behindFileLocation}}" class="input-group" style="display:block;">
                                                                <div class="img m-bottom-15" style="background: url('{{data.behindThumbnailLocation}}') center center no-repeat;background-size:100%;"></div>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </section>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- estimated addtional cost -->
                        <div class="tab-pane" id="additionalCostTab">
                            <div class="row">
                                <div class="col-sm-12 m-bottom-15">
                                    <style>
                                        #est-section .tilsoft-table-header div {
                                            height: 75px;
                                        }
                                    </style>

                                    <div id="est-section" class="tilsoft-table-wrapper">
                                        <div class="tilsoft-table">
                                            <div class="tilsoft-table-header" style="width: 1200px;">
                                                <div style="width: 85px;">SEASON</div>
                                                <div style="width: 100px">% INTEREST COST <br /> (1)</div>
                                                <div style="width: 80px">% LC COST <br /> (2)</div>
                                                <div style="width: 130px">TRANSPORTATION PER CONTAINER &euro; <br /> (3)</div>
                                                <div style="width: 100px">% DEFAULT COMMISSION <br /> (4)</div>
                                                <div style="width: 105px">% DISCOUNT / BONUS <br /> (5)</div>
                                                <div style="width: 105px">% DAMAGE <br /> (6)</div>
                                                <div style="width: 100px">TESTING COST $ <br /> (7)</div>
                                                <div style="width: 100px">SAMPLE COST $ <br /> (8)</div>
                                                <div style="width: 100px">SPAREPART COST $ <br /> (9)</div>
                                                <div style="width: 150px">CONFIRMED BY</div>
                                                <div></div>
                                            </div>
                                            <div class="tilsoft-table-body" style="width: 1200px; height: auto; max-height: 450px; margin-top: 75px;">
                                                <table>
                                                    <tr ng-repeat="item in estimatedAdditionalCost | orderBy: '-season'">
                                                        <td style="width: 85px; text-align:center">{{item.season}}</td>
                                                        <td style="width: 100px; text-align:right">{{item.interestCostPercent | number : 4}}{{item.interestCostPercent ? '%' : ''}}</td>
                                                        <td style="width: 80px; text-align:right">{{item.lcCostPercent | number : 4}}{{item.lcCostPercent ? '%' : ''}}</td>
                                                        <td style="width: 130px; text-align:right">{{item.estTransportationPerContainerEUR | currency : '€' : 2}}</td>
                                                        <td style="width: 100px; text-align:right">{{item.defaultCommissionPercent | number : 4}}{{item.defaultCommissionPercent ? '%' : ''}}</td>
                                                        <td style="width: 105px; text-align:right">{{item.bonusPercent | number : 2}}{{item.bonusPercent ? '%' : ''}}</td>
                                                        <td style="width: 105px; text-align:right">{{item.damagePercent | number : 2}}%</td>
                                                        <td style="width: 100px; text-align:right">{{item.inspectionCostUSD | currency : '$' : 2}}</td>
                                                        <td style="width: 100px; text-align:right">{{item.sampleCostUSD | currency : '$' : 2}}</td>
                                                        <td style="width: 100px; text-align:right">{{item.sparepartCostUSD | currency : '$' : 2}}</td>
                                                        <td style="width: 150px;">
                                                            <a ng-if="item.confirmedBy" href="@Url.Action("Detail", "EmployeeMng", new { id = UrlParameter.Optional })/{{item.confirmedBy}}" da data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600">
                                                                <i class="fa fa-user"></i> {{item.confirmNM}}
                                                            </a>
                                                        </td>
                                                        <td></td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!----------Client Requirements----------->
                        <div class="tab-pane" id="tabclientrequirement">
                            <div class="row">
                                <div class="col-sm-12 m-bottom-15">
                                    <table>
                                        <tr>
                                            <td style="width:350px;border-right:1px solid #ccc">
                                                <h5 style="text-align:center"><b>General</b></h5>
                                            </td>
                                            <td style="width:350px;border-right:1px solid #ccc">
                                                <h5 style="text-align:center"><b>Packaging</b></h5>
                                            </td>
                                            <td style="width:350px;">
                                                <h5 style="text-align:center"><b>Testing</b></h5>
                                            </td>
                                            <td></td>
                                        </tr>
                                        <tr style="vertical-align: top">
                                            <td style="width:350px;border-right:1px solid #ccc;">
                                                <table>
                                                    <tbody ng-repeat="item1 in clientAdditionalConditionOverviewDTO | filter : {'additionalConditionTypeID' : 1}">
                                                        <tr>
                                                            <td>
                                                                <b style="margin-left:10px">- {{item1.additionalConditionNM}}</b>
                                                            </td>
                                                        </tr>
                                                        <tr ng-repeat="itema in clientAdditionalConditionDTOShow | listGeneralFilter : item1.additionalConditionNM">
                                                            <td>
                                                                <ul ng-if="itema.activeFactory==true" style="color:green">
                                                                    <li>
                                                                        {{itema.remark}} - {{itema.whoToPayTypeNM}} - <a ng-if="itema.attachFileURL != null && itema.attachFileURL != ''" href="{{itema.attachFileURL}}">View File</a>
                                                                    </li>
                                                                </ul>
                                                                <ul ng-if="itema.activeFactory==false || itema.activeFactory==null">
                                                                    <li>
                                                                        {{itema.remark}} - {{itema.whoToPayTypeNM}} - <a class="btn btn-success" ng-if="itema.attachFileURL != null && itema.attachFileURL != ''" href="{{itema.attachFileURL}}">View File</a>
                                                                    </li>
                                                                </ul>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </td>
                                            <td style="width:350px;border-right:1px solid #ccc;">
                                                <table>
                                                    <tbody ng-repeat="item2 in clientAdditionalConditionOverviewDTO | filter: {'additionalConditionTypeID' : 3}">
                                                        <tr>
                                                            <td>
                                                                <b style="margin-left:10px">- {{item2.additionalConditionNM}}</b>
                                                            </td>
                                                        </tr>
                                                        <tr ng-repeat="itemb in clientAdditionalConditionDTOShow | listPackagingFilter : item2.additionalConditionNM">
                                                            <td>
                                                                <ul ng-if="itemb.activeFactory==true" style="color:green">
                                                                    <li>
                                                                        {{itemb.remark}} - {{itemb.whoToPayTypeNM}} - <a ng-if="itemb.attachFileURL != null && itemb.attachFileURL != ''" href="{{itemb.attachFileURL}}">View File</a>
                                                                    </li>
                                                                </ul>
                                                                <ul ng-if="itemb.activeFactory==false || itemb.activeFactory==null">
                                                                    <li>
                                                                        {{itemb.remark}} - {{itemb.whoToPayTypeNM}} - <a class="btn btn-success" ng-if="itemb.attachFileURL != null && itemb.attachFileURL != ''" href="{{itemb.attachFileURL}}">View File</a>
                                                                    </li>
                                                                </ul>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </td>
                                            <td style="width:350px;">
                                                <table>
                                                    <tbody ng-repeat="item3 in clientAdditionalConditionOverviewDTO | filter: {'additionalConditionTypeID' :2}">
                                                        <tr>
                                                            <td>
                                                                <b style="margin-left:10px">- {{item3.additionalConditionNM}}</b>
                                                            </td>
                                                        </tr>
                                                        <tr ng-repeat="itemc in clientAdditionalConditionDTOShow | listTestingFilter : item3.additionalConditionNM">
                                                            <td>
                                                                <ul ng-if="itemc.activeFactory==true" style="color:green">
                                                                    <li>
                                                                        {{itemc.remark}} - {{itemc.whoToPayTypeNM}} - <a ng-if="itemc.attachFileURL != null && itemc.attachFileURL != ''" href="{{itemc.attachFileURL}}">View File</a>
                                                                    </li>
                                                                </ul>
                                                                <ul ng-if="itemc.activeFactory==false || itemc.activeFactory==null">
                                                                    <li>
                                                                        {{itemc.remark}} - {{itemc.whoToPayTypeNM}} - <a class="btn btn-success" ng-if="itemc.attachFileURL != null && itemc.attachFileURL != ''" href="{{itemc.attachFileURL}}">View File</a>
                                                                    </li>
                                                                </ul>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </td>
                                            <td></td>
                                        </tr>

                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="frmDetail" class="modal fade" style="display: none;" data-backdrop="static">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button aria-hidden="true" data-dismiss="modal" class="close" type="button">
                        ×
                    </button>
                    <h4 id="myModalLabel" class="modal-title">{{productionItemForm.productionItemID==0?'Create New Item (Material,Component)':'Item Infomation'}}</h4>
                </div>
                <div class="modal-body smart-form">
                    <fieldset>

                        @*OFFER DETAIL*@
                        <div class="row" ng-if="viewDetailForm.moduleName=='OFFER'">
                            <section class="col col-lg-12">
                                <div class="tilsoft-table">
                                    <div class="tilsoft-table-body" style="margin-top:0px">
                                        <table>
                                            <tr>
                                                <th>Product</th>
                                                <th style="width:160px">Price</th>
                                                <th style="width:300px">Other</th>
                                            </tr>
                                            <tr ng-repeat="item in viewDetailForm.data">
                                                <td>
                                                    <strong>{{item.articleCode}}</strong><br />
                                                    {{item.description}}
                                                    <div class="note">
                                                        <strong>Qnt/40HC</strong>: {{item.orderQntIn40HC | number : 0}}
                                                        <br />
                                                        <strong>Quantity</strong>: {{item.quantity | number : 0}}
                                                    </div>
                                                </td>
                                                <td>
                                                    <strong>Sale Price: </strong>{{item.salePriceCalculated | number : 2}} {{item.currency=='USD'?'$':''}}{{item.currency=='EUR'?'€' : ''}} <br />
                                                    <strong>Unit Price: </strong>{{item.unitPrice | number : 2}} {{item.currency=='USD'?'$':''}}{{item.currency=='EUR'?'€' : ''}} <br />
                                                    <strong>Final Price: </strong>{{item.finalPrice | number : 2}} {{item.currency=='USD'?'$':''}}{{item.currency=='EUR'?'€' : ''}}<br />
                                                    <strong>VAT Amount: </strong>{{item.vatAmount | number : 2}} {{item.currency=='USD'?'$':''}}{{item.currency=='EUR'?'€' : ''}}<br />
                                                    <strong>Total Amount: </strong>{{item.totalAmount | number : 2}} {{item.currency=='USD'?'$':''}}{{item.currency=='EUR'?'€' : ''}}
                                                </td>
                                                <td>
                                                    <strong>Client Art Code: </strong>{{item.clientArticleCode}}<br />
                                                    <strong>Client Art Name: </strong>{{item.clientArticleName}}<br />
                                                    <strong>Client Order Number: </strong>{{item.clientOrderNumber}}<br />
                                                    <strong>Client EAN Code: </strong>{{item.clientEANCode}}
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </section>
                        </div>

                        @*SALEORDER DETAIL*@
                        <div class="row" ng-if="viewDetailForm.moduleName=='PI'">
                            <section class="col col-lg-12">
                                <div class="tilsoft-table">
                                    <div class="tilsoft-table-body" style="margin-top:0px">
                                        <table>
                                            <tr>
                                                <th>Product</th>
                                                <th style="width:190px">Price</th>
                                                <th style="width:300px">Other</th>
                                            </tr>
                                            <tr ng-repeat="item in viewDetailForm.data">
                                                <td>
                                                    <strong>{{item.articleCode}}</strong><br />
                                                    {{item.description}}
                                                    <div class="note">
                                                        <strong>Offer Qnt</strong>: {{item.offerQnt | number : 0}}
                                                    </div>
                                                </td>
                                                <td>
                                                    <strong>Order Qnt: </strong>{{item.orderQnt | number : 2}}<br />
                                                    <strong>Unit Price: </strong>{{item.unitPrice | number : 2}} {{item.currency=='USD'?'$':''}}{{item.currency=='EUR'?'€' : ''}} <br />
                                                    <strong>Total Amount: </strong>{{item.orderQnt * item.unitPrice | number : 2}} {{item.currency=='USD'?'$':''}}{{item.currency=='EUR'?'€' : ''}}
                                                </td>
                                                <td>
                                                    <strong>Client Art Code: </strong>{{item.clientArticleCode}}<br />
                                                    <strong>Client Art Name: </strong>{{item.clientArticleName}}<br />
                                                    <strong>Client EAN Code: </strong>{{item.clientEANCode}}
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </section>
                        </div>

                        @*FOB INVOICE DETAIL*@
                        <div class="row" ng-if="viewDetailForm.moduleName=='CI'&&viewDetailForm.ciType==1">
                            <section class="col col-lg-12">
                                <div class="tilsoft-table">
                                    <div class="tilsoft-table-body" style="margin-top:0px">
                                        <table>
                                            <tr>
                                                <th>Product</th>
                                                <th style="width:190px">Price</th>
                                                <th style="width:200px">Other</th>
                                            </tr>
                                            <tr ng-repeat="item in viewDetailForm.data">
                                                <td>
                                                    <strong>{{item.articleCode}}</strong><br />
                                                    {{item.description}}
                                                </td>
                                                <td>
                                                    <strong>Qnt: </strong>{{item.quantity | number : 2}}<br />
                                                    <strong>Unit Price: </strong>{{item.unitPrice | number : 2}} {{item.currency=='USD'?'$':''}}{{item.currency=='EUR'?'€' : ''}} <br />
                                                    <strong>Total Amount: </strong>{{item.amount | number : 2}} {{item.currency=='USD'?'$':''}}{{item.currency=='EUR'?'€' : ''}}
                                                </td>
                                                <td>
                                                    <strong>Container No: </strong>{{item.containerNo}}<br />
                                                    <strong>Seal No: </strong>{{item.sealNo}}<br />
                                                    <strong>Container Type: </strong>{{item.containerTypeNM}}<br />
                                                    <strong>ProformaInvoice No: </strong>{{item.proformaInvoiceNo}}
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </section>
                        </div>

                        @*WAREHOUSE INVOICE DETAIL*@
                        <div class="row" ng-if="viewDetailForm.moduleName=='CI'&&viewDetailForm.ciType==2">
                            <section class="col col-lg-12">
                                <div class="tilsoft-table">
                                    <div class="tilsoft-table-body" style="margin-top:0px">
                                        <table>
                                            <tr>
                                                <th>Product</th>
                                                <th style="width:190px">Price</th>
                                                <th style="width:200px">Other</th>
                                            </tr>
                                            <tr ng-repeat="item in viewDetailForm.data">
                                                <td>
                                                    <strong>{{item.articleCode}}</strong><br />
                                                    {{item.description}}
                                                </td>
                                                <td>
                                                    <strong>Qnt: </strong>{{item.quantity | number : 2}}<br />
                                                    <strong>Unit Price: </strong>{{item.unitPrice | number : 2}} {{item.currency=='USD'?'$':''}}{{item.currency=='EUR'?'€' : ''}} <br />
                                                    <strong>Total Amount: </strong>{{item.amount | number : 2}} {{item.currency=='USD'?'$':''}}{{item.currency=='EUR'?'€' : ''}}
                                                </td>
                                                <td>
                                                    <strong>CMR No: </strong>{{item.cmrNo}}<br />
                                                    <strong>ProformaInvoice No: </strong>{{item.proformaInvoiceNo}}
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </section>
                        </div>

                        @*OTHER INVOICE*@
                        <div class="row" ng-if="viewDetailForm.moduleName=='CI'&&viewDetailForm.ciType==3">
                            <section class="col col-lg-12">
                                <div class="tilsoft-table">
                                    <div class="tilsoft-table-body" style="margin-top:0px">
                                        <table>
                                            <tr>
                                                <th>Product</th>
                                                <th style="width:190px">Price</th>
                                            </tr>
                                            <tr ng-repeat="item in viewDetailForm.data">
                                                <td>
                                                    <strong>{{item.articleCode}}</strong><br />
                                                    {{item.description}}
                                                </td>
                                                <td>
                                                    <strong>Qnt: </strong>{{item.quantity | number : 2}}<br />
                                                    <strong>Unit Price: </strong>{{item.unitPrice | number : 2}} {{item.currency=='USD'?'$':''}}{{item.currency=='EUR'?'€' : ''}} <br />
                                                    <strong>Total Amount: </strong>{{item.totalAmount | number : 2}} {{item.currency=='USD'?'$':''}}{{item.currency=='EUR'?'€' : ''}}
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </section>
                        </div>

                    </fieldset>
                </div>
                <div class="modal-footer">
                    <button data-dismiss="modal" class="btn btn-primary" type="button">
                        OK
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="frmPIResult" class="modal fade" style="display: none;" data-backdrop="static">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button aria-hidden="true" data-dismiss="modal" class="close" type="button">
                        ×
                    </button>
                    <h4 class="modal-title">Select P/I to continue</h4>
                </div>
                <div class="modal-body smart-form no-padding">
                    <fieldset style="padding: 0px;">
                        <section>
                            <div avs-scroll grid-handler="gridHandler" class="tilsoft-table-wrapper">
                                <div class="tilsoft-table">
                                    <div class="tilsoft-table-header" style="width: 800px;">
                                        <div style="width: 150px; font-size: 12px;"></div>
                                        <div style="width: 120px; font-size: 12px;">P/I</div>
                                        <div style="width: 120px; font-size: 12px;">Date</div>
                                        <div style="font-size: 12px;">&nbsp;</div>
                                    </div>
                                    <div class="tilsoft-table-body margin-top" style="width: 800px;">
                                        <table>
                                            <tr ng-repeat="item in piSearchResult">
                                                <td style="width: 150px; text-align: center;">
                                                    <a href="@relationshipViewUrl?id={{item.saleOrderID}}&t=s" target="_blank" class="btn btn-default btn-xs">Relational Map</a>
                                                </td>
                                                <td style="width: 120px; text-align: center;"><a href="@saleOrderViewUrl/{{item.saleOrderID}}/{{item.offerID}}" target="_blank">{{item.proformaInvoiceNo}}</a></td>
                                                <td style="width: 120px; text-align: center;">{{item.invoiceDate}}</td>
                                                <td>&nbsp;</td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </fieldset>
                </div>
                <div class="modal-footer">
                    <button data-dismiss="modal" class="btn btn-default" type="button">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="ratingExplaination" class="modal fade" style="display: none;" data-backdrop="static">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button aria-hidden="true" data-dismiss="modal" class="close" type="button">
                        ×
                    </button>
                    <h4 class="modal-title">How the rating system work ?</h4>
                </div>
                <div class="modal-body smart-form no-padding">
                    <fieldset style="padding: 0px;">
                        <section>
                            <table class="table table-bordered table-striped">
                                <tbody>
                                    <tr>
                                        <td><span class="label bg-color-green">GOOD</span></td>
                                        <td>
                                            (Total ontime containers + total late less than 1 week containers) = 90% of total shipped containers
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><span class="label bg-color-purple">OK</span></td>
                                        <td>
                                            (Total ontime containers + total late less than 1 week containers) from 70% to 90% of total shipped containers
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><span class="label bg-color-red">NOT OK</span></td>
                                        <td>
                                            (Total ontime containers + total late less than 1 week containers) less than 70% of total shipped containers
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </section>
                    </fieldset>
                </div>
                <div class="modal-footer">
                    <button data-dismiss="modal" class="btn btn-default" type="button">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="frmAvailablePurchasingPrice" class="modal fade">
        <div class="modal-dialog modal-lg">
            <div class="modal-content" style="margin-top:90px !important">
                <div class="modal-header">
                    <button aria-hidden="true" data-dismiss="modal" class="close" type="button">
                        ×
                    </button>
                    <h4 class="modal-title">Available Purchasing Price</h4>
                </div>
                <div class="modal-body smart-form" style="padding: 0px;">
                    <div>
                        <div class="widget-body">
                            <table class="table table-bordered table-striped" style="box-sizing: border-box;">
                                <thead>
                                    <tr>
                                        @*<th style="width: 50px;"></th>*@
                                        <th style="width: 100px;">Factory</th>
                                        <th style="width: 100px;">Price</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody ng-repeat="category in offersmargin.planingPurchasingPriceSourceDTOs">
                                    <tr>
                                        <td colspan="4">
                                            {{category.planingPurchasingPriceSourceNM}}
                                        </td>
                                    </tr>
                                    <tr ng-repeat="item in $parent.currentOfferLineItem.planingPurchasingPriceDTOs | filter: {planingPurchasingPriceSourceID : category.planingPurchasingPriceSourceID}" ng-class="event.isSelected(item.planingPurchasingPriceSourceID) ? 'price':''">
                                        @*<td style="text-align: center;">
                                                <a href="javascript:void(0)" class="btn btn-default btn-xs" ng-click="$parent.selectPlaningPurchasingPrice(item)">Select</a>
                                            </td>*@
                                        <td style="text-align: center;">{{item.factoryUD}}</td>

                                        <td ng-if="item.planingPurchasingPriceSourceID == 1" style="text-align: right;">
                                            <a style="color: blue;" href="@PurchasingPriceMngMarginUrl{{$parent.currentOfferLineItem.articleCode}}&season={{$parent.offersmargin.season}}" target="_blank" title="CONFIRMED PRICE">{{item.purchasingPrice | currency:'$':2}}</a>
                                        </td>
                                        <td ng-if="item.planingPurchasingPriceSourceID == 2" style="text-align: right;">
                                            <text style="color: green;" title="CONFIGURED PRICE">{{item.purchasingPrice | currency:'$':2}}</text>
                                        </td>
                                        <td ng-if="item.planingPurchasingPriceSourceID == 3" style="text-align: right;">
                                            <text style="color: orange;" title="MANUALLY KEY IN EST. PRICE">{{item.purchasingPrice | currency:'$':2}}</text>
                                        </td>
                                        <td ng-if="item.planingPurchasingPriceSourceID == 8" style="text-align: right;">
                                            <a style="color: darkviolet;" href="@PurchasingPriceMngMarginUrl{{$parent.currentOfferLineItem.articleCode}}&season={{$parent.offersmargin.season}}" target="_blank" title="CURRENT SUPPLIER">{{item.purchasingPrice | currency:'$':2}}</a>
                                        </td>

                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td colspan="4" ng-if="($parent.currentOfferLineItem.planingPurchasingPriceDTOs | filter: {planingPurchasingPriceSourceID : category.planingPurchasingPriceSourceID}).length === 0" style="text-align: center;">
                                            N/A
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

@section pagejs {
    <script type="text/javascript">
        var context = {
            serviceUrl: '@(System.Configuration.ConfigurationManager.AppSettings["BackendServiceUrl"])api/client/',
            baseUrl: '@Url.Action("Index", "AgendaMng", new { id = UrlParameter.Optional })#/',
            token: '@Session[Frontend.Customize.Common.ProjectDefinition.TOKEN_SESSION]',
            id: @ViewBag.ID,
            autoTab: '@autoTab',
            autoSeason: '@autoSeason',
            reportUrl: '@System.Configuration.ConfigurationManager.AppSettings["BackendReportUrl"]',
            viewUrl: '@Url.Action("Overview", "Client", new { id = UrlParameter.Optional })/@ViewBag.ID'
        };

        $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
            var target = $(e.target).attr("href");
            scope.$apply(function(){
                scope.event.getLinkedData(target);
            });
        });
    </script>
    <script type="text/javascript">

        if (@ViewBag.ID !== 0) {
            $(document).ready(function () {
                $('a[data-toggle="tab"]').on('show.bs.tab', function (e) {
                    localStorage.setItem('activeTab', $(e.target).attr('href'));
                });
                var activeTab = localStorage.getItem('activeTab');
                if (activeTab) {
                    $('.nav-tabs a[href="' + activeTab + '"]').tab('show');
                }
            });
        }
    </script>
    <script src="~/Views/Client/overview.js?c=@System.Guid.NewGuid().ToString().Replace("-", "")"></script>
    <script src="~/Views/Client/service.js?c=@System.Guid.NewGuid().ToString().Replace("-", "")"></script>
}