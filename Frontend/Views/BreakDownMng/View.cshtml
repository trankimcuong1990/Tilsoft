@{
    var guid = Guid.NewGuid().ToString().Replace("-", "");
    var serviceRoot = System.Configuration.ConfigurationManager.AppSettings["BackendServiceUrl"];
    var token = Session[Frontend.Customize.Common.ProjectDefinition.TOKEN_SESSION];

    ViewBag.Title = "Breakdown Overview";
    ViewBag.Module = "Breakdown Overview";
    ViewBag.Icon = "fa-eye";

    Frontend.APIDTO.APIUserInformation userInfo = (Frontend.APIDTO.APIUserInformation)Session[Frontend.Customize.Common.ProjectDefinition.USER_INFO_SESSION];
    int companyId = userInfo.Data.CompanyID;
    if (companyId != 1)
    {
        companyId = 3;
    }

    string sampleProductId = "0";
    if (Request.Params.AllKeys.Contains("sampleProductId"))
    {
        sampleProductId = Request.Params["sampleProductId"].ToString();
    }

    string offerSeasonDetailId = "0";
    if (Request.Params.AllKeys.Contains("offerSeasonDetailId"))
    {
        offerSeasonDetailId = Request.Params["offerSeasonDetailId"].ToString();
    }
}

<form class="row" name="viewForm" id="main-form">
    <article class="col-sm-12 col-md-12 col-lg-12">
        <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false" data-widget-colorbutton="false" data-widget-fullscreenbutton="false" data-widget-deletebutton="false">
            <header>
                <span class="widget-icon"> <i class="fa fa-info txt-color-darken"></i> </span>
                <h2>View Item Information</h2>
            </header>
            <div>
                <div class="widget-body no-padding">
                    <div class="smart-form">
                        <fieldset>
                            <div class="row">
                                <section class="col col-sm-3">
                                    <div style="border: solid 1px #ddd; text-align: center;">
                                        <a href="{{data.fileLocation}}" data-featherlight="image">
                                            <img style="width: 100%;" ng-src="{{data.thumbnailLocation}}" />
                                        </a>
                                    </div>
                                </section>
                                <section class="col col-sm-9">
                                    <div class="tilsoft-table-wrapper">
                                        <div class="tilsoft-table">
                                            <div class="tilsoft-table-body" style="margin-top: 0px; width: 100%;">
                                                <table>
                                                    <tbody>
                                                        <tr>
                                                            <td style="width: 170px; background: #f9f9f9;">BREAKDOWN CODE</td>
                                                            <td colspan="{{(data.sampleProductID ? 2 : 4)}}">{{data.breakdownUD}} ({{data.modelID ? 'MODEL' : 'SAMPLE'}})</td>
                                                            <td style="width: 170px; background: #f9f9f9;" ng-if="data.sampleProductID">CLIENT</td>
                                                            <td colspan="2" ng-if="data.sampleProductID">{{data.clientUD}}</td>
                                                        </tr>
                                                        <tr>
                                                            <td style="width: 170px; background: #f9f9f9;">ITEM DESCRIPTION</td>
                                                            <td colspan="4" ng-if="data.modelID">
                                                                <b>{{data.modelUD}}</b>
                                                                <br />
                                                                {{data.modelNM}}
                                                            </td>
                                                            <td colspan="4" ng-if="data.sampleProductID">
                                                                <b>{{data.sampleProductUD}}</b>
                                                                <br />
                                                                {{data.articleDescription}}
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td style="width: 170px; background: #f9f9f9;">C.M SERVICES</td>
                                                            <td colspan="2" style="text-align: right;">
                                                                <label ng-if="data.seasonSpecPercent">{{data.seasonSpecPercent | number:2}} %</label>
                                                            </td>
                                                            <td style="width: 170px; background: #f9f9f9;">EXCHANGE RATE</td>
                                                            <td colspan="2" style="text-align: right;">
                                                                <label ng-if="exRate">{{exRate | number:0}}</label>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td style="width: 170px; background: #f9f9f9;">SHIPPED FROM</td>
                                                            <td colspan="4">
                                                                <select avs-select ng-data-source="factoryID">
                                                                    <option value=""></option>
                                                                    <option value="{{factory.factoryID}}" ng-repeat="factory in supportFactory">{{factory.factoryUD}} ({{(factory.exportCost40HC == null) ? 'null' : (factory.exportCost40HC | number:0)}})</option>
                                                                </select>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td style="width: 170px; background: #f9f9f9;"></td>
                                                            <td style="background: #f9f9f9; text-align: center;" colspan="2">AVF</td>
                                                            <td style="background: #f9f9f9; text-align: center;" colspan="2">AVT</td>
                                                        </tr>
                                                        <tr>
                                                            <td style="width: 170px; background: #f9f9f9;">LOAD ABILITY</td>
                                                            <td colspan="2" style="text-align: right;">
                                                                {{method.getLoadAbility(5, selectedOptions.packingCostOptionID, 1) | number:0}}
                                                            </td>
                                                            <td colspan="2" style="text-align: right;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getLoadAbility(5, selectedOptions.packingCostOptionID, 3) | number:0}}
                                                                </label>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td style="background: #f9f9f9;" rowspan="2">COST PRICE</td>
                                                            <td style="background: #f9f9f9; text-align: center;">VND</td>
                                                            <td style="background: #f9f9f9; text-align: center;">USD</td>
                                                            <td style="background: #f9f9f9; text-align: center;">VND</td>
                                                            <td style="background: #f9f9f9; text-align: center;">USD</td>
                                                        </tr>
                                                        <tr>
                                                            <td style="text-align: right;">
                                                                {{method.getTotalAmount(1) | number:0}}
                                                            </td>
                                                            <td style="text-align: right;">
                                                                {{method.getTotalAmountUSD(exRate, 1) | currency:'$':2}}
                                                            </td>
                                                            <td style="text-align: right;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getTotalAmount(3) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="text-align: right;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getTotalAmountUSD(exRate, 3) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td style="width: 170px; background: #f9f9f9;">C.M SERVICES AMOUNT</td>
                                                            <td style="text-align: right;">
                                                                {{method.getSpecAmount(data.seasonSpecPercent, 1) | number:0}}
                                                            </td>
                                                            <td style="text-align: right;">
                                                                {{method.getSpecAmountUSD(data.seasonSpecPercent, exRate, 1) |  currency:'$':2}}
                                                            </td>
                                                            <td style="text-align: right;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSpecAmount(data.seasonSpecPercent, 3) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="text-align: right;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSpecAmountUSD(data.seasonSpecPercent, exRate, 3) |  currency:'$':2}}
                                                                </label>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td style="width: 170px; background: #f9f9f9;">SHIPPING FEE</td>
                                                            <td style="text-align: right;">
                                                                {{method.getShippingFee(factoryID, 5, selectedOptions.packingCostOptionID, 1) | number:0}}
                                                            </td>
                                                            <td style="text-align: right;">
                                                                {{method.getShippingFeeUSD(factoryID, 5, selectedOptions.packingCostOptionID, exRate, 1) | currency:'$':2}}
                                                            </td>
                                                            <td style="text-align: right;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getShippingFee(factoryID, 5, selectedOptions.packingCostOptionID, 3) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="text-align: right;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getShippingFeeUSD(factoryID, 5, selectedOptions.packingCostOptionID, exRate, 3) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td style="width: 170px; background: #f9f9f9;">TOTAL COST PRICE</td>
                                                            <td style="text-align: right;">
                                                                {{method.getTotalCostPrice(data.seasonSpecPercent, factoryID, 5, selectedOptions.packingCostOptionID, 1) | number:0}}
                                                            </td>
                                                            <td style="text-align: right;">
                                                                {{method.getTotalCostPriceUSD(data.seasonSpecPercent, factoryID, 5, selectedOptions.packingCostOptionID, exRate, 1) |  currency:'$':2}}
                                                            </td>
                                                            <td style="text-align: right;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getTotalCostPrice(data.seasonSpecPercent, factoryID, 5, selectedOptions.packingCostOptionID, 3) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="text-align: right;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getTotalCostPriceUSD(data.seasonSpecPercent, factoryID, 5, selectedOptions.packingCostOptionID, exRate, 3) |  currency:'$':2}}
                                                                </label>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td style="width: 170px; background-color: #f9f9f9;">CREATED BY</td>
                                                            <td colspan="4">
                                                                <a href="@Url.Action("Detail", "EmployeeMng", new { id = UrlParameter.Optional })/{{data.createdBy}}" data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600">
                                                                    {{data.creatorName}}
                                                                </a>
                                                                on {{data.createdDate}}
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td style="width: 170px; background-color: #f9f9f9;">UPDATED BY</td>
                                                            <td colspan="4">
                                                                <a href="@Url.Action("Detail", "EmployeeMng", new { id = UrlParameter.Optional })/{{data.updatedBy}}" data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600">
                                                                    {{data.updatorName}}
                                                                </a>
                                                                on {{data.updatedDate}}
                                                            </td>
                                                        </tr>
                                                        <tr style="display: none;">
                                                            <td style="width: 170px; background-color: #f9f9f9;">CONFIRMED BY</td>
                                                            <td colspan="4">
                                                                <div ng-if="data.isConfirmed">
                                                                    <a href="@Url.Action("Detail", "EmployeeMng", new { id = UrlParameter.Optional })/{{data.confirmedBy}}" data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600">
                                                                        {{data.confirmerName}}
                                                                    </a>
                                                                    on {{data.confirmedDate}}
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </div>
                            <div class="row">
                                <section class="col col-sm-12">
                                    <div class="tilsoft-table-wrapper" style="margin-top:5px;" avs-scrollable-table>
                                        <div class="tilsoft-table">
                                            <div class="tilsoft-table-header" style="width: 1280px;">
                                                <div style="width: 30px; height: 90px; line-height: 15px;">#</div>
                                                <div class="no-padding" style="width: 320px; height: 90px;">
                                                    <div class="no-padding" style="width: 100%; height: 30px; border-right: none;">
                                                        <div class="no-padding" style="width: 130px; height: 30px; line-height: 30px;">Categories</div>
                                                        <div class="no-padding" style="width: 100%; height: 30px; line-height: 30px;">Options</div>
                                                    </div>
                                                    <div class="no-padding" style="width: 100%; height: 30px; line-height: 30px; border-right: none;">Breakdown Group VN(EN)</div>
                                                    <div class="no-padding" style="width: 100%; height: 30px; border-right: none;">
                                                        <div class="no-padding" style="width: 75px; height: 30px; line-height: 30px;">Image</div>
                                                        <div class="no-padding" style="width: 55px; height: 30px; line-height: 30px;">Unit</div>
                                                        <div class="no-padding" style="width: 100%; height: 30px; line-height: 30px;">Item Description</div>
                                                    </div>
                                                </div>
                                                <div class="no-padding" style="width: 460px; height: 90px;">
                                                    <div class="no-padding" style="width: 100%; height: 30px; line-height: 30px; border-right: none;">AVF</div>
                                                    <div class="no-padding" style="width: 100%; height: 30px; border-right: none;">
                                                        <div class="no-padding" style="width: 180px; height: 30px; line-height: 30px;">Group Quantity</div>
                                                        <div class="no-padding" style="width: 140px; height: 30px; line-height: 30px;">Unit Price</div>
                                                        <div class="no-padding" style="width: 100%; height: 30px; line-height: 30px;">Total Amount</div>
                                                    </div>
                                                    <div class="no-padding" style="width: 100%; height: 30px; border-right: none;">
                                                        <div class="no-padding" style="width: 60px; height: 30px; line-height: 30px;">Wasted</div>
                                                        <div class="no-padding" style="width: 70px; height: 30px; line-height: 30px;">Quantity</div>
                                                        <div class="no-padding" style="width: 50px; height: 30px; line-height: 30px;">%</div>
                                                        <div class="no-padding" style="width: 75px; height: 30px; line-height: 30px;">VND</div>
                                                        <div class="no-padding" style="width: 65px; height: 30px; line-height: 30px;">USD</div>
                                                        <div class="no-padding" style="width: 75px; height: 30px; line-height: 30px;">VND</div>
                                                        <div class="no-padding" style="width: 100%; height: 30px; line-height: 30px;">USD</div>
                                                    </div>
                                                </div>
                                                <div class="no-padding" style="width: 460px; height: 90px;">
                                                    <div class="no-padding" style="width: 100%; height: 30px; line-height: 30px; border-right: none;">AVT</div>
                                                    <div class="no-padding" style="width: 100%; height: 30px; border-right: none;">
                                                        <div class="no-padding" style="width: 180px; height: 30px; line-height: 30px;">Group Quantity</div>
                                                        <div class="no-padding" style="width: 140px; height: 30px; line-height: 30px;">Unit Price</div>
                                                        <div class="no-padding" style="width: 100%; height: 30px; line-height: 30px;">Total Amount</div>
                                                    </div>
                                                    <div class="no-padding" style="width: 100%; height: 30px; border-right: none;">
                                                        <div class="no-padding" style="width: 60px; height: 30px; line-height: 30px;">Wasted</div>
                                                        <div class="no-padding" style="width: 70px; height: 30px; line-height: 30px;">Quantity</div>
                                                        <div class="no-padding" style="width: 50px; height: 30px; line-height: 30px;">%</div>
                                                        <div class="no-padding" style="width: 75px; height: 30px; line-height: 30px;">VND</div>
                                                        <div class="no-padding" style="width: 65px; height: 30px; line-height: 30px;">USD</div>
                                                        <div class="no-padding" style="width: 75px; height: 30px; line-height: 30px;">VND</div>
                                                        <div class="no-padding" style="width: 100%; height: 30px; line-height: 30px;">USD</div>
                                                    </div>
                                                </div>
                                                <div style="border-bottom: none;"></div>
                                            </div>
                                            <div class="tilsoft-table-totalrow" style="width: 1280px; margin-top: 90px;">
                                                <div style="width: 351px;">Total</div>
                                                <div style="width: 60px;"></div>
                                                <div style="width: 70px;"></div>
                                                <div style="width: 50px;"></div>
                                                <div style="width: 75px;"></div>
                                                <div style="width: 65px;"></div>
                                                <div style="width: 75px;">
                                                    {{method.getTotalAmount(1) | number:0}}
                                                </div>
                                                <div style="width: 65px;">
                                                    {{method.getTotalAmountUSD(exRate, 1) | currency:'$':2}}
                                                </div>
                                                <div style="width: 60px;"></div>
                                                <div style="width: 70px;"></div>
                                                <div style="width: 50px;"></div>
                                                <div style="width: 75px;"></div>
                                                <div style="width: 65px;"></div>
                                                <div style="width: 75px;">
                                                    <label ng-if="companyID == 3"><b>{{method.getTotalAmount(3) | number:0}}</b></label>
                                                </div>
                                                <div style="width: 65px;">
                                                    <label ng-if="companyID == 3"><b>{{method.getTotalAmountUSD(exRate, 3) | currency:'$':2}}</b></label>
                                                </div>
                                                <div style="border-bottom: none;"></div>
                                            </div>
                                            <div class="tilsoft-table-body" style="width: 1280px; max-height: none; margin-top: 120px;">
                                                <table>
                                                    @* Material *@
                                                    <tbody>
                                                        <tr style="height: 40px;">
                                                            <td style="width: 30px; text-align: center;"><b>1</b></td>
                                                            <td style="width: 130px; text-align: left;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 2 : 0}}"><a href="javascript:void(0)" ng-click="event.openBreakdownDetail(1)"><b>MATERIAL COST</b></a></td>
                                                            <td style="width: 191px;">
                                                                <select class="form-control" ng-if="data.modelID" ng-model="selectedOptions.materialCostOptionID" ng-options="option.breakdownCategoryOptionID as method.getOptionName(option) for option  in data.breakdownCategoryOptionDTOs | filter:{breakdownCategoryID: 1,  companyID: @companyId}:true" ng-change="event.change(selectedOptions.materialCostOptionID, 1);"></select>
                                                            </td>
                                                            <td style="width: 320px; text-align: right; background: #fef6de;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 5 : 0}}"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                <b>{{method.getTotalAmountCategory(1, selectedOptions.materialCostOptionID, 1) | number:0}}</b>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                <b>{{method.getTotalAmountCategoryUSD(1, selectedOptions.materialCostOptionID, exRate, 1) | currency:'$':2}}</b>
                                                            </td>
                                                            <td style="width: 320px; text-align: right; background: #d2fbd2;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 5 : 0}}"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    <b>{{method.getTotalAmountCategory(1, selectedOptions.materialCostOptionID, 3) | number:0}}</b>
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    <b>{{method.getTotalAmountCategoryUSD(1, selectedOptions.materialCostOptionID, exRate, 3) | currency:'$':2}}</b>
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>
                                                    <tbody ng-if="(detailOptions.isMaterial || groupOptions.isMaterial) && (detailOptions.materialOptionDetail | filter : {breakdownCategoryOptionGroupID : null} : true).length > 0">
                                                        <tr ng-repeat="item in detailOptions.materialOptionDetail | filter : {breakdownCategoryOptionGroupID : null} : true">
                                                            <td style="width: 30px; text-align: center;">&nbsp;</td>
                                                            <td style="width: 75px; text-align: center;">
                                                                <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                    <img style="width: 50px;" src="{{item.thumbnailLocation}}" />
                                                                </a>
                                                            </td>
                                                            <td style="width: 55px; text-align: center;">{{item.unitNM}}</td>
                                                            <td style="width: 190px;">
                                                                <b>{{item.productionItemUD}}</b>
                                                                <label>{{item.productionItemNM}}</label>
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #fef6de;">{{item.avfWastedRatePercent | number:2}}</td>
                                                            <td style="width: 70px; text-align: right; background: #fef6de;">{{item.avfQuantity | number:4}}</td>
                                                            <td style="width: 50px; text-align: right; background: #fef6de;"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">{{item.avfPrice | number:0}}</td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getUnitPriceUSD(item.avfPrice, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmount(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountUSD(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtWastedRatePercent | number:2}}</label>
                                                            </td>
                                                            <td style="width: 70px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtQuantity | number:4}}</label>
                                                            </td>
                                                            <td style="width: 50px; text-align: right; background: #d2fbd2;"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtPrice | number:0}}</label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{method.getUnitPriceUSD(item.avtPrice, exRate) | currency:'$':2}}</label>
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmount(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountUSD(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount, exRate) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>
                                                    <tbody ng-repeat="group in groupOptions.materialOptionGroup" ng-if="groupOptions.isMaterial">
                                                        <tr>
                                                            <td style="width: 30px; text-align: center;"></td>
                                                            <td style="width: 320px; text-align: left;" colspan="3"><b>{{group.breakdownCategoryOptionGroupNM}}({{group.breakdownCategoryOptionGroupNMEN}})</b></td>
                                                            <td style="width: 180px; text-align: right; background: #fef6de;" colspan="3">
                                                                <label>{{group.avfGroupQuantity | number:0}}</label>
                                                            </td>
                                                            <td style="width: 130px; text-align: right; background: #fef6de;" colspan="2"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountGroup(1, selectedOptions.materialCostOptionID, group.breakdownCategoryOptionGroupID, group.avfGroupQuantity, 1) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountGroupUSD(1, selectedOptions.materialCostOptionID, group.breakdownCategoryOptionGroupID, group.avfGroupQuantity, exRate, 1) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 180px; text-align: right; background: #d2fbd2;" colspan="3">
                                                                <label ng-if="companyID == 3">{{group.avtGroupQuantity | number:0}}</label>
                                                            </td>
                                                            <td style="width: 130px; text-align: right; background: #d2fbd2;" colspan="2"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountGroup(1, selectedOptions.materialCostOptionID, group.breakdownCategoryOptionGroupID, group.avtGroupQuantity, 3) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountGroupUSD(1, selectedOptions.materialCostOptionID, group.breakdownCategoryOptionGroupID, group.avtGroupQuantity, exRate, 3) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                        <tr ng-repeat="item in detailOptions.materialOptionDetail | filter : {breakdownCategoryOptionGroupID : group.breakdownCategoryOptionGroupID} : true">
                                                            <td style="width: 30px; text-align: center;">&nbsp;</td>
                                                            <td style="width: 75px; text-align: center;">
                                                                <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                    <img style="width: 50px;" src="{{item.thumbnailLocation}}" />
                                                                </a>
                                                            </td>
                                                            <td style="width: 55px; text-align: center;">{{item.unitNM}}</td>
                                                            <td style="width: 190px;">
                                                                <b>{{item.productionItemUD}}</b>
                                                                <label>{{item.productionItemNM}}</label>
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #fef6de;">{{item.avfWastedRatePercent | number:2}}</td>
                                                            <td style="width: 70px; text-align: right; background: #fef6de;">{{item.avfQuantity | number:4}}</td>
                                                            <td style="width: 50px; text-align: right; background: #fef6de;"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">{{item.avfPrice | number:0}}</td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getUnitPriceUSD(item.avfPrice, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmount(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountUSD(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtWastedRatePercent | number:2}}</label>
                                                            </td>
                                                            <td style="width: 70px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtQuantity | number:4}}</label>
                                                            </td>
                                                            <td style="width: 50px; text-align: right; background: #d2fbd2;"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtPrice | number:0}}</label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{method.getUnitPriceUSD(item.avtPrice, exRate) | currency:'$':2}}</label>
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmount(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountUSD(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount, exRate) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>

                                                    @* Frame Material *@
                                                    <tbody>
                                                        <tr style="height: 40px;">
                                                            <td style="width: 30px; text-align: center;"><b>2</b></td>
                                                            <td style="width: 130px; text-align: left;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 2 : 0}}"><a href="javascript:void(0)" ng-click="event.openBreakdownDetail(2)"><b>FRAME COST</b></a></td>
                                                            <td style="width: 191px;">
                                                                <select class="form-control" ng-if="data.modelID" ng-model="selectedOptions.frameCostOptionID" ng-options="option.breakdownCategoryOptionID as method.getOptionName(option) for option  in data.breakdownCategoryOptionDTOs | filter:{breakdownCategoryID: 2,  companyID: @companyId}:true" ng-change="event.change(selectedOptions.frameCostOptionID, 2);"></select>
                                                            </td>
                                                            <td style="width: 320px; text-align: right; background: #fef6de;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 5 : 0}}"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                <b>{{method.getTotalAmountCategory(2, selectedOptions.frameCostOptionID, 1) | number:0}}</b>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                <b>{{method.getTotalAmountCategoryUSD(2, selectedOptions.frameCostOptionID, exRate, 1) | currency:'$':2}}</b>
                                                            </td>
                                                            <td style="width: 320px; text-align: right; background: #d2fbd2;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 5 : 0}}"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    <b>{{method.getTotalAmountCategory(2, selectedOptions.frameCostOptionID, 3) | number:0}}</b>
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    <b>{{method.getTotalAmountCategoryUSD(2, selectedOptions.frameCostOptionID, exRate, 3) | currency:'$':2}}</b>
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>
                                                    <tbody ng-if="(detailOptions.isFrameMaterial || groupOptions.isFrameMaterial) && (detailOptions.frameOptionDetail | filter : {breakdownCategoryOptionGroupID : null} : true).length > 0">
                                                        <tr ng-repeat="item in detailOptions.frameOptionDetail | filter : {breakdownCategoryOptionGroupID : null} : true">
                                                            <td style="width: 30px; text-align: center;">&nbsp;</td>
                                                            <td style="width: 75px; text-align: center;">
                                                                <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                    <img style="width: 50px;" src="{{item.thumbnailLocation}}" />
                                                                </a>
                                                            </td>
                                                            <td style="width: 55px; text-align: center;">{{item.unitNM}}</td>
                                                            <td style="width: 190px;">
                                                                <b>{{item.productionItemUD}}</b>
                                                                <label>{{item.productionItemNM}}</label>
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #fef6de;">{{item.avfWastedRatePercent | number:2}}</td>
                                                            <td style="width: 70px; text-align: right; background: #fef6de;">{{item.avfQuantity | number:4}}</td>
                                                            <td style="width: 50px; text-align: right; background: #fef6de;"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">{{item.avfPrice | number:0}}</td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getUnitPriceUSD(item.avfPrice, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmount(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountUSD(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtWastedRatePercent | number:2}}</label>
                                                            </td>
                                                            <td style="width: 70px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtQuantity | number:4}}</label>
                                                            </td>
                                                            <td style="width: 50px; text-align: right; background: #d2fbd2;"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtPrice | number:0}}</label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{method.getUnitPriceUSD(item.avtPrice, exRate) | currency:'$':2}}</label>
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmount(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountUSD(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount, exRate) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>
                                                    <tbody ng-repeat="group in groupOptions.frameOptionGroup" ng-if="groupOptions.isFrameMaterial">
                                                        <tr>
                                                            <td style="width: 30px; text-align: center;"></td>
                                                            <td style="width: 320px; text-align: left;" colspan="3"><b>{{group.breakdownCategoryOptionGroupNM}}({{group.breakdownCategoryOptionGroupNMEN}})</b></td>
                                                            <td style="width: 180px; text-align: right; background: #fef6de;" colspan="3">
                                                                <label>{{group.avfGroupQuantity | number:0}}</label>
                                                            </td>
                                                            <td style="width: 130px; text-align: right; background: #fef6de;" colspan="2"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountGroup(2, selectedOptions.frameCostOptionID, group.breakdownCategoryOptionGroupID, group.avfGroupQuantity, 1) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountGroupUSD(2, selectedOptions.frameCostOptionID, group.breakdownCategoryOptionGroupID, group.avfGroupQuantity, exRate, 1) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 180px; text-align: right; background: #d2fbd2;" colspan="3">
                                                                <label ng-if="companyID == 3">{{group.avtGroupQuantity | number:0}}</label>
                                                            </td>
                                                            <td style="width: 130px; text-align: right; background: #d2fbd2;" colspan="2"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountGroup(2, selectedOptions.frameCostOptionID, group.breakdownCategoryOptionGroupID, group.avtGroupQuantity, 3) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountGroupUSD(2, selectedOptions.frameCostOptionID, group.breakdownCategoryOptionGroupID, group.avtGroupQuantity, exRate, 3) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                        <tr ng-repeat="item in detailOptions.frameOptionDetail | filter : {breakdownCategoryOptionGroupID : group.breakdownCategoryOptionGroupID} : true">
                                                            <td style="width: 30px; text-align: center;">&nbsp;</td>
                                                            <td style="width: 75px; text-align: center;">
                                                                <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                    <img style="width: 50px;" src="{{item.thumbnailLocation}}" />
                                                                </a>
                                                            </td>
                                                            <td style="width: 55px; text-align: center;">{{item.unitNM}}</td>
                                                            <td style="width: 190px;">
                                                                <b>{{item.productionItemUD}}</b>
                                                                <label>{{item.productionItemNM}}</label>
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #fef6de;">{{item.avfWastedRatePercent | number:2}}</td>
                                                            <td style="width: 70px; text-align: right; background: #fef6de;">{{item.avfQuantity | number:4}}</td>
                                                            <td style="width: 50px; text-align: right; background: #fef6de;"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">{{item.avfPrice | number:0}}</td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getUnitPriceUSD(item.avfPrice, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmount(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountUSD(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtWastedRatePercent | number:2}}</label>
                                                            </td>
                                                            <td style="width: 70px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtQuantity | number:4}}</label>
                                                            </td>
                                                            <td style="width: 50px; text-align: right; background: #d2fbd2;"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtPrice | number:0}}</label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{method.getUnitPriceUSD(item.avtPrice, exRate) | currency:'$':2}}</label>
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmount(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountUSD(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount, exRate) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>

                                                    @* Sub Material *@
                                                    <tbody>
                                                        <tr style="height: 40px;">
                                                            <td style="width: 30px; text-align: center;"><b>3</b></td>
                                                            <td style="width: 130px; text-align: left;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 2 : 0}}"><a href="javascript:void(0)" ng-click="event.openBreakdownDetail(3)"><b>SUB MATERIAL COST</b></a></td>
                                                            <td style="width: 191px;">
                                                                <select class="form-control" ng-if="data.modelID" ng-model="selectedOptions.subMaterialCostOptionID" ng-options="option.breakdownCategoryOptionID as method.getOptionName(option) for option  in data.breakdownCategoryOptionDTOs | filter:{breakdownCategoryID: 3,  companyID: @companyId}:true" ng-change="event.change(selectedOptions.subMaterialCostOptionID, 3);"></select>
                                                            </td>
                                                            <td style="width: 320px; text-align: right; background: #fef6de;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 5 : 0}}"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                <b>{{method.getTotalAmountCategory(3, selectedOptions.subMaterialCostOptionID, 1) | number:0}}</b>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                <b>{{method.getTotalAmountCategoryUSD(3, selectedOptions.subMaterialCostOptionID, exRate, 1) | currency:'$':2}}</b>
                                                            </td>
                                                            <td style="width: 320px; text-align: right; background: #d2fbd2;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 5 : 0}}"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    <b>{{method.getTotalAmountCategory(3, selectedOptions.subMaterialCostOptionID, 3) | number:0}}</b>
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    <b>{{method.getTotalAmountCategoryUSD(3, selectedOptions.subMaterialCostOptionID, exRate, 3) | currency:'$':2}}</b>
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>
                                                    <tbody ng-if="(detailOptions.isSubMaterial || groupOptions.isSubMaterial) && (detailOptions.subMaterialOptionDetail | filter : {breakdownCategoryOptionGroupID : null} : true).length > 0">
                                                        <tr ng-repeat="item in detailOptions.subMaterialOptionDetail | filter : {breakdownCategoryOptionGroupID : null} : true">
                                                            <td style="width: 30px; text-align: center;">&nbsp;</td>
                                                            <td style="width: 75px; text-align: center;">
                                                                <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                    <img style="width: 50px;" src="{{item.thumbnailLocation}}" />
                                                                </a>
                                                            </td>
                                                            <td style="width: 55px; text-align: center;">{{item.unitNM}}</td>
                                                            <td style="width: 190px;">
                                                                <b>{{item.productionItemUD}}</b>
                                                                <label>{{item.productionItemNM}}</label>
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #fef6de;">{{item.avfWastedRatePercent | number:2}}</td>
                                                            <td style="width: 70px; text-align: right; background: #fef6de;">{{item.avfQuantity | number:4}}</td>
                                                            <td style="width: 50px; text-align: right; background: #fef6de;"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">{{item.avfPrice | number:0}}</td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getUnitPriceUSD(item.avfPrice, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmount(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountUSD(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtWastedRatePercent | number:2}}</label>
                                                            </td>
                                                            <td style="width: 70px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtQuantity | number:4}}</label>
                                                            </td>
                                                            <td style="width: 50px; text-align: right; background: #d2fbd2;"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtPrice | number:0}}</label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{method.getUnitPriceUSD(item.avtPrice, exRate) | currency:'$':2}}</label>
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmount(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountUSD(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount, exRate) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>
                                                    <tbody ng-repeat="group in groupOptions.subMaterialOptionGroup" ng-if="groupOptions.isSubMaterial">
                                                        <tr>
                                                            <td style="width: 30px; text-align: center;"></td>
                                                            <td style="width: 320px; text-align: left;" colspan="3"><b>{{group.breakdownCategoryOptionGroupNM}}({{group.breakdownCategoryOptionGroupNMEN}})</b></td>
                                                            <td style="width: 180px; text-align: right; background: #fef6de;" colspan="3">
                                                                <label>{{group.avfGroupQuantity | number:0}}</label>
                                                            </td>
                                                            <td style="width: 130px; text-align: right; background: #fef6de;" colspan="2"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountGroup(3, selectedOptions.subMaterialCostOptionID, group.breakdownCategoryOptionGroupID, group.avfGroupQuantity, 1) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountGroupUSD(3, selectedOptions.subMaterialCostOptionID, group.breakdownCategoryOptionGroupID, group.avfGroupQuantity, exRate, 1) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 180px; text-align: right; background: #d2fbd2;" colspan="3">
                                                                <label ng-if="companyID == 3">{{group.avtGroupQuantity | number:0}}</label>
                                                            </td>
                                                            <td style="width: 130px; text-align: right; background: #d2fbd2;" colspan="2"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountGroup(3, selectedOptions.subMaterialCostOptionID, group.breakdownCategoryOptionGroupID, group.avtGroupQuantity, 3) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountGroupUSD(3, selectedOptions.subMaterialCostOptionID, group.breakdownCategoryOptionGroupID, group.avtGroupQuantity, exRate, 3) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                        <tr ng-repeat="item in detailOptions.subMaterialOptionDetail | filter : {breakdownCategoryOptionGroupID : group.breakdownCategoryOptionGroupID} : true">
                                                            <td style="width: 30px; text-align: center;">&nbsp;</td>
                                                            <td style="width: 75px; text-align: center;">
                                                                <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                    <img style="width: 50px;" src="{{item.thumbnailLocation}}" />
                                                                </a>
                                                            </td>
                                                            <td style="width: 55px; text-align: center;">{{item.unitNM}}</td>
                                                            <td style="width: 190px;">
                                                                <b>{{item.productionItemUD}}</b>
                                                                <label>{{item.productionItemNM}}</label>
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #fef6de;">{{item.avfWastedRatePercent | number:2}}</td>
                                                            <td style="width: 70px; text-align: right; background: #fef6de;">{{item.avfQuantity | number:4}}</td>
                                                            <td style="width: 50px; text-align: right; background: #fef6de;"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">{{item.avfPrice | number:0}}</td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getUnitPriceUSD(item.avfPrice, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmount(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountUSD(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtWastedRatePercent | number:2}}</label>
                                                            </td>
                                                            <td style="width: 70px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtQuantity | number:4}}</label>
                                                            </td>
                                                            <td style="width: 50px; text-align: right; background: #d2fbd2;"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtPrice | number:0}}</label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{method.getUnitPriceUSD(item.avtPrice, exRate) | currency:'$':2}}</label>
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmount(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountUSD(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount, exRate) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>

                                                    @* Cushion *@
                                                    <tbody>
                                                        <tr style="height: 40px;">
                                                            <td style="width: 30px; text-align: center;"><b>4</b></td>
                                                            <td style="width: 130px; text-align: left;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 2 : 0}}"><a href="javascript:void(0)" ng-click="event.openBreakdownDetail(4)"><b>CUSHION COST</b></a></td>
                                                            <td style="width: 191px;">
                                                                <select class="form-control" ng-if="data.modelID" ng-model="selectedOptions.cushionCostOptionID" ng-options="option.breakdownCategoryOptionID as method.getOptionName(option) for option  in data.breakdownCategoryOptionDTOs | filter:{breakdownCategoryID: 4,  companyID: @companyId}:true" ng-change="event.change(selectedOptions.cushionCostOptionID, 4);"></select>
                                                            </td>
                                                            <td style="width: 320px; text-align: right; background: #fef6de;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 5 : 0}}"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                <b>{{method.getTotalAmountCategory(4, selectedOptions.cushionCostOptionID, 1) | number:0}}</b>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                <b>{{method.getTotalAmountCategoryUSD(4, selectedOptions.cushionCostOptionID, exRate, 1) | currency:'$':2}}</b>
                                                            </td>
                                                            <td style="width: 320px; text-align: right; background: #d2fbd2;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 5 : 0}}"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3"><b>{{method.getTotalAmountCategory(4, selectedOptions.cushionCostOptionID, 3) | number:0}}</b></label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3"><b>{{method.getTotalAmountCategoryUSD(4, selectedOptions.cushionCostOptionID, exRate, 3) | currency:'$':2}}</b></label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>
                                                    <tbody ng-if="(detailOptions.isCushion || groupOptions.isCushion) && (detailOptions.cushionOptionDetail | filter : {breakdownCategoryOptionGroupID : null} : true).length > 0">
                                                        <tr ng-repeat="item in detailOptions.cushionOptionDetail | filter : {breakdownCategoryOptionGroupID : null} : true">
                                                            <td style="width: 30px; text-align: center;">&nbsp;</td>
                                                            <td style="width: 75px; text-align: center;">
                                                                <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                    <img style="width: 50px;" src="{{item.thumbnailLocation}}" />
                                                                </a>
                                                            </td>
                                                            <td style="width: 55px; text-align: center;">{{item.unitNM}}</td>
                                                            <td style="width: 190px;">
                                                                <b>{{item.productionItemUD}}</b>
                                                                <label>{{item.productionItemNM}}</label>
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #fef6de;">{{item.avfWastedRatePercent | number:2}}</td>
                                                            <td style="width: 70px; text-align: right; background: #fef6de;">{{item.avfQuantity | number:4}}</td>
                                                            <td style="width: 50px; text-align: right; background: #fef6de;"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">{{item.avfPrice | number:0}}</td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getUnitPriceUSD(item.avfPrice, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmount(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountUSD(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtWastedRatePercent | number:2}}</label>
                                                            </td>
                                                            <td style="width: 70px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtQuantity | number:4}}</label>
                                                            </td>
                                                            <td style="width: 50px; text-align: right; background: #d2fbd2;"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtPrice | number:0}}</label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{method.getUnitPriceUSD(item.avtPrice, exRate) | currency:'$':2}}</label>
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmount(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountUSD(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount, exRate) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>
                                                    <tbody ng-repeat="group in groupOptions.cushionOptionGroup" ng-if="groupOptions.isCushion">
                                                        <tr>
                                                            <td style="width: 30px; text-align: center;"></td>
                                                            <td style="width: 320px; text-align: left;" colspan="3"><b>{{group.breakdownCategoryOptionGroupNM}}({{group.breakdownCategoryOptionGroupNMEN}})</b></td>
                                                            <td style="width: 180px; text-align: right; background: #fef6de;" colspan="3">
                                                                <label>{{group.avfGroupQuantity | number:0}}</label>
                                                            </td>
                                                            <td style="width: 130px; text-align: right; background: #fef6de;" colspan="2"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountGroup(4, selectedOptions.cushionCostOptionID, group.breakdownCategoryOptionGroupID, group.avfGroupQuantity, 1) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountGroupUSD(4, selectedOptions.cushionCostOptionID, group.breakdownCategoryOptionGroupID, group.avfGroupQuantity, exRate, 1) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 180px; text-align: right; background: #d2fbd2;" colspan="3">
                                                                <label ng-if="companyID == 3">{{group.avtGroupQuantity | number:0}}</label>
                                                            </td>
                                                            <td style="width: 130px; text-align: right; background: #d2fbd2;" colspan="2"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountGroup(4, selectedOptions.cushionCostOptionID, group.breakdownCategoryOptionGroupID, group.avtGroupQuantity, 3) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountGroupUSD(4, selectedOptions.cushionCostOptionID, group.breakdownCategoryOptionGroupID, group.avtGroupQuantity, exRate, 3) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                        <tr ng-repeat="item in detailOptions.cushionOptionDetail | filter : {breakdownCategoryOptionGroupID : group.breakdownCategoryOptionGroupID} : true">
                                                            <td style="width: 30px; text-align: center;">&nbsp;</td>
                                                            <td style="width: 75px; text-align: center;">
                                                                <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                    <img style="width: 50px;" src="{{item.thumbnailLocation}}" />
                                                                </a>
                                                            </td>
                                                            <td style="width: 55px; text-align: center;">{{item.unitNM}}</td>
                                                            <td style="width: 190px;">
                                                                <b>{{item.productionItemUD}}</b>
                                                                <label>{{item.productionItemNM}}</label>
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #fef6de;">{{item.avfWastedRatePercent | number:2}}</td>
                                                            <td style="width: 70px; text-align: right; background: #fef6de;">{{item.avfQuantity | number:4}}</td>
                                                            <td style="width: 50px; text-align: right; background: #fef6de;"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">{{item.avfPrice | number:0}}</td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getUnitPriceUSD(item.avfPrice, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmount(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountUSD(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtWastedRatePercent | number:2}}</label>
                                                            </td>
                                                            <td style="width: 70px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtQuantity | number:4}}</label>
                                                            </td>
                                                            <td style="width: 50px; text-align: right; background: #d2fbd2;"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtPrice | number:0}}</label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{method.getUnitPriceUSD(item.avtPrice, exRate) | currency:'$':2}}</label>
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmount(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountUSD(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount, exRate) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>

                                                    @* Packing *@
                                                    <tbody>
                                                        <tr style="height: 40px;">
                                                            <td style="width: 30px; text-align: center;"><b>5</b></td>
                                                            <td style="width: 130px; text-align: left;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 2 : 0}}"><a href="javascript:void(0)" ng-click="event.openBreakdownDetail(5)"><b>PACKING COST</b></a></td>
                                                            <td style="width: 191px;">
                                                                <select class="form-control" ng-if="data.modelID" ng-model="selectedOptions.packingCostOptionID" ng-options="option.breakdownCategoryOptionID as method.getOptionName(option) for option  in data.breakdownCategoryOptionDTOs | filter:{breakdownCategoryID: 5,  companyID: @companyId}:true" ng-change="event.change(selectedOptions.packingCostOptionID, 5);"></select>
                                                            </td>
                                                            <td style="width: 320px; text-align: right; background: #fef6de;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 5 : 0}}"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                <b>{{method.getTotalAmountCategory(5, selectedOptions.packingCostOptionID, 1) | number:0}}</b>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                <b>{{method.getTotalAmountCategoryUSD(5, selectedOptions.packingCostOptionID, exRate, 1) | currency:'$':2}}</b>
                                                            </td>
                                                            <td style="width: 320px; text-align: right; background: #d2fbd2;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 5 : 0}}"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    <b>{{method.getTotalAmountCategory(5, selectedOptions.packingCostOptionID, 3) | number:0}}</b>
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    <b>{{method.getTotalAmountCategoryUSD(5, selectedOptions.packingCostOptionID, exRate, 3) | currency:'$':2}}</b>
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>
                                                    <tbody ng-if="(detailOptions.isPacking || groupOptions.isPacking) && (detailOptions.packingOptionDetail | filter : {breakdownCategoryOptionGroupID : null} : true).length > 0">
                                                        <tr ng-repeat="item in detailOptions.packingOptionDetail | filter : {breakdownCategoryOptionGroupID : null} : true">
                                                            <td style="width: 30px; text-align: center;">&nbsp;</td>
                                                            <td style="width: 75px; text-align: center;">
                                                                <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                    <img style="width: 50px;" src="{{item.thumbnailLocation}}" />
                                                                </a>
                                                            </td>
                                                            <td style="width: 55px; text-align: center;">{{item.unitNM}}</td>
                                                            <td style="width: 190px;">
                                                                <b>{{item.productionItemUD}}</b>
                                                                <label>{{item.productionItemNM}}</label>
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #fef6de;">{{item.avfWastedRatePercent | number:2}}</td>
                                                            <td style="width: 70px; text-align: right; background: #fef6de;">{{item.avfQuantity | number:4}}</td>
                                                            <td style="width: 50px; text-align: right; background: #fef6de;"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">{{item.avfPrice | number:0}}</td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getUnitPriceUSD(item.avfPrice, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmount(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountUSD(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtWastedRatePercent | number:2}}</label>
                                                            </td>
                                                            <td style="width: 70px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtQuantity | number:4}}</label>
                                                            </td>
                                                            <td style="width: 50px; text-align: right; background: #d2fbd2;"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtPrice | number:0}}</label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{method.getUnitPriceUSD(item.avtPrice, exRate) | currency:'$':2}}</label>
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmount(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountUSD(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount, exRate) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>
                                                    <tbody ng-repeat="group in groupOptions.packingOptionGroup" ng-if="groupOptions.isPacking">
                                                        <tr>
                                                            <td style="width: 30px; text-align: center;"></td>
                                                            <td style="width: 320px; text-align: left;" colspan="3"><b>{{group.breakdownCategoryOptionGroupNM}}({{group.breakdownCategoryOptionGroupNMEN}})</b></td>
                                                            <td style="width: 180px; text-align: right; background: #fef6de;" colspan="3">
                                                                <label>{{group.avfGroupQuantity | number:0}}</label>
                                                            </td>
                                                            <td style="width: 130px; text-align: right; background: #fef6de;" colspan="2"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountGroup(5, selectedOptions.packingCostOptionID, group.breakdownCategoryOptionGroupID, group.avfGroupQuantity, 1) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountGroupUSD(5, selectedOptions.packingCostOptionID, group.breakdownCategoryOptionGroupID, group.avfGroupQuantity, exRate, 1) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 180px; text-align: right; background: #d2fbd2;" colspan="3">
                                                                <label ng-if="companyID == 3">{{group.avtGroupQuantity | number:0}}</label>
                                                            </td>
                                                            <td style="width: 130px; text-align: right; background: #d2fbd2;" colspan="2"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountGroup(5, selectedOptions.packingCostOptionID, group.breakdownCategoryOptionGroupID, group.avtGroupQuantity, 3) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountGroupUSD(5, selectedOptions.packingCostOptionID, group.breakdownCategoryOptionGroupID, group.avtGroupQuantity, exRate, 3) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                        <tr ng-repeat="item in detailOptions.packingOptionDetail | filter : {breakdownCategoryOptionGroupID : group.breakdownCategoryOptionGroupID} : true">
                                                            <td style="width: 30px; text-align: center;">&nbsp;</td>
                                                            <td style="width: 75px; text-align: center;">
                                                                <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                    <img style="width: 50px;" src="{{item.thumbnailLocation}}" />
                                                                </a>
                                                            </td>
                                                            <td style="width: 55px; text-align: center;">{{item.unitNM}}</td>
                                                            <td style="width: 190px;">
                                                                <b>{{item.productionItemUD}}</b>
                                                                <label>{{item.productionItemNM}}</label>
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #fef6de;">{{item.avfWastedRatePercent | number:2}}</td>
                                                            <td style="width: 70px; text-align: right; background: #fef6de;">{{item.avfQuantity | number:4}}</td>
                                                            <td style="width: 50px; text-align: right; background: #fef6de;"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">{{item.avfPrice | number:0}}</td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getUnitPriceUSD(item.avfPrice, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmount(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountUSD(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtWastedRatePercent | number:2}}</label>
                                                            </td>
                                                            <td style="width: 70px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtQuantity | number:4}}</label>
                                                            </td>
                                                            <td style="width: 50px; text-align: right; background: #d2fbd2;"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtPrice | number:0}}</label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{method.getUnitPriceUSD(item.avtPrice, exRate) | currency:'$':2}}</label>
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmount(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountUSD(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount, exRate) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>

                                                    @* Hardware *@
                                                    <tbody>
                                                        <tr style="height: 40px;">
                                                            <td style="width: 30px; text-align: center;"><b>6</b></td>
                                                            <td style="width: 130px; text-align: left;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 2 : 0}}"><a href="javascript:void(0)" ng-click="event.openBreakdownDetail(6)"><b>HARDWARE COST</b></a></td>
                                                            <td style="width: 191px;"></td>
                                                            <td style="width: 320px; text-align: right; background: #fef6de;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 5 : 0}}"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                <b>{{method.getTotalAmountCategory(6, selectedOptions.hardwareCostOptionID, 1) | number:0}}</b>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                <b>{{method.getTotalAmountCategoryUSD(6, selectedOptions.hardwareCostOptionID, exRate, 1) | currency:'$':2}}</b>
                                                            </td>
                                                            <td style="width: 320px; text-align: right; background: #d2fbd2;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 5 : 0}}"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    <b>{{method.getTotalAmountCategory(6, selectedOptions.hardwareCostOptionID, 3) | number:0}}</b>
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    <b>{{method.getTotalAmountCategoryUSD(6, selectedOptions.hardwareCostOptionID, exRate, 3) | currency:'$':2}}</b>
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>
                                                    <tbody ng-if="(detailOptions.isHardware || groupOptions.isHardware) && (detailOptions.hardwareOptionDetail | filter : {breakdownCategoryOptionGroupID : null} : true).length > 0">
                                                        <tr ng-repeat="item in detailOptions.hardwareOptionDetail | filter : {breakdownCategoryOptionGroupID : null} : true">
                                                            <td style="width: 30px; text-align: center;">&nbsp;</td>
                                                            <td style="width: 75px; text-align: center;">
                                                                <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                    <img style="width: 50px;" src="{{item.thumbnailLocation}}" />
                                                                </a>
                                                            </td>
                                                            <td style="width: 55px; text-align: center;">{{item.unitNM}}</td>
                                                            <td style="width: 190px;">
                                                                <b>{{item.productionItemUD}}</b>
                                                                <label>{{item.productionItemNM}}</label>
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #fef6de;">{{item.avfWastedRatePercent | number:2}}</td>
                                                            <td style="width: 70px; text-align: right; background: #fef6de;">{{item.avfQuantity | number:4}}</td>
                                                            <td style="width: 50px; text-align: right; background: #fef6de;"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">{{item.avfPrice | number:0}}</td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getUnitPriceUSD(item.avfPrice, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmount(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountUSD(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtWastedRatePercent | number:2}}</label>
                                                            </td>
                                                            <td style="width: 70px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtQuantity | number:4}}</label>
                                                            </td>
                                                            <td style="width: 50px; text-align: right; background: #d2fbd2;"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtPrice | number:0}}</label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{method.getUnitPriceUSD(item.avtPrice, exRate) | currency:'$':2}}</label>
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmount(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountUSD(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount, exRate) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>
                                                    <tbody ng-repeat="group in groupOptions.hardwareOptionGroup" ng-if="groupOptions.isHardware">
                                                        <tr>
                                                            <td style="width: 30px; text-align: center;"></td>
                                                            <td style="width: 320px; text-align: left;" colspan="3"><b>{{group.breakdownCategoryOptionGroupNM}}({{group.breakdownCategoryOptionGroupNMEN}})</b></td>
                                                            <td style="width: 180px; text-align: right; background: #fef6de;" colspan="3">
                                                                <label>{{group.avfGroupQuantity | number:0}}</label>
                                                            </td>
                                                            <td style="width: 130px; text-align: right; background: #fef6de;" colspan="2"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountGroup(6, selectedOptions.hardwareCostOptionID, group.breakdownCategoryOptionGroupID, group.avfGroupQuantity, 1) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountGroupUSD(6, selectedOptions.hardwareCostOptionID, group.breakdownCategoryOptionGroupID, group.avfGroupQuantity, exRate, 1) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 180px; text-align: right; background: #d2fbd2;" colspan="3">
                                                                <label ng-if="companyID == 3">{{group.avtGroupQuantity | number:0}}</label>
                                                            </td>
                                                            <td style="width: 130px; text-align: right; background: #d2fbd2;" colspan="2"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountGroup(6, selectedOptions.hardwareCostOptionID, group.breakdownCategoryOptionGroupID, group.avtGroupQuantity, 3) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountGroupUSD(6, selectedOptions.hardwareCostOptionID, group.breakdownCategoryOptionGroupID, group.avtGroupQuantity, exRate, 3) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                        <tr ng-repeat="item in detailOptions.hardwareOptionDetail | filter : {breakdownCategoryOptionGroupID : group.breakdownCategoryOptionGroupID} : true">
                                                            <td style="width: 30px; text-align: center;">&nbsp;</td>
                                                            <td style="width: 75px; text-align: center;">
                                                                <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                    <img style="width: 50px;" src="{{item.thumbnailLocation}}" />
                                                                </a>
                                                            </td>
                                                            <td style="width: 55px; text-align: center;">{{item.unitNM}}</td>
                                                            <td style="width: 190px;">
                                                                <b>{{item.productionItemUD}}</b>
                                                                <label>{{item.productionItemNM}}</label>
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #fef6de;">{{item.avfWastedRatePercent | number:2}}</td>
                                                            <td style="width: 70px; text-align: right; background: #fef6de;">{{item.avfQuantity | number:4}}</td>
                                                            <td style="width: 50px; text-align: right; background: #fef6de;"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">{{item.avfPrice | number:0}}</td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getUnitPriceUSD(item.avfPrice, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmount(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountUSD(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtWastedRatePercent | number:2}}</label>
                                                            </td>
                                                            <td style="width: 70px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtQuantity | number:4}}</label>
                                                            </td>
                                                            <td style="width: 50px; text-align: right; background: #d2fbd2;"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtPrice | number:0}}</label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{method.getUnitPriceUSD(item.avtPrice, exRate) | currency:'$':2}}</label>
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmount(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountUSD(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount, exRate) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>

                                                    @* Other Material *@
                                                    <tbody>
                                                        <tr style="height: 40px;">
                                                            <td style="width: 30px; text-align: center;"><b>7</b></td>
                                                            <td style="width: 130px; text-align: left;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 2 : 0}}"><a href="javascript:void(0)" ng-click="event.openBreakdownDetail(7)"><b>OTHER MATERIAL COST</b></a></td>
                                                            <td style="width: 191px;"></td>
                                                            <td style="width: 320px; text-align: right; background: #fef6de;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 5 : 0}}"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                <b>{{method.getTotalAmountCategory(7, selectedOptions.otherMaterialCostOptionID, 1) | number:0}}</b>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                <b>{{method.getTotalAmountCategoryUSD(7, selectedOptions.otherMaterialCostOptionID, exRate, 1) | currency:'$':2}}</b>
                                                            </td>
                                                            <td style="width: 320px; text-align: right; background: #d2fbd2;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 5 : 0}}"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    <b>{{method.getTotalAmountCategory(7, selectedOptions.otherMaterialCostOptionID, 3) | number:0}}</b>
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    <b>{{method.getTotalAmountCategoryUSD(7, selectedOptions.otherMaterialCostOptionID, exRate, 3) | currency:'$':2}}</b>
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>
                                                    <tbody ng-if="(detailOptions.isOtherMaterial || groupOptions.isOtherMaterial) && (detailOptions.otherMaterialOptionDetail | filter : {breakdownCategoryOptionGroupID : null} : true).length > 0">
                                                        <tr ng-repeat="item in detailOptions.otherMaterialOptionDetail | filter : {breakdownCategoryOptionGroupID : null} : true">
                                                            <td style="width: 30px; text-align: center;">&nbsp;</td>
                                                            <td style="width: 75px; text-align: center;">
                                                                <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                    <img style="width: 50px;" src="{{item.thumbnailLocation}}" />
                                                                </a>
                                                            </td>
                                                            <td style="width: 55px; text-align: center;">{{item.unitNM}}</td>
                                                            <td style="width: 190px;">
                                                                <b>{{item.productionItemUD}}</b>
                                                                <label>{{item.productionItemNM}}</label>
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #fef6de;">{{item.avfWastedRatePercent | number:2}}</td>
                                                            <td style="width: 70px; text-align: right; background: #fef6de;">{{item.avfQuantity | number:4}}</td>
                                                            <td style="width: 50px; text-align: right; background: #fef6de;"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">{{item.avfPrice | number:0}}</td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getUnitPriceUSD(item.avfPrice, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmount(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountUSD(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtWastedRatePercent | number:2}}</label>
                                                            </td>
                                                            <td style="width: 70px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtQuantity | number:4}}</label>
                                                            </td>
                                                            <td style="width: 50px; text-align: right; background: #d2fbd2;"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtPrice | number:0}}</label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{method.getUnitPriceUSD(item.avtPrice, exRate) | currency:'$':2}}</label>
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmount(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountUSD(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount, exRate) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>
                                                    <tbody ng-repeat="group in groupOptions.otherMaterialOptionGroup" ng-if="groupOptions.isOtherMaterial">
                                                        <tr>
                                                            <td style="width: 30px; text-align: center;"></td>
                                                            <td style="width: 320px; text-align: left;" colspan="3"><b>{{group.breakdownCategoryOptionGroupNM}}({{group.breakdownCategoryOptionGroupNMEN}})</b></td>
                                                            <td style="width: 180px; text-align: right; background: #fef6de;" colspan="3">
                                                                <label>{{group.avfGroupQuantity | number:0}}</label>
                                                            </td>
                                                            <td style="width: 130px; text-align: right; background: #fef6de;" colspan="2"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountGroup(7, selectedOptions.otherMaterialCostOptionID, group.breakdownCategoryOptionGroupID, group.avfGroupQuantity, 1) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountGroupUSD(7, selectedOptions.otherMaterialCostOptionID, group.breakdownCategoryOptionGroupID, group.avfGroupQuantity, exRate, 1) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 180px; text-align: right; background: #d2fbd2;" colspan="3">
                                                                <label ng-if="companyID == 3">{{group.avtGroupQuantity | number:0}}</label>
                                                            </td>
                                                            <td style="width: 130px; text-align: right; background: #d2fbd2;" colspan="2"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountGroup(7, selectedOptions.otherMaterialCostOptionID, group.breakdownCategoryOptionGroupID, group.avtGroupQuantity, 3) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountGroupUSD(7, selectedOptions.otherMaterialCostOptionID, group.breakdownCategoryOptionGroupID, group.avtGroupQuantity, exRate, 3) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                        <tr ng-repeat="item in detailOptions.otherMaterialOptionDetail | filter : {breakdownCategoryOptionGroupID : group.breakdownCategoryOptionGroupID} : true">
                                                            <td style="width: 30px; text-align: center;">&nbsp;</td>
                                                            <td style="width: 75px; text-align: center;">
                                                                <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                    <img style="width: 50px;" src="{{item.thumbnailLocation}}" />
                                                                </a>
                                                            </td>
                                                            <td style="width: 55px; text-align: center;">{{item.unitNM}}</td>
                                                            <td style="width: 190px;">
                                                                <b>{{item.productionItemUD}}</b>
                                                                <label>{{item.productionItemNM}}</label>
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #fef6de;">{{item.avfWastedRatePercent | number:2}}</td>
                                                            <td style="width: 70px; text-align: right; background: #fef6de;">{{item.avfQuantity | number:4}}</td>
                                                            <td style="width: 50px; text-align: right; background: #fef6de;"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">{{item.avfPrice | number:0}}</td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getUnitPriceUSD(item.avfPrice, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmount(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountUSD(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtWastedRatePercent | number:2}}</label>
                                                            </td>
                                                            <td style="width: 70px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtQuantity | number:4}}</label>
                                                            </td>
                                                            <td style="width: 50px; text-align: right; background: #d2fbd2;"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtPrice | number:0}}</label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{method.getUnitPriceUSD(item.avtPrice, exRate) | currency:'$':2}}</label>
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmount(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountUSD(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount, exRate) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>

                                                    @* FSC *@
                                                    <tbody>
                                                        <tr style="height: 40px;">
                                                            <td style="width: 30px; text-align: center;"><b>8</b></td>
                                                            <td style="width: 130px; text-align: left;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 2 : 0}}"><a href="javascript:void(0)" ng-click="event.openBreakdownDetail(8)"><b>FSC COST</b></a></td>
                                                            <td style="width: 191px;">
                                                                <select class="form-control" ng-if="data.modelID" ng-model="selectedOptions.fscCostOptionID" ng-options="option.breakdownCategoryOptionID as method.getOptionName(option) for option  in data.breakdownCategoryOptionDTOs | filter:{breakdownCategoryID: 8,  companyID: @companyId}:true" ng-change="event.change(selectedOptions.fscCostOptionID, 8);"></select>
                                                            </td>
                                                            <td style="width: 320px; text-align: right; background: #fef6de;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 5 : 0}}"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                <b>{{method.getTotalAmountCategory(8, selectedOptions.fscCostOptionID, 1) | number:0}}</b>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                <b>{{method.getTotalAmountCategoryUSD(8, selectedOptions.fscCostOptionID, exRate, 1) | currency:'$':2}}</b>
                                                            </td>
                                                            <td style="width: 320px; text-align: right; background: #d2fbd2;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 5 : 0}}"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3"><b>{{method.getTotalAmountCategory(8, selectedOptions.fscCostOptionID, 3) | number:0}}</b></label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3"><b>{{method.getTotalAmountCategoryUSD(8, selectedOptions.fscCostOptionID, exRate, 3) | currency:'$':2}}</b></label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>
                                                    <tbody ng-if="(detailOptions.isFSC || groupOptions.isFSC) && (detailOptions.fscOptionDetail | filter : {breakdownCategoryOptionGroupID : null} : true).length > 0">
                                                        <tr ng-repeat="item in detailOptions.fscOptionDetail | filter : {breakdownCategoryOptionGroupID : null} : true">
                                                            <td style="width: 30px; text-align: center;">&nbsp;</td>
                                                            <td style="width: 75px; text-align: center;">
                                                                <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                    <img style="width: 50px;" src="{{item.thumbnailLocation}}" />
                                                                </a>
                                                            </td>
                                                            <td style="width: 55px; text-align: center;">{{item.unitNM}}</td>
                                                            <td style="width: 190px;">
                                                                <b>{{item.productionItemUD}}</b>
                                                                <label>{{item.productionItemNM}}</label>
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #fef6de;">{{item.avfWastedRatePercent | number:2}}</td>
                                                            <td style="width: 70px; text-align: right; background: #fef6de;">{{item.avfQuantity | number:4}}</td>
                                                            <td style="width: 50px; text-align: right; background: #fef6de;"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">{{item.avfPrice | number:0}}</td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getUnitPriceUSD(item.avfPrice, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmount(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountUSD(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtWastedRatePercent | number:2}}</label>
                                                            </td>
                                                            <td style="width: 70px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtQuantity | number:4}}</label>
                                                            </td>
                                                            <td style="width: 50px; text-align: right; background: #d2fbd2;"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtPrice | number:0}}</label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{method.getUnitPriceUSD(item.avtPrice, exRate) | currency:'$':2}}</label>
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmount(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountUSD(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount, exRate) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>
                                                    <tbody ng-repeat="group in groupOptions.fscOptionGroup" ng-if="groupOptions.isFSC">
                                                        <tr>
                                                            <td style="width: 30px; text-align: center;"></td>
                                                            <td style="width: 320px; text-align: left;" colspan="3"><b>{{group.breakdownCategoryOptionGroupNM}}({{group.breakdownCategoryOptionGroupNMEN}})</b></td>
                                                            <td style="width: 180px; text-align: right; background: #fef6de;" colspan="3">
                                                                <label>{{group.avfGroupQuantity | number:0}}</label>
                                                            </td>
                                                            <td style="width: 130px; text-align: right; background: #fef6de;" colspan="2"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountGroup(8, selectedOptions.fscCostOptionID, group.breakdownCategoryOptionGroupID, group.avfGroupQuantity, 1) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountGroupUSD(8, selectedOptions.fscCostOptionID, group.breakdownCategoryOptionGroupID, group.avfGroupQuantity, exRate, 1) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 180px; text-align: right; background: #d2fbd2;" colspan="3">
                                                                <label ng-if="companyID == 3">{{group.avtGroupQuantity | number:0}}</label>
                                                            </td>
                                                            <td style="width: 130px; text-align: right; background: #d2fbd2;" colspan="2"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountGroup(8, selectedOptions.fscCostOptionID, group.breakdownCategoryOptionGroupID, group.avtGroupQuantity, 3) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountGroupUSD(8, selectedOptions.fscCostOptionID, group.breakdownCategoryOptionGroupID, group.avtGroupQuantity, exRate, 3) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                        <tr ng-repeat="item in detailOptions.fscOptionDetail | filter : {breakdownCategoryOptionGroupID : group.breakdownCategoryOptionGroupID} : true">
                                                            <td style="width: 30px; text-align: center;">&nbsp;</td>
                                                            <td style="width: 75px; text-align: center;">
                                                                <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                    <img style="width: 50px;" src="{{item.thumbnailLocation}}" />
                                                                </a>
                                                            </td>
                                                            <td style="width: 55px; text-align: center;">{{item.unitNM}}</td>
                                                            <td style="width: 190px;">
                                                                <b>{{item.productionItemUD}}</b>
                                                                <label>{{item.productionItemNM}}</label>
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #fef6de;">{{item.avfWastedRatePercent | number:2}}</td>
                                                            <td style="width: 70px; text-align: right; background: #fef6de;">{{item.avfQuantity | number:4}}</td>
                                                            <td style="width: 50px; text-align: right; background: #fef6de;"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">{{item.avfPrice | number:0}}</td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getUnitPriceUSD(item.avfPrice, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmount(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountUSD(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtWastedRatePercent | number:2}}</label>
                                                            </td>
                                                            <td style="width: 70px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtQuantity | number:4}}</label>
                                                            </td>
                                                            <td style="width: 50px; text-align: right; background: #d2fbd2;"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtPrice | number:0}}</label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{method.getUnitPriceUSD(item.avtPrice, exRate) | currency:'$':2}}</label>
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmount(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountUSD(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount, exRate) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>

                                                    @* Special Requirement *@
                                                    <tbody>
                                                        <tr style="height: 40px;">
                                                            <td style="width: 30px; text-align: center;"><b>9</b></td>
                                                            <td style="width: 130px; text-align: left;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 2 : 0}}"><a href="javascript:void(0)" ng-click="event.openBreakdownDetail(9)"><b>SPECIAL REQUIREMENT COST</b></a></td>
                                                            <td style="width: 191px;">
                                                                <select class="form-control" ng-if="data.modelID" ng-model="selectedOptions.specialRequirementCostOptionID" ng-options="option.breakdownCategoryOptionID as method.getOptionName(option) for option  in data.breakdownCategoryOptionDTOs | filter:{breakdownCategoryID: 9,  companyID: @companyId}:true" ng-change="event.change(selectedOptions.specialRequirementCostOptionID, 9);"></select>
                                                            </td>
                                                            <td style="width: 320px; text-align: right; background: #fef6de;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 5 : 0}}"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                <b>{{method.getTotalAmountCategory(9, selectedOptions.specialRequirementCostOptionID, 1) | number:0}}</b>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                <b>{{method.getTotalAmountCategoryUSD(9, selectedOptions.specialRequirementCostOptionID, exRate, 1) | currency:'$':2}}</b>
                                                            </td>
                                                            <td style="width: 320px; text-align: right; background: #d2fbd2;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 5 : 0}}"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3"><b>{{method.getTotalAmountCategory(9, selectedOptions.specialRequirementCostOptionID, 3) | number:0}}</b></label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3"><b>{{method.getTotalAmountCategoryUSD(9, selectedOptions.specialRequirementCostOptionID, exRate, 3) | currency:'$':2}}</b></label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>
                                                    <tbody ng-if="(detailOptions.isSpecialRequirement || groupOptions.isSpecialRequirement) && (detailOptions.specialRequirementOptionDetail | filter : {breakdownCategoryOptionGroupID : null} : true).length > 0">
                                                        <tr ng-repeat="item in detailOptions.specialRequirementOptionDetail | filter : {breakdownCategoryOptionGroupID : null} : true">
                                                            <td style="width: 30px; text-align: center;">&nbsp;</td>
                                                            <td style="width: 75px; text-align: center;">
                                                                <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                    <img style="width: 50px;" src="{{item.thumbnailLocation}}" />
                                                                </a>
                                                            </td>
                                                            <td style="width: 55px; text-align: center;">{{item.unitNM}}</td>
                                                            <td style="width: 190px;">
                                                                <b>{{item.productionItemUD}}</b>
                                                                <label>{{item.productionItemNM}}</label>
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #fef6de;">{{item.avfWastedRatePercent | number:2}}</td>
                                                            <td style="width: 70px; text-align: right; background: #fef6de;">{{item.avfQuantity | number:4}}</td>
                                                            <td style="width: 50px; text-align: right; background: #fef6de;"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">{{item.avfPrice | number:0}}</td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getUnitPriceUSD(item.avfPrice, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmount(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountUSD(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtWastedRatePercent | number:2}}</label>
                                                            </td>
                                                            <td style="width: 70px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtQuantity | number:4}}</label>
                                                            </td>
                                                            <td style="width: 50px; text-align: right; background: #d2fbd2;"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtPrice | number:0}}</label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{method.getUnitPriceUSD(item.avtPrice, exRate) | currency:'$':2}}</label>
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmount(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountUSD(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount, exRate) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>
                                                    <tbody ng-repeat="group in groupOptions.specialRequirementOptionGroup" ng-if="groupOptions.isSpecialRequirement">
                                                        <tr>
                                                            <td style="width: 30px; text-align: center;"></td>
                                                            <td style="width: 320px; text-align: left;" colspan="3"><b>{{group.breakdownCategoryOptionGroupNM}}({{group.breakdownCategoryOptionGroupNMEN}})</b></td>
                                                            <td style="width: 180px; text-align: right; background: #fef6de;" colspan="3">
                                                                <label>{{group.avfGroupQuantity | number:0}}</label>
                                                            </td>
                                                            <td style="width: 130px; text-align: right; background: #fef6de;" colspan="2"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountGroup(9, selectedOptions.specialRequirementCostOptionID, group.breakdownCategoryOptionGroupID, group.avfGroupQuantity, 1) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountGroupUSD(9, selectedOptions.specialRequirementCostOptionID, group.breakdownCategoryOptionGroupID, group.avfGroupQuantity, exRate, 1) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 180px; text-align: right; background: #d2fbd2;" colspan="3">
                                                                <label ng-if="companyID == 3">{{group.avtGroupQuantity | number:0}}</label>
                                                            </td>
                                                            <td style="width: 130px; text-align: right; background: #d2fbd2;" colspan="2"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountGroup(9, selectedOptions.specialRequirementCostOptionID, group.breakdownCategoryOptionGroupID, group.avtGroupQuantity, 3) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountGroupUSD(9, selectedOptions.specialRequirementCostOptionID, group.breakdownCategoryOptionGroupID, group.avtGroupQuantity, exRate, 3) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                        <tr ng-repeat="item in detailOptions.specialRequirementOptionDetail | filter : {breakdownCategoryOptionGroupID : group.breakdownCategoryOptionGroupID} : true">
                                                            <td style="width: 30px; text-align: center;">&nbsp;</td>
                                                            <td style="width: 75px; text-align: center;">
                                                                <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                    <img style="width: 50px;" src="{{item.thumbnailLocation}}" />
                                                                </a>
                                                            </td>
                                                            <td style="width: 55px; text-align: center;">{{item.unitNM}}</td>
                                                            <td style="width: 190px;">
                                                                <b>{{item.productionItemUD}}</b>
                                                                <label>{{item.productionItemNM}}</label>
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #fef6de;">{{item.avfWastedRatePercent | number:2}}</td>
                                                            <td style="width: 70px; text-align: right; background: #fef6de;">{{item.avfQuantity | number:4}}</td>
                                                            <td style="width: 50px; text-align: right; background: #fef6de;"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">{{item.avfPrice | number:0}}</td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getUnitPriceUSD(item.avfPrice, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmount(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountUSD(item.avfWastedRatePercent, item.avfQuantity, item.avfPrice, item.avfAmount, exRate) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtWastedRatePercent | number:2}}</label>
                                                            </td>
                                                            <td style="width: 70px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtQuantity | number:4}}</label>
                                                            </td>
                                                            <td style="width: 50px; text-align: right; background: #d2fbd2;"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{item.avtPrice | number:0}}</label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">{{method.getUnitPriceUSD(item.avtPrice, exRate) | currency:'$':2}}</label>
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmount(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountUSD(item.avtWastedRatePercent, item.avtQuantity, item.avtPrice, item.avtAmount, exRate) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>

                                                    @* Management *@
                                                    <tbody>
                                                        <tr style="height: 40px;">
                                                            <td style="width: 30px; text-align: center;"><b>10</b></td>
                                                            <td style="width: 130px; text-align: left;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 2 : 0}}"><a href="javascript:void(0)" ng-click="event.openBreakdownDetail(10)"><b>MANAGEMENT COST</b></a></td>
                                                            <td style="width: 191px;"></td>
                                                            <td style="width: 320px; text-align: right; background: #fef6de;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 5 : 0}}"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                <b>{{method.getTotalAmountCategoryManagement(10, selectedOptions.managementCostOptionID, 1) | number:0}}</b>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                <b>{{method.getTotalAmountCategoryUSDManagement(10, selectedOptions.managementCostOptionID, exRate, 1) | currency:'$':2}}</b>
                                                            </td>
                                                            <td style="width: 320px; text-align: right; background: #d2fbd2;" colspan="{{method.hasColspanDetail() && hasOptionDetail ? 5 : 0}}"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3"><b>{{method.getTotalAmountCategoryManagement(10, selectedOptions.managementCostOptionID, 3) | number:0}}</b></label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3"><b>{{method.getTotalAmountCategoryUSDManagement(10, selectedOptions.managementCostOptionID, exRate, 3) | currency:'$':2}}</b></label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>
                                                    <tbody ng-if="(detailOptions.isManagement || groupOptions.isManagement) && (detailOptions.managementOptionDetail | filter : {breakdownCategoryOptionGroupID : null} : true).length > 0">
                                                        <tr ng-repeat="item in detailOptions.managementOptionDetail | filter : {breakdownCategoryOptionGroupID : null} : true">
                                                            <td style="width: 30px; text-align: center;">&nbsp;</td>
                                                            <td style="width: 75px; text-align: center;">
                                                                <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                    <img style="width: 50px;" src="{{item.thumbnailLocation}}" />
                                                                </a>
                                                            </td>
                                                            <td style="width: 55px; text-align: center;">{{item.unitNM}}</td>
                                                            <td style="width: 190px;">
                                                                <b>{{item.productionItemUD}}</b>
                                                                <label>{{item.productionItemNM}}</label>
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #fef6de;">
                                                                <label ng-if="item.avfWastedRatePercent != null && item.avfWastedRatePercent != 0">{{item.avfWastedRatePercent | number:2}}</label>
                                                            </td>
                                                            <td style="width: 70px; text-align: right; background: #fef6de;">
                                                                <label ng-if="item.avfQuantity != null && item.avfQuantity != 0">{{item.avfQuantity | number:4}}</label>
                                                            </td>
                                                            <td style="width: 50px; text-align: right; background: #fef6de;">
                                                                {{item.avfPercent | number:2}}
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getBasedOnAmountManagement(item.avfPercent, 1) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getBasedOnAmountManagementUSD(item.avfPercent, exRate, 1) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountManagement(item.avfPercent, 1) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountManagementUSD(item.avfPercent, exRate, 1) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3 && item.avtWastedRatePercent != null && item.avtWastedRatePercent != 0">{{item.avtWastedRatePercent | number:2}}</label>
                                                            </td>
                                                            <td style="width: 70px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3 && item.avtQuantity != null && item.avtQuantity != 0">{{item.avtQuantity | number:4}}</label>
                                                            </td>
                                                            <td style="width: 50px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{item.avtPercent | number:2}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getBasedOnAmountManagement(item.avtPercent, 3) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getBasedOnAmountManagementUSD(item.avtPercent, exRate, 3) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountManagement(item.avtPercent, 3) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountManagementUSD(item.avtPercent, exRate, 3) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>
                                                    <tbody ng-repeat="group in groupOptions.managementOptionGroup" ng-if="groupOptions.isManagement">
                                                        <tr>
                                                            <td style="width: 30px; text-align: center;"></td>
                                                            <td style="width: 320px; text-align: left;" colspan="3"><b>{{group.breakdownCategoryOptionGroupNM}}({{group.breakdownCategoryOptionGroupNMEN}})</b></td>
                                                            <td style="width: 180px; text-align: right; background: #fef6de;" colspan="3">
                                                                <label>{{group.avfGroupQuantity | number:0}}</label>
                                                            </td>
                                                            <td style="width: 130px; text-align: right; background: #fef6de;" colspan="2"></td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountGroupManagement(10, selectedOptions.managementCostOptionID, group.breakdownCategoryOptionGroupID, group.avfGroupQuantity, 1) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountGroupUSD(10, selectedOptions.managementCostOptionID, group.breakdownCategoryOptionGroupID, group.avfGroupQuantity, exRate, 1) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 180px; text-align: right; background: #d2fbd2;" colspan="3">
                                                                <label ng-if="companyID == 3">{{group.avtGroupQuantity | number:0}}</label>
                                                            </td>
                                                            <td style="width: 130px; text-align: right; background: #d2fbd2;" colspan="2"></td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountGroupManagement(10, selectedOptions.managementCostOptionID, group.breakdownCategoryOptionGroupID, group.avtGroupQuantity, 3) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountGroupUSDManagement(10, selectedOptions.managementCostOptionID, group.breakdownCategoryOptionGroupID, group.avtGroupQuantity, exRate, 3) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                        <tr ng-repeat="item in detailOptions.managementOptionDetail | filter : {breakdownCategoryOptionGroupID : group.breakdownCategoryOptionGroupID} : true">
                                                            <td style="width: 30px; text-align: center;">&nbsp;</td>
                                                            <td style="width: 75px; text-align: center;">
                                                                <a href="{{item.fileLocation}}" data-featherlight="image">
                                                                    <img style="width: 50px;" src="{{item.thumbnailLocation}}" />
                                                                </a>
                                                            </td>
                                                            <td style="width: 55px; text-align: center;">{{item.unitNM}}</td>
                                                            <td style="width: 190px;">
                                                                <b>{{item.productionItemUD}}</b>
                                                                <label>{{item.productionItemNM}}</label>
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #fef6de;">
                                                                <label ng-if="item.avfWastedRatePercent != null && item.avfWastedRatePercent != 0">{{item.avfWastedRatePercent | number:2}}</label>
                                                            </td>
                                                            <td style="width: 70px; text-align: right; background: #fef6de;">
                                                                <label ng-if="item.avfQuantity != null && item.avfQuantity != 0">{{item.avfQuantity | number:4}}</label>
                                                            </td>
                                                            <td style="width: 50px; text-align: right; background: #fef6de;">
                                                                {{item.avfPercent | number:2}}
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getBasedOnAmountManagement(item.avfPercent, 1) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getBasedOnAmountManagementUSD(item.avfPercent, exRate, 1) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountManagement(item.avfPercent, 1) | number:0}}
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #fef6de;">
                                                                {{method.getSubTotalAmountManagementUSD(item.avfPercent, exRate, 1) | currency:'$':2}}
                                                            </td>
                                                            <td style="width: 60px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3 && item.avtWastedRatePercent != null && item.avtWastedRatePercent != 0">{{item.avtWastedRatePercent | number:2}}</label>
                                                            </td>
                                                            <td style="width: 70px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3 && item.avtQuantity != null && item.avtQuantity != 0">{{item.avtQuantity | number:4}}</label>
                                                            </td>
                                                            <td style="width: 50px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{item.avtPercent | number:2}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getBasedOnAmountManagement(item.avtPercent, 3) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getBasedOnAmountManagementUSD(item.avtPercent, exRate, 3) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 75px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountManagement(item.avtPercent, 3) | number:0}}
                                                                </label>
                                                            </td>
                                                            <td style="width: 65px; text-align: right; background: #d2fbd2;">
                                                                <label ng-if="companyID == 3">
                                                                    {{method.getSubTotalAmountManagementUSD(item.avtPercent, exRate, 3) | currency:'$':2}}
                                                                </label>
                                                            </td>
                                                            <td style="border-bottom: none;"></td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </div>
                        </fieldset>
                    </div>
                </div>
            </div>
        </div>
    </article>
</form>

@section FormAction{
<ul id="sparks">
    <li class="sparks-info">
        <a href="javascript:void(0)" class="btn btn-default btn-sm" title="Back" ng-click="event.back();">
            <i class="fa fa-arrow-left"></i> Back
        </a>
    </li>
    <li class="sparks-info">
        <a target="_blank" ng-if="data.modelID != null && data.modelID != 0" href="@Url.Action("Edit", "BreakDownMng", new { id = UrlParameter.Optional })/{{data.breakdownID}}?modelId={{data.modelID}}&sampleProductId=0&offerLineId=0" class="btn btn-default@(ViewBag.ID==0?" disabled":"") @(Frontend.Helper.AuthHelper.GetActionButtonStatus("BreakDownMng", Frontend.Helper.ActionEnum.Update, HttpContext.Current))" title="Edit Breakdown"><i class="fa fa-pencil"></i></a>
        <a target="_blank" ng-if="data.sampleProductID != null && data.sampleProductID != 0" href="@Url.Action("Edit", "BreakDownMng", new { id = UrlParameter.Optional })/{{data.breakdownID}}?modelId=0&sampleProductId={{data.sampleProductID}}&offerLineId=0" class="btn btn-default@(ViewBag.ID==0?" disabled":"") @(Frontend.Helper.AuthHelper.GetActionButtonStatus("BreakDownMng", Frontend.Helper.ActionEnum.Update, HttpContext.Current))" title="Edit Breakdown"><i class="fa fa-pencil"></i></a>
    </li>
    <li class="sparks-info">
        <a href="#" class="btn btn-default @Frontend.Helper.AuthHelper.GetActionButtonStatus(ViewBag.ModuleCode, Frontend.Helper.ActionEnum.Print, HttpContext.Current))" title="Export Excel" style="color: #31B404" ng-click="event.exportExcel()"><i class="fa fa-file-excel-o"></i></a>
    </li>
</ul>
}

@section pagejs{
    <script type="text/javascript">
        var context = {
            id: @ViewBag.ID,
            modelID: @Request.Params["modelId"],
            sampleProductID: @sampleProductId,            
            offerSeasonDetailID: @offerSeasonDetailId,
            token: '@token',
            serviceUrl: '@(serviceRoot)/api/breakdown/',
            backUrl: '@Url.Action("Index", "BreakDownMng")',
            redirectUrl: '@Url.Action("View", "BreakDownMng", new { id = UrlParameter.Optional })',
            companyID: @companyId,
            factoryID: @(!string.IsNullOrEmpty(Request.Params["factoryID"]) ? Request.Params["factoryID"] : "0"),
            backendReportUrl: '@System.Configuration.ConfigurationManager.AppSettings["BackendReportUrl"]'
        }
    </script>
    <script type="text/javascript" src="~/Views/BreakDownMng/view.js?v=@guid"></script>
    <script type="text/javascript" src="~/Angular/app/jsonService2.js?v=@guid"></script>
    <script type="text/javascript" src="~/Views/BreakDownMng/service.js?v=@guid"></script>
}
