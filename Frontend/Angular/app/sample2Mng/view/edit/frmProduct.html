<div id="frmProduct" name="frmProduct" class="row" style="display: none;">
    <form name="frmProduct">
        <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <div class="jarviswidget" id="wid-id-product" data-widget-colorbutton="false" data-widget-togglebutton="false" data-widget-editbutton="false" data-widget-fullscreenbutton="false" data-widget-deletebutton="false" role="widget">
                <header role="heading">
                    <h2>Edit Product: {{currentProduct.sampleProductUD}}</h2>
                </header>
                <div role="content">
                    <div class="widget-body no-padding">
                        <div class="widget-body-toolbar">
                            <a href="javascript:void(0)" class="btn btn-primary btn-sm" ng-click="event.frmProductOK()"><i class="fa fa-check"></i> OK</a>
                            <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.frmProductCancel()"><i class="fa fa-times"></i> Cancel</a>
                            <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.frmImportProduct_open()" style="float:right;"><i class="fa fa-database"></i> Import From Existing Product</a>
                        </div>
                        <div class="smart-form">
                            <fieldset>
                                <h2 style="margin-bottom: 15px;">Product Information</h2>
                                <section class="col col-10">
                                    <label class="label">Reference Images <a href="javascript:void(0)" class="btn btn-success btn-sm" ng-click="event.addReferenceImage()"><i class="fa fa-plus"></i> Add New Image</a></label>
                                    <ul class="ulcols-4">
                                        <li ng-repeat="item in currentProduct.sampleReferenceImages" class="{{item.isDefault ? 'active' : ''}}">
                                            <div class="content">
                                                <a href="{{item.fileLocation}}" data-featherlight="image">
                                                    <div class="img" style="background: url('{{item.thumbnailLocation}}') no-repeat center center; background-size: contain;"></div>
                                                </a>
                                                <div class="action">
                                                    <a href="javascript:void(0)" class="btn-success btn-xs" ng-click="event.editReferenceImage(item)"><i class="fa fa-pencil"></i> Edit</a>
                                                    <a href="javascript:void(0)" class="btn-danger btn-xs" ng-click="event.removeReferenceImage(item)"><i class="fa fa-times"></i> Remove</a>
                                                </div>
                                                <p>
                                                    <u>Bring In By</u>: {{item.bringInBy}}
                                                    <br />
                                                    <u>Bring In Date</u>: {{item.bringInDate}}
                                                    <br />
                                                    <u>Remark</u>: {{item.remark}}
                                                </p>
                                            </div>
                                        </li>
                                    </ul>
                                </section>
                                <section class="col col-2">
                                    <label class="label">
                                        Status
                                        <div class="btn-group">
                                            <button class="btn dropdown-toggle btn-sm btn-success" data-toggle="dropdown" aria-expanded="false">
                                                {{currentProduct.sampleProductStatusNM}} <i class="fa fa-caret-down"></i>
                                            </button>
                                            <ul class="dropdown-menu pull-right">
                                                <li ng-repeat="item in sampleProductStatuses">
                                                    <a href="javascript:void(0);" ng-click="$parent.event.setProductStatus(item.sampleProductStatusID, currentProduct)">{{item.sampleProductStatusNM}}</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </label>
                                </section>
                            </fieldset>
                            <fieldset>
                                <h2 style="margin-bottom: 15px;">Sales NL</h2>
                                <section>
                                    <label class="label">Model <span ng-if="currentProduct.modelID">(Code: {{currentProduct.modelUD}})</span></label>
                                    <label class="input" ng-class="{'state-error': frmProduct.articleDescription.$error.required}">
                                        <div class="input-group">
                                            <input class="form-control" name="articleDescription" type="text" readonly ng-model="currentProduct.articleDescription" required>
                                            <div class="input-group-btn">
                                                <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.searchModel()"><i class="fa fa-search" title="Search for existing option"></i></a>
                                                <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.otherModel()"><i class="fa fa-pencil" title="Manually type in option which not exists"></i></a>
                                                <a href="javascript:void(0)" class="btn btn-warning btn-sm" ng-click="event.clearModel()"><i class="fa fa-times" title="Clear selection"></i></a>
                                            </div>
                                        </div>
                                    </label>
                                    <div ng-show="frmProduct.articleDescription.$error.required" class="note note-error">Model is required</div>
                                </section>
                                <div class="row">
                                    <section class="col col-4">
                                        <label class="label">Material <span ng-if="currentProduct.materialID">(Code: {{currentProduct.materialUD}})</span></label>
                                        <label class="input" ng-class="{'state-error': frmProduct.materialDescription.$error.required}">
                                            <div class="input-group">
                                                <input class="form-control" type="text" name="materialDescription" readonly ng-model="currentProduct.materialDescription" required>
                                                <div class="input-group-btn">
                                                    <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.searchMaterial()"><i class="fa fa-search" title="Search for existing option"></i></a>
                                                    <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.otherMaterial()"><i class="fa fa-pencil" title="Manually type in option which not exists"></i></a>
                                                    <a href="javascript:void(0)" class="btn btn-warning btn-sm" ng-click="event.clearMaterial()"><i class="fa fa-times" title="Clear selection"></i></a>
                                                </div>
                                            </div>
                                        </label>
                                        <div ng-show="frmProduct.materialDescription.$error.required" class="note note-error">Material is required</div>
                                    </section>
                                    <section class="col col-4">
                                        <label class="label">Material Type <span ng-if="currentProduct.materialTypeID">(Code: {{currentProduct.materialTypeUD}})</span></label>
                                        <label class="input" ng-class="{'state-error': frmProduct.materialTypeDescription.$error.required}">
                                            <div class="input-group">
                                                <input class="form-control" name="materialTypeDescription" type="text" readonly ng-model="currentProduct.materialTypeDescription" required>
                                                <div class="input-group-btn">
                                                    <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.searchMaterialType()"><i class="fa fa-search" title="Search for existing option"></i></a>
                                                    <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.otherMaterialType()"><i class="fa fa-pencil" title="Manually type in option which not exists"></i></a>
                                                    <a href="javascript:void(0)" class="btn btn-warning btn-sm" ng-click="event.clearMaterialType()"><i class="fa fa-times" title="Clear selection"></i></a>
                                                </div>
                                            </div>
                                        </label>
                                        <div ng-show="frmProduct.materialTypeDescription.$error.required" class="note note-error">Material type is required</div>
                                    </section>
                                    <section class="col col-4">
                                        <label class="label">Material Color <span ng-if="currentProduct.materialColorID">(Code: {{currentProduct.materialColorUD}})</span></label>
                                        <label class="input" ng-class="{'state-error': frmProduct.materialColorDescription.$error.required}">
                                            <div class="input-group">
                                                <input class="form-control" type="text" name="materialColorDescription" readonly ng-model="currentProduct.materialColorDescription" required>
                                                <div class="input-group-btn">
                                                    <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.searchMaterialColor()"><i class="fa fa-search"></i></a>
                                                    <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.otherMaterialColor()"><i class="fa fa-pencil"></i></a>
                                                    <a href="javascript:void(0)" class="btn btn-warning btn-sm" ng-click="event.clearMaterialColor()"><i class="fa fa-times"></i></a>
                                                </div>
                                            </div>
                                        </label>
                                        <div ng-show="frmProduct.materialColorDescription.$error.required" class="note note-error">Material color is required</div>
                                    </section>
                                </div>

                                <div class="row">
                                    <section class="col col-4">
                                        <label class="label">Material 2 <span ng-if="currentProduct.material2ID">(Code: {{currentProduct.material2UD}})</span></label>
                                        <label class="input">
                                            <div class="input-group">
                                                <input class="form-control" type="text" readonly ng-model="currentProduct.material2Description">
                                                <div class="input-group-btn">
                                                    <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.searchMaterial2()"><i class="fa fa-search" title="Search for existing option"></i></a>
                                                    <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.otherMaterial2()"><i class="fa fa-pencil" title="Manually type in option which not exists"></i></a>
                                                    <a href="javascript:void(0)" class="btn btn-warning btn-sm" ng-click="event.clearMaterial2()"><i class="fa fa-times" title="Clear selection"></i></a>
                                                </div>
                                            </div>
                                        </label>
                                    </section>
                                    <section class="col col-4">
                                        <label class="label">Material 2 Type <span ng-if="currentProduct.material2TypeID">(Code: {{currentProduct.material2TypeUD}})</span></label>
                                        <label class="input">
                                            <div class="input-group">
                                                <input class="form-control" type="text" readonly ng-model="currentProduct.material2TypeDescription">
                                                <div class="input-group-btn">
                                                    <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.searchMaterial2Type()"><i class="fa fa-search" title="Search for existing option"></i></a>
                                                    <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.otherMaterial2Type()"><i class="fa fa-pencil" title="Manually type in option which not exists"></i></a>
                                                    <a href="javascript:void(0)" class="btn btn-warning btn-sm" ng-click="event.clearMaterial2Type()"><i class="fa fa-times" title="Clear selection"></i></a>
                                                </div>
                                            </div>
                                        </label>
                                    </section>
                                    <section class="col col-4">
                                        <label class="label">Material 2 Color <span ng-if="currentProduct.material2ColorID">(Code: {{currentProduct.material2ColorUD}})</span></label>
                                        <label class="input" ng-class="{'state-error': frmProduct.materialColorDescription.$error.required}">
                                            <div class="input-group">
                                                <input class="form-control" type="text" readonly ng-model="currentProduct.material2ColorDescription">
                                                <div class="input-group-btn">
                                                    <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.searchMaterial2Color()"><i class="fa fa-search"></i></a>
                                                    <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.otherMaterial2Color()"><i class="fa fa-pencil"></i></a>
                                                    <a href="javascript:void(0)" class="btn btn-warning btn-sm" ng-click="event.clearMaterial2Color()"><i class="fa fa-times"></i></a>
                                                </div>
                                            </div>
                                        </label>
                                    </section>
                                </div>

                                <div class="row">
                                    <section class="col col-4">
                                        <label class="label">Material 3 <span ng-if="currentProduct.material3ID">(Code: {{currentProduct.material3UD}})</span></label>
                                        <label class="input">
                                            <div class="input-group">
                                                <input class="form-control" type="text" readonly ng-model="currentProduct.material3Description">
                                                <div class="input-group-btn">
                                                    <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.searchMaterial3()"><i class="fa fa-search" title="Search for existing option"></i></a>
                                                    <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.otherMaterial3()"><i class="fa fa-pencil" title="Manually type in option which not exists"></i></a>
                                                    <a href="javascript:void(0)" class="btn btn-warning btn-sm" ng-click="event.clearMaterial3()"><i class="fa fa-times" title="Clear selection"></i></a>
                                                </div>
                                            </div>
                                        </label>
                                    </section>
                                    <section class="col col-4">
                                        <label class="label">Material 3 Type <span ng-if="currentProduct.material3TypeID">(Code: {{currentProduct.material3TypeUD}})</span></label>
                                        <label class="input">
                                            <div class="input-group">
                                                <input class="form-control" type="text" readonly ng-model="currentProduct.material3TypeDescription">
                                                <div class="input-group-btn">
                                                    <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.searchMaterial3Type()"><i class="fa fa-search" title="Search for existing option"></i></a>
                                                    <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.otherMaterial3Type()"><i class="fa fa-pencil" title="Manually type in option which not exists"></i></a>
                                                    <a href="javascript:void(0)" class="btn btn-warning btn-sm" ng-click="event.clearMaterial3Type()"><i class="fa fa-times" title="Clear selection"></i></a>
                                                </div>
                                            </div>
                                        </label>
                                    </section>
                                    <section class="col col-4">
                                        <label class="label">Material 3 Color <span ng-if="currentProduct.material3ColorID">(Code: {{currentProduct.material3ColorUD}})</span></label>
                                        <label class="input" ng-class="{'state-error': frmProduct.materialColorDescription.$error.required}">
                                            <div class="input-group">
                                                <input class="form-control" type="text" readonly ng-model="currentProduct.material3ColorDescription">
                                                <div class="input-group-btn">
                                                    <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.searchMaterial3Color()"><i class="fa fa-search"></i></a>
                                                    <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.otherMaterial3Color()"><i class="fa fa-pencil"></i></a>
                                                    <a href="javascript:void(0)" class="btn btn-warning btn-sm" ng-click="event.clearMaterial3Color()"><i class="fa fa-times"></i></a>
                                                </div>
                                            </div>
                                        </label>
                                    </section>
                                </div>


                                <div class="row" style="display: none;">
                                    <section class="col col-3">
                                        <label class="label">Sub Material <span ng-if="currentProduct.subMaterialID">(Code: {{currentProduct.subMaterialUD}})</span></label>
                                        <label class="input">
                                            <span class="form-control">{{currentProduct.subMaterialDescription}}</span>
                                        </label>
                                    </section>
                                    <section class="col col-3">
                                        <label class="label">Sub Material Color <span ng-if="currentProduct.subMaterialColorID">(Code: {{currentProduct.subMaterialColorUD}})</span></label>
                                        <label class="input">
                                            <span class="form-control">{{currentProduct.subMaterialColorDescription}}</span>
                                        </label>
                                    </section>
                                    <section class="col col-3">
                                        <label class="label">Frame <span ng-if="currentProduct.frameMaterialID">(Code: {{currentProduct.frameMaterialUD}})</span></label>
                                        <label class="input">
                                            <span class="form-control">{{currentProduct.frameMaterialDescription}}</span>
                                        </label>
                                    </section>
                                    <section class="col col-3">
                                        <label class="label">Frame Color <span ng-if="currentProduct.frameMaterialColorID">(Code: {{currentProduct.frameMaterialColorUD}})</span></label>
                                        <label class="input">
                                            <span class="form-control">{{currentProduct.frameMaterialColorDescription}}</span>
                                        </label>
                                    </section>
                                </div>

                                <div class="row">
                                    <section class="col col-4">
                                        <label class="label">Back Cushion <span ng-if="currentProduct.backCushionID">(Code: {{currentProduct.backCushionUD}})</span></label>
                                        <label class="input" ng-class="{'state-error': frmProduct.backCushionDescription.$error.required}">
                                            <div class="input-group">
                                                <input class="form-control" type="text" name="backCushionDescription" readonly ng-model="currentProduct.backCushionDescription" required>
                                                <div class="input-group-btn">
                                                    <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.searchBackCushion()"><i class="fa fa-search" title="Search for existing option"></i></a>
                                                    <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.otherBackCushion()"><i class="fa fa-pencil" title="Manually type in option which not exists"></i></a>
                                                    <a href="javascript:void(0)" class="btn btn-warning btn-sm" ng-click="event.clearBackCushion()"><i class="fa fa-times" title="Clear selection"></i></a>
                                                </div>
                                            </div>
                                        </label>
                                        <div ng-show="frmProduct.backCushionDescription.$error.required" class="note note-error">Back cushion is required</div>
                                    </section>
                                    <section class="col col-4">
                                        <label class="label">Seat Cushion <span ng-if="currentProduct.seatCushionID">(Code: {{currentProduct.seatCushionUD}})</span></label>
                                        <label class="input" ng-class="{'state-error': frmProduct.seatCushionDescription.$error.required}">
                                            <div class="input-group">
                                                <input class="form-control" name="seatCushionDescription" type="text" readonly ng-model="currentProduct.seatCushionDescription" required>
                                                <div class="input-group-btn">
                                                    <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.searchSeatCushion()"><i class="fa fa-search" title="Search for existing option"></i></a>
                                                    <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.otherSeatCushion()"><i class="fa fa-pencil" title="Manually type in option which not exists"></i></a>
                                                    <a href="javascript:void(0)" class="btn btn-warning btn-sm" ng-click="event.clearSeatCushion()"><i class="fa fa-times" title="Clear selection"></i></a>
                                                </div>
                                            </div>
                                        </label>
                                        <div ng-show="frmProduct.seatCushionDescription.$error.required" class="note note-error">Seat cushion is required</div>
                                    </section>
                                    <section class="col col-4">
                                        <label class="label">Cushion Color <span ng-if="currentProduct.cushionColorID">(Code: {{currentProduct.cushionColorUD}})</span></label>
                                        <label class="input">
                                            <div class="input-group">
                                                <input class="form-control" type="text" readonly ng-model="currentProduct.cushionColorDescription">
                                                <div class="input-group-btn">
                                                    <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.searchCushionColor()"><i class="fa fa-search" title="Search for existing option"></i></a>
                                                    <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.otherCushionColor()"><i class="fa fa-pencil" title="Manually type in option which not exists"></i></a>
                                                    <a href="javascript:void(0)" class="btn btn-warning btn-sm" ng-click="event.clearCushionColor()"><i class="fa fa-times" title="Clear selection"></i></a>
                                                </div>
                                            </div>
                                        </label>
                                    </section>
                                </div>
                                <div class="row">
                                    <section class="col col-4">
                                        <label class="label">Quantity</label>
                                        <label class="input">
                                            <input type="text" style="text-align: right;" ng-model="currentProduct.quantity" />
                                        </label>
                                    </section>
                                </div>
                            </fieldset>
                            <fieldset>
                                <h2 style="margin-bottom: 15px;">
                                    Development &nbsp;&nbsp;&nbsp;
                                    <span ng-class="{'state-error': currentProduct.developmentTypeID == null}">
                                        <select style="font-size: 15px"
                                                ng-model="currentProduct.developmentTypeID"
                                                ng-options="item.developmentTypeID as item.developmentTypeNM for item in developmentTypes">
                                            <option value=""></option>
                                        </select>
                                        <i></i>
                                    </span>

                                </h2>

                            </fieldset>
                            <fieldset>
                                <h2 style="margin-bottom: 15px;">SCM NL</h2>
                                <div class="row">
                                    <section class="col col-2">
                                        <label class="label">Factory Deadline</label>
                                        <label class="input">
                                            <i class="icon-append fa fa-calendar"></i>
                                            <input type="text" data-dateformat="dd/mm/yy" class="datepicker" ng-model="currentProduct.factoryDeadline" />
                                        </label>
                                    </section>
                                    <section class="col col-2">
                                        <label class="label">Factory</label>
                                        <label class="select">
                                            <select class="form-control search-filter" ng-model="currentProduct.vnSuggestedFactoryID" ng-options="factory.factoryID as factory.factoryUD for factory in factories">
                                                <option value=""></option>
                                            </select>
                                            <i></i>
                                        </label>
                                    </section>
                                    <section class="col col-8">
                                        <label class="label">Sub Factory</label>
                                        <div class="input-group">
                                            <div class="bootstrap-tagsinput" style="box-sizing: border-box;">
                                                <span class="tag label label-info" style="margin: 2px !important; padding: 3px 28px 3px 8px;" ng-repeat="factory in currentProduct.sampleProductSubFactories">
                                                    {{factory.factoryUD}} &nbsp;
                                                    <span data-role="remove" style="padding: 5px 0px 0px 5px;" ng-click="event.removeSubFactory(factory)"></span>
                                                </span>
                                            </div>
                                            <div class="input-group-btn" style="vertical-align: top;">
                                                <button class="btn btn-success" type="button" style="margin-top: 0px; padding-top:7px;" ng-click="event.addSubFactory()">
                                                    &nbsp;&nbsp;<i class="fa fa-plus"></i> Add &nbsp;&nbsp;
                                                </button>
                                            </div>
                                        </div>
                                    </section>
                                </div>
                            </fieldset>
                            <fieldset>
                                <h2 style="margin-bottom: 15px;">Item Data</h2>
                                <div class="row">
                                    <section class="col col-2">
                                        <label class="label">Inidication Price</label>
                                        <label class="input">
                                            <input type="text" style="text-align: right;" ng-model="currentProduct.indicatedPrice" />
                                        </label>
                                    </section>
                                    <section class="col col-2">
                                        <label class="label">Factory Breakdown</label>
                                        <label class="input">
                                            <span class="form-control" style="text-align: right;">
                                                <a target="_blank" ng-if="!currentProduct.factoryBreakdownID" href="@Url.Action(" View", "BreakDownMng" )/0?modelId=0&sampleProductId={{currentProduct.sampleProductID}}&offerLineId=0&factoryId={{currentProduct.vnSuggestedFactoryID}}">{{currentProduct.factoryBreakdownPriceUSD | currency:'$':2}}</a>
                                                <a target="_blank" ng-if="currentProduct.factoryBreakdownID" href="@Url.Action(" Edit", "FactoryBreakdownMng" )/{{currentProduct.factoryBreakdownID}}">{{currentProduct.factoryBreakdownPriceUSD | currency:'$':2}}</a>
                                            </span>
                                        </label>
                                    </section>
                                    <section class="col col-2">
                                        <label class="label">AVT Breakdown</label>
                                        <label class="input">
                                            <span class="form-control" style="text-align: right;">
                                                {{currentProduct.avtBreakdownPriceUSD | currency:'$':2}}
                                            </span>
                                        </label>
                                    </section>
                                </div>
                            </fieldset>

                            <fieldset>
                                <h2 style="margin-bottom: 15px;">Pieces Info</h2>
                                <div class="row">
                                    <section class="col col-lg-12">
                                        <div class="tilsoft-table-wrapper">
                                            <div class="tilsoft-table">
                                                <div class="tilsoft-table-header" style="width: 1200px">
                                                    <div style="width: 60px; height: 60px;" class="no-padding">
                                                        <a class="btn btn-primary btn-xs font-11" href="javascript:void(0);" ng-click="event.addSampleProductDimension($event)" style="margin-top: 5px"><i class="fa fa-plus"></i> Add</a>
                                                    </div>
                                                    <div style="width: 150px; height: 60px"><b style="font-size: 12px">Name</b></div>
                                                    <div style="width: 180px; height: 60px" class="no-padding">
                                                        <div style="width: 100%; height: 30px; border-right: none; text-align: center"><b style="font-size: 12px">Dimention</b></div>
                                                        <div style="width: 100%; height: 30px; border-bottom: none" class="no-padding">
                                                            <div style="width: 60px; height: 30px; text-align: center"><b style="font-size: 12px">L</b></div>
                                                            <div style="width: 60px; height: 30px; text-align: center"><b style="font-size: 12px">W</b></div>
                                                            <div style="width: 100%; margin-top: 30px; height: 30px; text-align: center"><b style="font-size: 12px">H</b></div>
                                                        </div>
                                                    </div>
                                                    <div style="width: 410px; height: 60px" class="no-padding">
                                                        <div style="width: 100%; height: 30px; border-right: none; text-align: center"><b style="font-size: 12px">Breakdown</b></div>
                                                        <div style="width: 100%; height: 30px; border-bottom: none" class="no-padding">
                                                            <div style="width: 100px; height: 30px; text-align: center"><b style="font-size: 12px">NW</b></div>
                                                            <div style="width: 100px; height: 30px; text-align: center"><b style="font-size: 12px">Frame W</b></div>
                                                            <div style="width: 100px; height: 30px; text-align: center"><b style="font-size: 12px">Wicker W</b></div>
                                                            <div style="width: 100%; margin-top: 30px; height: 30px; text-align: center"><b style="font-size: 12px">Indica Price</b></div>
                                                        </div>
                                                    </div>
                                                    <div style="width: 300px; height: 60px"><b style="font-size: 12px">Remark</b></div>
                                                    <div style="border-bottom: none; height: 60px"></div>
                                                </div>
                                                <div class="tilsoft-table-body" style="width: 1200px; margin-top: 60px">
                                                    <table>
                                                        <tbody>
                                                            <tr ng-repeat="item in currentProduct.sampleProductDimensionDTOs">
                                                                <td style="width: 59px; text-align: center">
                                                                    <a href="javascript:void(0);" title="Remove" class="btn btn-danger btn-xs font-11" ng-click="event.removeSampleProductDimension($event, item.sampleProductDimensionID)"><i class="fa fa-times"></i></a>
                                                                </td>
                                                                <td style="width: 150px;">
                                                                    <input type="text" class="form-control" ng-model="item.sampleProductDimensionNM" />
                                                                </td>
                                                                <td style="width: 60px;">
                                                                    <input type="text" class="form-control" style="text-align: right;" ng-model="item.overallDimL" />
                                                                </td>
                                                                <td style="width: 60px;">
                                                                    <input type="text" class="form-control" style="text-align: right;" ng-model="item.overallDimW" />
                                                                </td>
                                                                <td style="width: 60px;">
                                                                    <input type="text" class="form-control" style="text-align: right;" ng-model="item.overallDimH" />
                                                                </td>
                                                                <td style="width: 100px;">
                                                                    <input type="text" class="form-control" style="text-align: right;" ng-model="item.netWeight" />
                                                                </td>
                                                                <td style="width: 100px;">
                                                                    <input type="text" class="form-control" style="text-align: right;" ng-model="item.frameWeight" />
                                                                </td>
                                                                <td style="width: 100px;">
                                                                    <input type="text" class="form-control" style="text-align: right;" ng-model="item.wickerWeight" />
                                                                </td>
                                                                <td style="width: 110px;">
                                                                    <input type="text" class="form-control" style="text-align: right;" ng-model="item.indicatedPrice" />
                                                                </td>
                                                                <td style="width: 300px;">
                                                                    <input type="text" class="form-control" ng-model="item.remark" />
                                                                </td>
                                                                <td style="border-bottom: none"></td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                </div>
                            </fieldset>
                            <fieldset>
                                <h2 style="margin-bottom: 15px;">Carton Box Info</h2>
                                <div class="row">
                                    <section class="col col-4">
                                        <label class="label">
                                            <span style="width: 29%; float: left; padding-top: 5px">Packaging Method</span>
                                            <select style="width: 69%; float: left" class="form-control search-filter" ng-model="currentProduct.packagingMethodID" ng-options="packagingMethod.packagingMethodID as packagingMethod.packagingMethodNM for packagingMethod in packagingMethods">
                                                <option value="">&nbsp;</option>
                                            </select>
                                        </label>
                                    </section>
                                    <section class="col col-6">
                                        <label class="input">
                                            <span style="width: 26%; margin-right: 1%; float: left; padding-top: 5px">Load Ability (20DC/40DC/40HC)</span>
                                            <input style="width: 14%; margin-right: 1%; float: left; text-align: right;" placeholder="20DC" type="text" ng-model="currentProduct.loadAbility20DC" />
                                            <input style="width: 14%; margin-right: 1%; float: left; text-align: right;" placeholder="40DC" type="text" ng-model="currentProduct.loadAbility40DC" />
                                            <input style="width: 14%; margin-right: 1%; float: left; text-align: right;" placeholder="40HC" type="text" ng-model="currentProduct.loadAbility40HC" />
                                        </label>
                                    </section>
                                </div>
                                <div class="row">
                                    <section class="col col-lg-12">
                                        <div class="tilsoft-table-wrapper">
                                            <div class="tilsoft-table">
                                                <div class="tilsoft-table-header" style="width: 1100px">
                                                    <div style="width: 60px; height: 60px" class="no-padding">
                                                        <a class="btn btn-primary btn-xs font-11" href="javascript:void(0);" ng-click="event.addSampleProductCartonBox($event)" style="margin-top: 5px;"><i class="fa fa-plus"></i> Add</a>
                                                    </div>
                                                    <div style="width: 100px; height: 60px"><b style="font-size: 12px">Box</b></div>
                                                    <div style="width: 150px; height: 60px"><b style="font-size: 12px">Item</b></div>
                                                    <div style="width: 210px; height: 60px" class="no-padding">
                                                        <div style="width: 100%; height: 30px; border-right: none; text-align: center"><b style="font-size: 12px">Carton Box Dimention</b></div>
                                                        <div style="width: 100%; height: 30px; border-bottom: none" class="no-padding">
                                                            <div style="width: 70px; height: 30px; text-align: center"><b style="font-size: 12px">L</b></div>
                                                            <div style="width: 70px; height: 30px; text-align: center"><b style="font-size: 12px">W</b></div>
                                                            <div style="width: 100%; margin-top: 30px; height: 30px; text-align: center"><b style="font-size: 12px">H</b></div>
                                                        </div>
                                                    </div>
                                                    <div style="width: 120px; height: 60px" class="no-padding">
                                                        <div style="width: 100%; height: 30px; border-right: none; text-align: center"><b style="font-size: 12px">Log Infor</b></div>
                                                        <div style="width: 100%; height: 30px; border-bottom: none" class="no-padding">
                                                            <div style="width: 60px; height: 30px; text-align: center"><b style="font-size: 12px">NW</b></div>
                                                            <div style="width: 100%; margin-top: 30px; height: 30px; text-align: center"><b style="font-size: 12px">GW</b></div>
                                                        </div>
                                                    </div>
                                                    <div style="width: 300px; height: 60px"><b style="font-size: 12px">Remark</b></div>
                                                    <div style="border-bottom: none; height: 60px"></div>
                                                </div>
                                                <div class="tilsoft-table-body" style="width: 1100px; margin-top: 60px">
                                                    <table>
                                                        <tbody>
                                                            <tr ng-repeat="item in currentProduct.sampleProductCartonBoxDTOs">
                                                                <td style="width: 59px; text-align: center">
                                                                    <a href="javascript:void(0);" title="Remove" class="btn btn-danger btn-xs font-11" ng-click="event.removeSampleProductCartonBox($event, item.sampleProductCartonBoxID)"><i class="fa fa-times"></i></a>
                                                                </td>
                                                                <td style="width: 100px;">
                                                                    <input type="text" class="form-control" ng-model="item.sampleProductCartonBoxNM" />
                                                                </td>
                                                                <td style="width: 150px;">
                                                                    <input type="text" class="form-control" ng-model="item.sampleProductCartonBoxItem" />
                                                                </td>
                                                                <td style="width: 70px;">
                                                                    <input type="text" class="form-control" style="text-align: right;" ng-model="item.cartonBoxDimL" />
                                                                </td>
                                                                <td style="width: 70px;">
                                                                    <input type="text" class="form-control" style="text-align: right;" ng-model="item.cartonBoxDimW" />
                                                                </td>
                                                                <td style="width: 70px;">
                                                                    <input type="text" class="form-control" style="text-align: right;" ng-model="item.cartonBoxDimH" />
                                                                </td>
                                                                <td style="width: 60px;">
                                                                    <input type="text" class="form-control" style="text-align: right;" ng-model="item.netWeight" />
                                                                </td>
                                                                <td style="width: 60px;">
                                                                    <input type="text" class="form-control" style="text-align: right;" ng-model="item.grossWeight" />
                                                                </td>
                                                                <td style="width: 300px;">
                                                                    <input type="text" class="form-control" ng-model="item.remark" />
                                                                </td>
                                                                <td style="border-bottom: none"></td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                </div>
                            </fieldset>

                            <fieldset>
                                <h2 style="margin-bottom: 15px;">Packaging Materials</h2>
                                <div class="row">
                                    <section class="col col-lg-12">
                                        <div class="tilsoft-table-wrapper">
                                            <div class="tilsoft-table">
                                                <div class="tilsoft-table-body" style="width: 100%; height: auto; min-height: 100px; margin-top: 0px;">
                                                    <table>
                                                        <tr>
                                                            <th style="width: 100px;">Name</th>
                                                            <th style="width: 100px;">Unit</th>
                                                            <th style="width: 100px;">QNT</th>
                                                            <th style="width: 300px;">Remark</th>
                                                            <th></th>
                                                        </tr>
                                                        <tr ng-repeat="item in currentProduct.sampleProductPackagingMaterialDTOs">
                                                            <td style="width: 100px;" ng-class="{'state-error': editForm.sampleProductPackagingMaterialTypeID.$error.required}">
                                                                <select ng-disabled="true" class="form-control" ng-model="item.sampleProductPackagingMaterialTypeID" ng-options="sampleProductPackagingMaterialTypeDTO.sampleproductPackagingMaterialTypeID as sampleProductPackagingMaterialTypeDTO.sampleproductPackagingMaterialTypeNM for sampleProductPackagingMaterialTypeDTO in sampleProductPackagingMaterialTypeDTOs" required">
                                                                    <option value=""></option>
                                                                </select>
                                                            </td>
                                                            <td style="width: 100px;" ng-class="{'state-error': editForm.unitID.$error.required}">
                                                                <select class="form-control" ng-model="item.unitID" ng-options="unitDTO.unitID as unitDTO.unitNM for unitDTO in unitDTOs" required">
                                                                    <option value=""></option>
                                                                </select>
                                                            </td>
                                                            <td>
                                                                <input class="form-control" style="text-align: right" avs-number-2 ng-decimal="4" type="text" ng-model="item.quantity" />
                                                            </td>
                                                            <td>
                                                                <input type="text" class="form-control" ng-model="item.remark" />
                                                            </td>
                                                            <td></td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                </div>
                                <div class="row">
                                    <section class="col col-6">
                                        <label class="label">Remark</label>
                                        <label class="input">
                                            <input type="text" ng-model="currentProduct.remark" />
                                        </label>
                                    </section>
                                </div>
                            </fieldset>
                            <fieldset>
                                <h2>Item location</h2>
                                <section>
                                    <ul style="list-style-position: inside;">
                                        <li ng-repeat="location in currentProduct.sampleProductLocationDTOs">
                                            <strong>{{location.sampleProductItemUD}}</strong>: {{location.currentLocation}} <span ng-if="location.locationDate">({{location.locationDate}})</span>
                                        </li>
                                    </ul>
                                </section>
                            </fieldset>
                            <fieldset>
                                <h2 style="margin-bottom: 15px;">Internal Remark</h2>
                                <a href="javascript:void(0)" class="btn btn-success btn-sm" ng-click="event.addRemark()"><i class="fa fa-plus"></i> Add New Remark</a>
                                <div class="smart-timeline" style="margin-bottom: 30px;">
                                    <ul class="smart-timeline-list">
                                        <li ng-repeat="item in currentProduct.sampleRemarks | orderBy: '-sampleRemarkID'">
                                            <div class="smart-timeline-icon">
                                                <i class="fa fa-user"></i>
                                            </div>
                                            <div class="smart-timeline-time">
                                                <small>{{item.updatedDate}}</small>
                                                <br />
                                                <a href="javascript:void(0)" class="btn btn-success btn-xs" style="width: 70px; margin-bottom: 5px;" ng-click="event.editRemark(item)"><i class="fa fa-pencil"></i> Edit</a>
                                                <br />
                                                <a href="javascript:void(0)" class="btn btn-danger btn-xs" style="width: 70px; margin-bottom: 5px;" ng-click="event.removeRemark(item)"><i class="fa fa-times"></i> Remove</a>
                                            </div>
                                            <div class="smart-timeline-content">
                                                <p>
                                                    <a ng-if="item.updatedBy" href="{{context.profileUrl}}{{item.updatedBy}}" data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600">
                                                        <strong>{{item.updatorName}}</strong>
                                                    </a>
                                                </p>
                                                <p ng-bind-html="method.formatRemark(item.remark)"></p>
                                                <br />
                                                <u>Attachment</u>
                                                <ul style="margin-left: 15px;">
                                                    <li ng-repeat="image in item.sampleRemarkImages" style="padding: 0px;">
                                                        <a href="{{image.fileLocation}}" target="_blank">{{image.friendlyName}}</a>
                                                    </li>
                                                </ul>
                                                <div class="clear"></div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </fieldset>


                            <fieldset>
                                <h2 style="margin-bottom: 15px;">Client Request</h2>
                                <a href="javascript:void(0)" class="btn btn-success btn-sm" ng-click="event.addMeetingMinute()"><i class="fa fa-plus"></i> Add New Request</a>
                                <div class="smart-timeline" style="margin-bottom: 30px;">
                                    <ul class="smart-timeline-list">
                                        <li ng-repeat="item in currentProduct.sampleProductMinutes | orderBy: '-sampleProductMinuteID'">
                                            <div class="smart-timeline-icon">
                                                <i class="fa fa-user"></i>
                                            </div>
                                            <div class="smart-timeline-time">
                                                <small>{{item.updatedDate}}</small>
                                                <br />
                                                <a href="javascript:void(0)" class="btn btn-success btn-xs" style="width: 70px; margin-bottom: 5px;" ng-click="event.editMeetingMinute(item)"><i class="fa fa-pencil"></i> Edit</a>
                                                <br />
                                                <a href="javascript:void(0)" class="btn btn-danger btn-xs" style="width: 70px; margin-bottom: 5px;" ng-click="event.removeMeetingMinute(item)"><i class="fa fa-times"></i> Remove</a>
                                            </div>
                                            <div class="smart-timeline-content">
                                                <p>
                                                    <a ng-if="item.updatedBy" href="{{context.profileUrl}}{{item.updatedBy}}" data-featherlight="iframe" data-featherlight-iframe-allowfullscreen="true" data-featherlight-iframe-width="800" data-featherlight-iframe-height="600">
                                                        <strong>{{item.updatorName}}</strong>
                                                    </a>
                                                </p>
                                                <p ng-bind-html="method.formatMeetingMinute(item.meetingMinute)"></p>
                                                <br />
                                                <u>Attachment</u>
                                                <ul style="margin-left: 15px;">
                                                    <li ng-repeat="image in item.sampleProductMinuteImages" style="padding: 0px;">
                                                        <a href="{{image.fileLocation}}" target="_blank">{{image.friendlyName}}</a>
                                                    </li>
                                                </ul>
                                                <div class="clear"></div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </fieldset>
                        </div>
                        <div class="widget-footer" style="text-align: left;">
                            <a href="javascript:void(0)" class="btn btn-primary btn-sm" ng-click="event.frmProductOK()"><i class="fa fa-check"></i> OK</a>
                            <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.frmProductCancel()"><i class="fa fa-times"></i> Cancel</a>

                            <a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="event.frmImportProduct_open()" style="float:right;"><i class="fa fa-database"></i> Import From Existing Product</a>
                        </div>
                    </div>
                </div>
            </div>
        </article>
    </form>
</div>


<script>
    scope.spDevelopment = [
        { id: true, name: 'Yes' },
        { id: false, name: 'No' }
    ];

    // setup date time picker
    $('.datepicker').each(function () {

        var $this = $(this),
            dataDateFormat = $this.attr('data-dateformat') || 'dd.mm.yy';

        $this.datepicker({
            dateFormat: dataDateFormat,
            prevText: '<i class="fa fa-chevron-left"></i>',
            nextText: '<i class="fa fa-chevron-right"></i>',
        });

        //clear memory reference
        $this = null;
    });

    // sub factory
    scope.event.addSubFactory = function () {
        angular.forEach(scope.subFactories, function (value, key) {
            value.isSelected = false;
        }, null);
        jQuery('#frmSubFactory').modal('show');
    };

    scope.event.updateSubFactory = function () {
        angular.forEach(scope.subFactories, function (value, key) {
            if (value.isSelected) {
                tmpIndex = jsHelper.getArrayIndex(scope.currentProduct.sampleProductSubFactories, 'factoryID', value.factoryID);
                if (tmpIndex < 0) {
                    scope.currentProduct.sampleProductSubFactories.push({
                        sampleProductSubFactoryID: scope.method.getNewID(),
                        factoryID: value.factoryID,
                        factoryUD: value.factoryUD
                    });
                }
            }
        }, null);

        jQuery('#frmSubFactory').modal('hide');
    };

    scope.event.removeSubFactory = function (item) {
        scope.currentProduct.sampleProductSubFactories.splice(scope.currentProduct.sampleProductSubFactories.indexOf(item), 1);
    };

    scope.event.frmProductCancel = function (item) {
        jsHelper.hidePopup('frmProduct', function () { });
        scope.method.goToSection('product-' + scope.currentProduct.sampleProductID);
    };

    scope.event.frmProductOK = function () {
        // check is valid
        var isValid = true;
        if (scope.currentProduct.sampleProductStatusID !== 1) { // 1: created status
            if (!scope.currentProduct.vnSuggestedFactoryID) {
                isValid = false;
                alert('Invalid factory!');
            }

            if (!scope.currentProduct.factoryDeadline) {
                isValid = false;
                alert('Invalid factory deadline!');
            }

            if (!scope.currentProduct.quantity) {
                isValid = false;
                alert('Invalid sample quantity!');
            }
        }

        if (!scope.currentProduct.articleDescription) {
            isValid = false;
            alert('Invalid Model!');
            return;
        }
        if (!scope.currentProduct.materialDescription) {
            isValid = false;
            alert('Invalid Material!');
            return;
        }
        if (!scope.currentProduct.materialTypeDescription) {
            isValid = false;
            alert('Invalid Material Type!');
            return;
        }
        if (!scope.currentProduct.materialColorDescription) {
            isValid = false;
            alert('Invalid Material Color!');
            return;
        }
        if (!scope.currentProduct.backCushionDescription) {
            isValid = false;
            alert('Invalid Back Cushion!');
            return;
        }
        if (!scope.currentProduct.seatCushionDescription) {
            isValid = false;
            alert('Invalid Seat Cushion!');
            return;
        }
        if (!scope.currentProduct.developmentTypeID) {              
            isValid = false;
            alert('Invalid Development!');
            return;
        }
        if (!isValid) {
            return;
        }

        var tmpIndex = -1;
        if (scope.currentProduct.nlSuggestedFactoryID) {
            // get nl factory name
            tmpIndex = jsHelper.getArrayIndex(scope.factories, 'factoryID', scope.currentProduct.nlSuggestedFactoryID);
            if (tmpIndex >= 0) {
                scope.currentProduct.nlSuggestedFactoryUD = scope.factories[tmpIndex].factoryUD;
            }
            else {
                scope.currentProduct.nlSuggestedFactoryUD = '';
            }
        }
        else {
            scope.currentProduct.nlSuggestedFactoryUD = '';
        }
        if (scope.currentProduct.vnSuggestedFactoryID) {
            // get vn factory name
            tmpIndex = jsHelper.getArrayIndex(scope.factories, 'factoryID', scope.currentProduct.vnSuggestedFactoryID);
            if (tmpIndex >= 0) {
                scope.currentProduct.vnSuggestedFactoryUD = scope.factories[tmpIndex].factoryUD;
            }
            else {
                scope.currentProduct.vnSuggestedFactoryUD = '';
            }
        }
        else {
            scope.currentProduct.vnSuggestedFactoryUD = '';
        }
        if (scope.currentProduct.requestTypeID) {
            // get request type name
            tmpIndex = jsHelper.getArrayIndex(scope.sampleRequestTypes, 'requestTypeID', scope.currentProduct.requestTypeID);
            if (tmpIndex >= 0) {
                scope.currentProduct.requestTypeNM = scope.sampleRequestTypes[tmpIndex].requestTypeNM;
            }
            else {
                scope.currentProduct.requestTypeNM = '';
            }
        }
        else {
            scope.currentProduct.requestTypeNM = '';
        }

        index = jsHelper.getArrayIndex(scope.data.sampleProducts, 'sampleProductID', scope.currentProduct.sampleProductID);
        if (!scope.currentProduct.displayIndex) {
            scope.currentProduct.displayIndex = scope.data.sampleProducts.length + 1;
        }
        if (index >= 0) {
            scope.data.sampleProducts[index] = JSON.parse(JSON.stringify(scope.currentProduct));
        }
        else {
            scope.data.sampleProducts.push(JSON.parse(JSON.stringify(scope.currentProduct)));
        }
        jsHelper.hidePopup('frmProduct', function () { });
        scope.method.goToSection('product-' + scope.currentProduct.sampleProductID);
    };
</script>